# ==========================================
# Alert模块环境变量配置示例
# ==========================================
# 🎯 用途：Alert模块四层配置体系的环境变量层配置
# 📝 说明：所有变量都有合理的默认值，可根据生产环境需求调整
# 🔧 使用：复制为 .env.alert 文件并根据实际需求修改
# 📅 创建日期：2025-09-16

# ==========================================
# 1. Alert主配置 (alert.config.ts)
# ==========================================

# 告警评估间隔（秒）
# 范围：10-3600秒，推荐：60秒
# 用途：系统评估告警规则的时间间隔
ALERT_EVALUATION_INTERVAL=60

# 默认冷却期（秒）
# 范围：60-7200秒，推荐：300秒（5分钟）
# 用途：告警触发后的冷却时间，避免重复告警
ALERT_DEFAULT_COOLDOWN=300

# 批处理大小
# 范围：10-1000，推荐：100
# 用途：批量处理告警的数量
ALERT_BATCH_SIZE=100

# 评估超时时间（毫秒）
# 范围：1000-30000毫秒，推荐：5000毫秒（5秒）
# 用途：单次告警评估的最大等待时间
ALERT_EVALUATION_TIMEOUT=5000

# 最大重试次数
# 范围：1-10次，推荐：3次
# 用途：告警操作失败后的重试次数
ALERT_MAX_RETRIES=3

# ==========================================
# 2. Alert验证配置 (alert-validation.config.ts)
# ==========================================

# 最小持续时间（秒）
# 范围：30-600秒，推荐：30秒
# 用途：告警规则持续时间的最小值验证
ALERT_VALIDATION_DURATION_MIN=30

# 最大持续时间（秒）
# 范围：30-600秒，推荐：600秒（10分钟）
# 用途：告警规则持续时间的最大值验证
ALERT_VALIDATION_DURATION_MAX=600

# 最大冷却期（秒）
# 范围：60-3000秒，推荐：3000秒（50分钟）
# 用途：告警规则冷却期的最大值验证
ALERT_VALIDATION_COOLDOWN_MAX=3000

# ==========================================
# 3. Alert缓存配置 (alert-cache.config.ts)
# ==========================================

# 活跃数据TTL（秒）
# 范围：60-7200秒，推荐：300秒（5分钟）
# 用途：当前活跃告警的缓存时效
ALERT_CACHE_ACTIVE_TTL=300

# 历史数据TTL（秒）
# 范围：300-86400秒，推荐：3600秒（1小时）
# 用途：历史告警记录的缓存时效
ALERT_CACHE_HISTORICAL_TTL=3600

# 冷却期TTL（秒）
# 范围：60-7200秒，推荐：300秒（5分钟）
# 用途：告警冷却期的缓存时效
ALERT_CACHE_COOLDOWN_TTL=300

# 配置缓存TTL（秒）
# 范围：300-3600秒，推荐：600秒（10分钟）
# 用途：告警配置的缓存时效
ALERT_CACHE_CONFIG_TTL=600

# 统计缓存TTL（秒）
# 范围：60-1800秒，推荐：300秒（5分钟）
# 用途：告警统计数据的缓存时效
ALERT_CACHE_STATS_TTL=300

# 最大批量处理数量
# 范围：100-10000，推荐：1000
# 用途：大量告警同时处理的上限
ALERT_MAX_BATCH_PROCESSING=1000

# 大批量操作大小
# 范围：500-5000，推荐：1000
# 用途：数据库批量操作的大小
ALERT_LARGE_BATCH_SIZE=1000

# 最大活跃告警数量
# 范围：1000-100000，推荐：10000
# 用途：系统可同时处理的最大活跃告警数
ALERT_MAX_ACTIVE_ALERTS=10000

# 缓存压缩阈值（字节）
# 范围：512-8192字节，推荐：2048字节（2KB）
# 用途：超过此大小的告警数据将被压缩存储
ALERT_CACHE_COMPRESSION_THRESHOLD=2048

# 是否启用缓存压缩
# 值：true/false，推荐：true
# 用途：控制是否对大型告警数据进行压缩
ALERT_CACHE_COMPRESSION_ENABLED=true

# 缓存最大内存使用（MB）
# 范围：32-1024MB，推荐：128MB
# 用途：Alert模块专用的缓存内存限制
ALERT_CACHE_MAX_MEMORY_MB=128

# 缓存键最大长度
# 范围：64-512字符，推荐：256字符
# 用途：Redis缓存键的最大长度限制
ALERT_CACHE_MAX_KEY_LENGTH=256

# ==========================================
# 4. Alert性能配置 (alert-performance.config.ts)
# ==========================================

# 最大并发数
# 范围：1-50，推荐：5
# 用途：Alert系统最大并发处理能力
ALERT_MAX_CONCURRENCY=5

# 队列大小限制
# 范围：10-1000，推荐：100
# 用途：Alert任务队列的最大容量
ALERT_QUEUE_SIZE_LIMIT=100

# 每分钟速率限制
# 范围：1-1000，推荐：100
# 用途：Alert处理的每分钟最大数量
ALERT_RATE_LIMIT_PER_MINUTE=100

# 连接池大小
# 范围：1-50，推荐：10
# 用途：Alert系统数据库连接池大小
ALERT_CONNECTION_POOL_SIZE=10

# ==========================================
# 5. Alert限制配置 (alert-validation.config.ts)
# ==========================================

# 单规则最大条件数
# 范围：1-50，推荐：10
# 用途：单个告警规则可配置的最大条件数量
ALERT_LIMITS_MAX_CONDITIONS=10

# 单用户最大规则数
# 范围：10-1000，推荐：100
# 用途：单个用户可创建的最大告警规则数量
ALERT_LIMITS_MAX_RULES_PER_USER=100

# 默认分页大小
# 范围：5-100，推荐：20
# 用途：告警列表查询的默认分页大小
ALERT_LIMITS_DEFAULT_PAGE_SIZE=20

# 单次查询最大结果数
# 范围：10-1000，推荐：100
# 用途：单次告警查询可返回的最大结果数量
ALERT_LIMITS_MAX_QUERY_RESULTS=100

# ==========================================
# 6. Alert缓存配置（Redis前缀）
# ==========================================

# 冷却期缓存键前缀
# 默认：alert:cooldown:
# 用途：Redis中冷却期缓存的键名前缀
ALERT_CACHE_COOLDOWN_PREFIX=alert:cooldown:

# 活跃告警缓存键前缀
# 默认：alert:active
# 用途：Redis中活跃告警缓存的键名前缀
ALERT_CACHE_ACTIVE_PREFIX=alert:active

# ==========================================
# 7. 兼容性配置（向后兼容旧格式）
# ==========================================

# 兼容旧的缓存配置格式
# 注意：新配置优先级高于旧配置
CACHE_ALERT_ACTIVE_TTL=300
CACHE_ALERT_HISTORICAL_TTL=3600
CACHE_ALERT_COOLDOWN_TTL=300
CACHE_ALERT_CONFIG_TTL=600
CACHE_ALERT_STATS_TTL=300

# ==========================================
# 8. 开发环境特殊配置
# ==========================================

# 开发环境：更短的TTL和更小的批处理
# 生产环境应使用上述推荐值
# ALERT_EVALUATION_INTERVAL=30
# ALERT_CACHE_ACTIVE_TTL=60
# ALERT_BATCH_SIZE=50

# ==========================================
# 9. 生产环境优化配置
# ==========================================

# 生产环境：更长的TTL和更大的批处理
# 高负载环境推荐配置
# ALERT_EVALUATION_INTERVAL=120
# ALERT_CACHE_ACTIVE_TTL=600
# ALERT_BATCH_SIZE=200
# ALERT_MAX_BATCH_PROCESSING=2000
# ALERT_MAX_ACTIVE_ALERTS=50000

# ==========================================
# 配置说明
# ==========================================
# 
# 📖 四层配置体系：
# 1. 环境变量层（本文件）- 部署时配置
# 2. 配置文件层 - 类型验证和默认值
# 3. 验证层 - 运行时验证和边界检查
# 4. 常量层 - 固定业务标准
# 
# 🔧 配置优先级：
# 环境变量 > 配置文件默认值 > 硬编码常量
# 
# 📝 使用说明：
# 1. 复制此文件为 .env.alert
# 2. 根据环境需求修改对应的值
# 3. 重启应用使配置生效
# 4. 查看日志确认配置加载成功
# 
# ⚠️  注意事项：
# - 所有时间单位明确标注（秒/毫秒）
# - 数值范围已在注释中说明
# - 超出范围的值会导致启动失败
# - 生产环境建议增加监控和告警
# 
# 🔗 相关文档：
# - CLAUDE.md - Alert模块架构说明
# - src/alert/config/ - 配置文件详情
# - test/jest/unit/alert-config-consistency.spec.ts - 配置测试