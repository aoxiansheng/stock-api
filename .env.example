# =================================================================
# New Stock API Backend - Environment Configuration Example
# =================================================================
# 
# 🎯 四层配置体系标准 - 环境变量配置示例
# 
# 层级说明：
# - Layer 1: 环境变量 (此文件)
# - Layer 2: 配置文件 (*.config.ts)
# - Layer 3: 兼容性层 (compatibility wrappers)
# - Layer 4: 常量层 (constants)
#
# 📝 复制此文件为 .env 并修改相应值
# =================================================================

# =================================================================
# 🌍 基础环境配置
# =================================================================
NODE_ENV=development
PORT=3000
HOST=localhost

# =================================================================
# 🗄️ 数据库配置
# =================================================================
MONGODB_URI=mongodb://localhost:27017/smart-stock-data
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_URL=redis://localhost:6379

# =================================================================
# 🔐 安全配置
# =================================================================
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters-long-for-security
JWT_EXPIRES_IN=24h

# =================================================================
# 📊 LongPort Provider 配置 (可选)
# =================================================================
LONGPORT_APP_KEY=your_longport_app_key
LONGPORT_APP_SECRET=your_longport_app_secret
LONGPORT_ACCESS_TOKEN=your_longport_access_token

# =================================================================
# 🎛️ 功能开关配置
# =================================================================
AUTO_INIT_ENABLED=true
MONITORING_ENABLED=true

# =================================================================
# ⚡ Cache 统一配置
# =================================================================
# TTL 配置 (秒)
CACHE_DEFAULT_TTL=300
CACHE_STRONG_TTL=5
CACHE_REALTIME_TTL=30
CACHE_MONITORING_TTL=300
CACHE_AUTH_TTL=300
CACHE_TRANSFORMER_TTL=300
CACHE_SUGGESTION_TTL=300
CACHE_LONG_TERM_TTL=3600

# 性能配置
CACHE_COMPRESSION_THRESHOLD=1024
CACHE_COMPRESSION_ENABLED=true
CACHE_MAX_ITEMS=10000
CACHE_MAX_KEY_LENGTH=255
CACHE_MAX_VALUE_SIZE_MB=10

# 操作配置
CACHE_SLOW_OPERATION_MS=100
CACHE_RETRY_DELAY_MS=100
CACHE_LOCK_TTL=30

# 限制配置
CACHE_MAX_BATCH_SIZE=100
CACHE_MAX_SIZE=10000
CACHE_LRU_SORT_BATCH_SIZE=1000
SMART_CACHE_MAX_BATCH=50
CACHE_MAX_SIZE_MB=1024

# =================================================================
# 🔧 Common 模块配置
# =================================================================
# 批量处理配置
DEFAULT_BATCH_SIZE=100
MAX_BATCH_SIZE=1000
DEFAULT_PAGE_SIZE=10
MAX_PAGE_SIZE=100
MAX_CONCURRENT=10

# 超时配置 (毫秒)
QUICK_TIMEOUT_MS=5000
DEFAULT_TIMEOUT_MS=30000
LONG_TIMEOUT_MS=60000
CONNECTION_TIMEOUT_MS=5000

# 重试配置
MAX_RETRY_ATTEMPTS=3
BACKOFF_BASE=2
MAX_RETRY_DELAY_MS=10000
CRITICAL_MAX_ATTEMPTS=5

# 性能阈值配置 (毫秒)
FAST_OPERATION_THRESHOLD_MS=100
NORMAL_OPERATION_THRESHOLD_MS=500
SLOW_OPERATION_THRESHOLD_MS=1000
VERY_SLOW_OPERATION_THRESHOLD_MS=5000
CRITICAL_OPERATION_THRESHOLD_MS=10000

# 内存阈值配置 (MB)
LOW_MEMORY_THRESHOLD_MB=50
NORMAL_MEMORY_THRESHOLD_MB=100
HIGH_MEMORY_THRESHOLD_MB=200
CRITICAL_MEMORY_THRESHOLD_MB=500
MAX_OBJECT_SIZE_MB=10
MAX_REQUEST_SIZE_MB=50

# 连接池配置
MIN_CONNECTION_POOL_SIZE=5
MAX_CONNECTION_POOL_SIZE=20

# 大小限制配置
SMALL_SIZE_LIMIT=50
MEDIUM_SIZE_LIMIT=100
LARGE_SIZE_LIMIT=500
HUGE_SIZE_LIMIT=1000
MASSIVE_SIZE_LIMIT=10000

# =================================================================
# 🌐 环境特定配置
# =================================================================
# 调试功能配置
ENV_DEBUG_LOGS=true
ENV_VERBOSE_ERRORS=true
ENV_STACK_TRACES=true
ENV_REQUEST_LOGGING=true

# 性能优化配置
ENV_HOT_RELOAD=true
ENV_SOURCE_MAPS=true
ENV_SKIP_AUTH_TESTING=false

# 开发工具配置
ENV_API_DOCS=true
ENV_SWAGGER_UI=true
ENV_METRICS_ENDPOINT=true

# 安全配置
ENV_CORS_ALLOW_ALL=false
ENV_DISABLE_CSRF=false
ENV_ALLOW_HTTP=false

# 资源限制配置
ENV_MAX_HEAP_SIZE_MB=1024
ENV_MAX_CACHE_SIZE_MB=256
ENV_MAX_WORKERS=4
ENV_MAX_CONCURRENT_REQUESTS=100
ENV_REQUEST_TIMEOUT_MS=30000

# =================================================================
# 📋 模块特定配置文件说明
# =================================================================
# 
# 以下模块有专门的配置文件，请参考：
# - Auth 模块: .env.auth.example
# - Cache 模块: .env.cache.example  
# - Notification 模块: .env.notification.example
# - Smart Cache: .env.smart-cache.example
# - Stream Cache: .env.stream-cache.example
#
# 这些模块配置可以与此文件并存使用
#
# =================================================================
# 🚀 快速启动说明
# =================================================================
#
# 1. 复制此文件为 .env
# 2. 修改数据库连接信息
# 3. 设置JWT密钥（必须至少32个字符）
# 4. 根据需要调整功能开关
# 5. 运行 bun run dev 启动开发服务器
#
# =================================================================
# 📚 配置验证
# =================================================================
#
# 使用以下命令验证配置：
# - 类型检查: DISABLE_AUTO_INIT=true npm run typecheck:file -- src/appcore/configuration/config.module.ts
# - 配置测试: bun run test:unit:core
# - 启动测试: bun run start:debug
#
# =================================================================