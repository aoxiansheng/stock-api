# 数据库配置
MONGODB_URI=mongodb://localhost:27017/smart-stock-data
REDIS_URL=redis://localhost:6379

# 服务配置
PORT=3000
NODE_ENV=development

# 数据源配置
# LongPort
LONGPORT_APP_KEY=your_longport_app_key
LONGPORT_APP_SECRET=your_longport_app_secret
LONGPORT_ACCESS_TOKEN=your_longport_access_token

# LongPort SG
LONGPORT_SG_APP_KEY=your_longport_sg_app_key
LONGPORT_SG_APP_SECRET=your_longport_sg_app_secret
LONGPORT_SG_ACCESS_TOKEN=your_longport_sg_access_token

# iTick
ITICK_TOKEN=your_itick_token

# TwelveData
TWELVEDATA_API_KEY=your_twelvedata_api_key

# Futu
FUTU_HOST=your_futu_host
FUTU_PORT=your_futu_port
FUTU_RSA_FILE=your_futu_rsa_file

# 缓存配置
CACHE_TTL=300
CACHE_MAX_ITEMS=10000

# 速率限制 (旧配置，保留兼容性)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# 双轨制限速系统配置 - 生产环境
# IP级别频率限制配置
IP_RATE_LIMIT_ENABLED=true
IP_RATE_LIMIT_MAX=1000
IP_RATE_LIMIT_WINDOW=60000

# API Key级别频率限制配置  
API_RATE_LIMIT_STRATEGY=fixed_window
API_RATE_LIMIT_DEFAULT_REQUESTS=100
API_RATE_LIMIT_DEFAULT_WINDOW=1h

# JWT 认证
JWT_SECRET=your_super_secret_and_long_string_here

# =============== Query组件配置 ===============

# 批量处理配置
QUERY_MAX_BATCH_SIZE=50                    # 单次Receiver请求的最大符号数 (1-1000)
QUERY_MAX_MARKET_BATCH_SIZE=100            # 单个市场处理的最大符号数 (1-2000)

# 超时控制配置 (毫秒)
QUERY_MARKET_TIMEOUT=30000                 # 市场级并行处理超时 (1-300000ms/5分钟)
QUERY_RECEIVER_TIMEOUT=15000               # Receiver批次超时 (1-120000ms/2分钟)

# 内存监控配置
QUERY_MEMORY_WARNING_THRESHOLD=0.7         # 内存使用率警告阈值 (0.1-0.95)
QUERY_MEMORY_CRITICAL_THRESHOLD=0.9        # 内存使用率临界阈值 (0.5-0.99)
QUERY_MEMORY_REDUCTION_RATIO=0.5           # 内存压力下批量大小降级比例 (0.1-1.0)

# 性能调优配置
QUERY_ENABLE_MEMORY_OPTIMIZATION=false     # 是否启用内存垃圾回收优化
QUERY_GC_TRIGGER_INTERVAL=1000             # 垃圾回收触发间隔 (1-10000符号数)

# 自动初始化配置
AUTO_INIT_ENABLED=true
AUTO_INIT_SYMBOL_MAPPINGS=true
AUTO_INIT_SKIP_EXISTING=true
DISABLE_AUTO_INIT=false                    # 测试环境专用，禁用自动初始化