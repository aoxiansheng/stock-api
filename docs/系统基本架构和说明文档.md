# ğŸ—ï¸ æ™ºèƒ½è‚¡ç¥¨æ•°æ®ç³»ç»Ÿ - æ¶æ„æ¦‚è§ˆ

## ğŸ“‹ ç›®å½•

- [ğŸ“‹ é¡¹ç›®æ¦‚è¿°](#-é¡¹ç›®æ¦‚è¿°)
- [ğŸ›ï¸ ç³»ç»Ÿæ¶æ„](#%EF%B8%8F-ç³»ç»Ÿæ¶æ„)
  - [æ ¸å¿ƒæ¶æ„å›¾](#æ ¸å¿ƒæ¶æ„å›¾)
  - [å…­ç»„ä»¶æ ¸å¿ƒæ¶æ„è¯¦è§£](#å…­ç»„ä»¶æ ¸å¿ƒæ¶æ„è¯¦è§£)
  - [åŒæ—¶æ•ˆæ¥å£è®¾è®¡](#åŒæ—¶æ•ˆæ¥å£è®¾è®¡)
- [ğŸ” ä¸‰å±‚è®¤è¯ä½“ç³»](#-ä¸‰å±‚è®¤è¯ä½“ç³»)
- [ğŸ“Š æ•°æ®æºé›†æˆ](#-æ•°æ®æºé›†æˆ)
- [ğŸª æ™ºèƒ½ç¼“å­˜ä¸å­˜å‚¨ç­–ç•¥](#-æ™ºèƒ½ç¼“å­˜ä¸å­˜å‚¨ç­–ç•¥)
- [ğŸ§© å…±äº«ç»„ä»¶æ¶æ„](#-å…±äº«ç»„ä»¶æ¶æ„)
- [ğŸ“ˆ ä¼ä¸šçº§ç›‘æ§ä¸æ€§èƒ½ä¼˜åŒ–](#-ä¼ä¸šçº§ç›‘æ§ä¸æ€§èƒ½ä¼˜åŒ–)
- [ğŸ›¡ï¸ å®¹é”™ä¸å®‰å…¨æ¡†æ¶](#%EF%B8%8F-å®¹é”™ä¸å®‰å…¨æ¡†æ¶)
- [ğŸš€ è‡ªåŠ¨åŒ–ç³»ç»Ÿ](#-è‡ªåŠ¨åŒ–ç³»ç»Ÿ)
- [ğŸ“ é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [ğŸŒŸ æ ¸å¿ƒæŠ€æœ¯æ ˆ](#-æ ¸å¿ƒæŠ€æœ¯æ ˆ)
- [ğŸ¯ ç³»ç»Ÿä¼˜åŠ¿](#-ç³»ç»Ÿä¼˜åŠ¿)
- [ğŸ”„ æ‰©å±•èƒ½åŠ›](#-æ‰©å±•èƒ½åŠ›)

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æ™ºèƒ½è‚¡ç¥¨æ•°æ®ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºNestJS + Bunçš„ä¼ä¸šçº§è‚¡ç¥¨æ•°æ®å¤„ç†å¹³å°ï¼Œé‡‡ç”¨**å…­ç»„ä»¶æ ¸å¿ƒæ¶æ„**å’Œ**åŒæ—¶æ•ˆæ¥å£è®¾è®¡**ï¼Œæä¾›å¼ºæ—¶æ•ˆ(å®æ—¶äº¤æ˜“)å’Œå¼±æ—¶æ•ˆ(åˆ†æå†³ç­–)ä¸¤ç§æ•°æ®è®¿é—®æ¨¡å¼ã€‚ç³»ç»Ÿå…·å¤‡æ™ºèƒ½ç¼“å­˜ã€å®¹é”™æœºåˆ¶ã€å®Œæ•´è®¤è¯ä½“ç³»å’Œä¼ä¸šçº§ç›‘æ§èƒ½åŠ›ã€‚

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **ğŸ¯ åŒæ—¶æ•ˆæ¥å£è®¾è®¡** - å¼ºæ—¶æ•ˆ(1ç§’ç¼“å­˜, å®æ—¶äº¤æ˜“) + å¼±æ—¶æ•ˆ(æ™ºèƒ½å˜åŒ–æ£€æµ‹, åˆ†æå†³ç­–)
- **ğŸ§  å…­ç»„ä»¶æ ¸å¿ƒæ¶æ„** - Receiverã€Symbol Mapperã€Data Mapperã€Transformerã€Storageã€Query
- **âš¡ æ™ºèƒ½ç¼“å­˜ç­–ç•¥** - å¸‚åœºçŠ¶æ€æ„ŸçŸ¥çš„åŠ¨æ€TTL (1s-3600s)ï¼Œ37å­—æ®µå˜åŒ–æ£€æµ‹
- **ğŸ” ä¸‰å±‚è®¤è¯ä½“ç³»** - API Key(17æƒé™) + JWT(è§’è‰²ç»§æ‰¿) + åˆ†å¸ƒå¼é™æµ
- **ğŸ“Š èƒ½åŠ›å¯¼å‘æ•°æ®æº** - è‡ªåŠ¨å‘ç°æ³¨å†Œï¼ŒLongPort/LongPort-SGç”Ÿäº§å°±ç»ª
- **ğŸ’¾ åŒå­˜å‚¨ç­–ç•¥** - Redisç¼“å­˜ + MongoDBæŒä¹…åŒ–ï¼Œè‡ªåŠ¨å‹ç¼©ä¸æ•…éšœè½¬ç§»
- **ğŸ›¡ï¸ ä¼ä¸šçº§å®¹é”™** - å…³é”®/éå…³é”®æ“ä½œåˆ†ç¦»ï¼Œä¼˜é›…é™çº§æœºåˆ¶
- **ğŸ“ˆ å…¨é¢æ€§èƒ½ç›‘æ§** - å¥åº·è¯„åˆ†ã€P95/P99å“åº”æ—¶é—´ã€æ•…éšœæ£€æµ‹
- **ğŸ¤– è‡ªåŠ¨åŒ–åˆå§‹åŒ–** - 37é¢„è®¾å­—æ®µã€ç¬¦å·æ˜ å°„ã€é…ç½®é©±åŠ¨çš„å¹‚ç­‰å¯åŠ¨

## ğŸ›ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç¬¬ä¸‰æ–¹åº”ç”¨    â”‚    â”‚   å¼€å‘è€…ç•Œé¢    â”‚    â”‚   ç®¡ç†å‘˜ç•Œé¢    â”‚
â”‚  (API Key)      â”‚    â”‚   (JWT Token)   â”‚    â”‚   (JWT Admin)   â”‚
â”‚  17ä¸ªç»†ç²’åº¦æƒé™  â”‚    â”‚    è§’è‰²ç»§æ‰¿     â”‚    â”‚   å®Œæ•´ç®¡ç†æƒé™   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚                      â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ NestJS Gateway  â”‚
                        â”‚ å…¨å±€ä¸­é—´ä»¶/æ‹¦æˆªå™¨ â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ ä¸‰å±‚è®¤è¯ç³»ç»Ÿ     â”‚
                        â”‚JWT+ApiKey+é™æµ  â”‚
                        â”‚ Redisåˆ†å¸ƒå¼è®¡æ•°  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚          åŒæ—¶æ•ˆæ¥å£è®¾è®¡           â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ğŸš€ å¼ºæ—¶æ•ˆæ¥å£(Receiver)â”‚   â”‚ğŸ§  å¼±æ—¶æ•ˆæ¥å£(Query)â”‚
              â”‚  1ç§’ç¼“å­˜/å®æ—¶äº¤æ˜“   â”‚   â”‚ æ™ºèƒ½æ£€æµ‹/åˆ†æå†³ç­– â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     å…­ç»„ä»¶æ ¸å¿ƒæ¶æ„æµæ°´çº¿        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                            â”‚                            â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Receiverâ”‚ â”‚Symbol  â”‚ â”‚  Data  â”‚ â”‚Transformâ”‚ â”‚Storage â”‚ â”‚Query   â”‚
â”‚æ™ºèƒ½è·¯ç”± â”‚ â”‚Mapper  â”‚ â”‚ Mapper â”‚ â”‚ er     â”‚ â”‚åŒå­˜å‚¨  â”‚ â”‚ç»Ÿä¸€æ£€ç´¢ â”‚
â”‚å¸‚åœºæ„ŸçŸ¥ â”‚ â”‚æ ¼å¼è½¬æ¢ â”‚ â”‚37å­—æ®µ  â”‚ â”‚å®æ—¶è½¬æ¢ â”‚ â”‚ç­–ç•¥    â”‚ â”‚6æŸ¥è¯¢ç±»å‹â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚        â”‚          â”‚          â”‚          â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚          â”‚          â”‚          â”‚
        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
        â”‚          æ™ºèƒ½ç¼“å­˜ä¸å­˜å‚¨ç­–ç•¥              â”‚
        â”‚ Redis(å‹ç¼©+TTL) + MongoDB(æŒä¹…åŒ–+å®¡è®¡) â”‚
        â”‚      å¸‚åœºçŠ¶æ€æ„ŸçŸ¥ç¼“å­˜(1s-3600s)         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…­ç»„ä»¶æ ¸å¿ƒæ¶æ„è¯¦è§£

#### 1. Receiver (å¼ºæ—¶æ•ˆæ•°æ®æ¥æ”¶å™¨) ğŸš€
- **ä½ç½®**: `src/core/receiver/`
- **æ¥å£**: `POST /api/v1/receiver/data` (API Keyè®¤è¯)
- **æ ¸å¿ƒç‰¹æ€§**: 
  - **1ç§’çº§å®æ—¶ç¼“å­˜**: åŸºäºå¸‚åœºçŠ¶æ€çš„åŠ¨æ€TTL (äº¤æ˜“æ—¶æ®µ1sï¼Œç›˜å60sï¼ŒèŠ‚å‡æ—¥300s)
  - **æ™ºèƒ½å¸‚åœºæ¨æ–­**: HK(.HKåç¼€), US(å­—æ¯ç¬¦å·), SZ(00/30å‰ç¼€), SH(60/68å‰ç¼€)
  - **èƒ½åŠ›å¯¼å‘è·¯ç”±**: è‡ªåŠ¨é€‰æ‹©æœ€ä½³æ•°æ®æºæä¾›å•†
  - **éƒ¨åˆ†å¤±è´¥å¤„ç†**: æ”¯æŒéƒ¨åˆ†ç¬¦å·æˆåŠŸåœºæ™¯
- **APIç«¯ç‚¹**: 13ä¸ªç®¡ç†æ¥å£ï¼ŒåŒ…æ‹¬å®æ—¶ç¼“å­˜ç»Ÿè®¡å’Œå¥åº·æ£€æŸ¥

#### 2. Symbol Mapper (ç¬¦å·æ˜ å°„å™¨) ğŸ”„
- **ä½ç½®**: `src/core/symbol-mapper/`
- **æ¥å£**: `POST /api/v1/symbol-mapper/transform` (ä¸»è¦è½¬æ¢æ¥å£)
- **æ ¸å¿ƒç‰¹æ€§**:
  - **æ‰¹é‡è½¬æ¢**: å•æ¬¡æœ€å¤š100ä¸ªç¬¦å·ï¼Œæ€§èƒ½ä¼˜åŒ–
  - **æä¾›å•†ç‰¹å®šæ˜ å°„**: æ¯ä¸ªæ•°æ®æºç‹¬ç«‹æ˜ å°„é…ç½®
  - **MongoDBå­˜å‚¨**: æ˜ å°„è§„åˆ™æŒä¹…åŒ–ï¼Œæ”¯æŒç´¢å¼•ä¼˜åŒ–
  - **æ ¼å¼åˆ†ç¦»**: æ ‡å‡†æ ¼å¼(700.HK) vs éæ ‡å‡†æ ¼å¼(700)è‡ªåŠ¨å¤„ç†
- **APIç«¯ç‚¹**: 13ä¸ªæ¥å£ï¼ŒåŒ…æ‹¬CRUDã€æ‰¹é‡æ“ä½œã€ç»Ÿè®¡åˆ†æ

#### 3. Data Mapper (æ•°æ®æ˜ å°„å™¨) ğŸ—ºï¸
- **ä½ç½®**: `src/core/data-mapper/`
- **æ¥å£**: `POST /api/v1/data-mapper/apply` (æ˜ å°„åº”ç”¨)
- **æ ¸å¿ƒç‰¹æ€§**:
  - **37ä¸ªé¢„è®¾å­—æ®µ**: 22ä¸ªè‚¡ç¥¨æŠ¥ä»·å­—æ®µ + 15ä¸ªåŸºæœ¬ä¿¡æ¯å­—æ®µ
  - **åµŒå¥—è·¯å¾„æ”¯æŒ**: `secu_quote[0].last_done` â†’ `lastPrice` å¤æ‚æ˜ å°„
  - **æ™ºèƒ½å­—æ®µå»ºè®®**: åŸºäºåç§°ç›¸ä¼¼åº¦çš„AIè¾…åŠ©æ˜ å°„
  - **JSONç»“æ„åˆ†æ**: è‡ªåŠ¨è§£æå’Œå­—æ®µå‘ç°åŠŸèƒ½
- **APIç«¯ç‚¹**: 12ä¸ªæ¥å£ï¼Œæ”¯æŒå­—æ®µå»ºè®®ã€JSONè§£æã€å…¬å¼€é¢„è§ˆ

#### 4. Transformer (æ•°æ®è½¬æ¢å™¨) âš¡
- **ä½ç½®**: `src/core/transformer/`
- **æ¥å£**: `POST /api/v1/transformer/transform` (å®æ—¶è½¬æ¢)
- **æ ¸å¿ƒç‰¹æ€§**:
  - **å®æ—¶è½¬æ¢å¼•æ“**: åº”ç”¨DataMapperè§„åˆ™è¿›è¡Œæ•°æ®ç»“æ„è½¬æ¢
  - **æ‰¹é‡å¤„ç†ä¼˜åŒ–**: å¤šæ•°æ®é›†å¹¶è¡Œè½¬æ¢ï¼Œæ€§èƒ½ç›‘æ§
  - **é¢„è§ˆæ¨¡å¼**: å®‰å…¨çš„è½¬æ¢æµ‹è¯•ï¼Œä¸ä¿®æ”¹å®é™…æ•°æ®
  - **æ€§èƒ½æŒ‡æ ‡**: è¯¦ç»†çš„è½¬æ¢æ—¶é—´å’ŒæˆåŠŸç‡ç»Ÿè®¡
- **APIç«¯ç‚¹**: 3ä¸ªæ ¸å¿ƒæ¥å£ï¼Œä¸“æ³¨è½¬æ¢åŠŸèƒ½

#### 5. Storage (æ™ºèƒ½å­˜å‚¨å±‚) ğŸ’¾
- **ä½ç½®**: `src/core/storage/`
- **æ¥å£**: `POST /api/v1/storage/store` (ç®¡ç†å‘˜ä¸“ç”¨)
- **æ ¸å¿ƒç‰¹æ€§**:
  - **åŒå­˜å‚¨ç­–ç•¥**: Redisç¼“å­˜ä¼˜å…ˆ + MongoDBæŒä¹…åŒ–
  - **æ™ºèƒ½æ£€ç´¢**: ç¼“å­˜æœªå‘½ä¸­è‡ªåŠ¨é™çº§åˆ°æ•°æ®åº“
  - **è‡ªåŠ¨å‹ç¼©**: æ•°æ®>1KBè‡ªåŠ¨Gzipå‹ç¼©ï¼Œ70%å‹ç¼©æ¯”é˜ˆå€¼
  - **å¥åº·ç›‘æ§**: å­˜å‚¨ç³»ç»ŸçŠ¶æ€ç›‘æ§å’Œæ•…éšœæ£€æµ‹
- **APIç«¯ç‚¹**: 6ä¸ªæ¥å£ï¼Œæ”¯æŒå­˜å‚¨ã€æ£€ç´¢ã€ç»Ÿè®¡ã€å¥åº·æ£€æŸ¥

#### 6. Query (å¼±æ—¶æ•ˆæŸ¥è¯¢å¼•æ“) ğŸ§   
- **ä½ç½®**: `src/core/query/`
- **æ¥å£**: `POST /api/v1/query/execute` (ä¸»æŸ¥è¯¢æ¥å£)
- **æ ¸å¿ƒç‰¹æ€§**:
  - **æ™ºèƒ½å˜åŒ–æ£€æµ‹**: 37å…³é”®å­—æ®µç›‘æ§ï¼ŒåŸºäºå¸‚åœºçŠ¶æ€çš„é˜ˆå€¼è°ƒæ•´
  - **6ç§æŸ¥è¯¢ç±»å‹**: by_symbols(âœ…å®Œæ•´å®ç°), å…¶ä»–5ç§æ¡†æ¶å°±ç»ª
  - **å¤šå±‚ç¼“å­˜ç­–ç•¥**: å¿«é€Ÿæ ¡éªŒå’Œ + å­—æ®µçº§å˜åŒ–åˆ†æ
  - **å¹¶è¡Œæ‰¹é‡å¤„ç†**: æ”¯æŒå¤§é‡ç¬¦å·çš„å¹¶è¡ŒæŸ¥è¯¢
- **APIç«¯ç‚¹**: 7ä¸ªæ¥å£ï¼ŒåŒ…æ‹¬æ‰¹é‡æŸ¥è¯¢ã€å¿«é€ŸæŸ¥è¯¢ã€æ€§èƒ½ç»Ÿè®¡

### åŒæ—¶æ•ˆæ¥å£è®¾è®¡

ç³»ç»Ÿåˆ›æ–°æ€§åœ°æä¾›ä¸¤ç§è®¿é—®æ¨¡å¼ï¼Œæ»¡è¶³ä¸åŒåº”ç”¨åœºæ™¯ï¼š

#### ğŸš€ å¼ºæ—¶æ•ˆæ¥å£ (å®æ—¶äº¤æ˜“ä¸“ç”¨)
- **å…¥å£**: Receiverç»„ä»¶ (`/api/v1/receiver/data`)
- **ç¼“å­˜ç­–ç•¥**: 1ç§’è¶…çŸ­ç¼“å­˜ï¼Œæ¯«ç§’çº§å“åº”
- **é€‚ç”¨åœºæ™¯**: é«˜é¢‘äº¤æ˜“ã€å®æ—¶ç›‘æ§ã€è¡Œæƒ…è®¢é˜…
- **æ€§èƒ½ç›®æ ‡**: P95 < 100ms, P99 < 200ms

#### ğŸ§  å¼±æ—¶æ•ˆæ¥å£ (åˆ†æå†³ç­–ä¸“ç”¨)  
- **å…¥å£**: Queryç»„ä»¶ (`/api/v1/query/execute`)
- **ç¼“å­˜ç­–ç•¥**: æ™ºèƒ½å˜åŒ–æ£€æµ‹ï¼Œ30s-3600såŠ¨æ€TTL
- **é€‚ç”¨åœºæ™¯**: æ•°æ®åˆ†æã€æŠ•èµ„ç ”ç©¶ã€æŠ¥è¡¨ç”Ÿæˆ
- **æ€§èƒ½ç‰¹ç‚¹**: æ•°æ®ä¸€è‡´æ€§ä¼˜å…ˆï¼Œæ™ºèƒ½ç¼“å­˜ä¼˜åŒ–

## ğŸ” ä¸‰å±‚è®¤è¯ä½“ç³»

### è®¤è¯æ¶æ„å®ç°

ç³»ç»Ÿå®ç°äº†ä¼ä¸šçº§**ä¸‰å±‚è®¤è¯æ¨¡å‹**ï¼Œæ”¯æŒä¸åŒç”¨æˆ·ç±»å‹çš„å®‰å…¨è®¿é—®ï¼š

```
ç¬¬ä¸‰æ–¹åº”ç”¨è®¿é—®å±‚ (API Keyè®¤è¯) ğŸ”‘
â”œâ”€â”€ åŒå¯†é’¥éªŒè¯: X-App-Key + X-Access-Token
â”œâ”€â”€ 17ä¸ªç»†ç²’åº¦æƒé™: DATA_READ, QUERY_EXECUTE, MAPPING_WRITEç­‰
â”œâ”€â”€ Redisåˆ†å¸ƒå¼é™æµ: å›ºå®šçª—å£+æ»‘åŠ¨çª—å£ç®—æ³•
â”œâ”€â”€ æ•…éšœä¿æŠ¤: Redisä¸å¯ç”¨æ—¶fail-openç­–ç•¥
â”œâ”€â”€ ä½¿ç”¨ç»Ÿè®¡: å®æ—¶ç›‘æ§è°ƒç”¨æ¬¡æ•°å’Œæ€§èƒ½æŒ‡æ ‡
â””â”€â”€ é€‚ç”¨åœºæ™¯: å¤–éƒ¨é›†æˆã€è‡ªåŠ¨åŒ–è„šæœ¬ã€ç¬¬ä¸‰æ–¹åº”ç”¨

å¼€å‘è€…è®¿é—®å±‚ (JWT + DEVELOPERè§’è‰²) ğŸ‘¨â€ğŸ’»
â”œâ”€â”€ Bearer Tokenè®¤è¯: Authorization: Bearer <jwt-token>
â”œâ”€â”€ 9ä¸ªå¼€å‘è€…æƒé™: TRANSFORMER_PREVIEW, SYSTEM_MONITORç­‰
â”œâ”€â”€ Tokenç®¡ç†: 24hè®¿é—®ä»¤ç‰Œ + 7dåˆ·æ–°ä»¤ç‰Œ
â”œâ”€â”€ ä¼šè¯å®‰å…¨: bcryptåŠ å¯†(12è½®) + å®æ—¶ç”¨æˆ·çŠ¶æ€éªŒè¯
â””â”€â”€ é€‚ç”¨åœºæ™¯: ç³»ç»Ÿå¼€å‘ã€æ•°æ®é¢„è§ˆã€åŠŸèƒ½æµ‹è¯•

ç®¡ç†å‘˜è®¿é—®å±‚ (JWT + ADMINè§’è‰²) ğŸ‘¨â€ğŸ’¼
â”œâ”€â”€ æƒé™ç»§æ‰¿: è‡ªåŠ¨ç»§æ‰¿æ‰€æœ‰å¼€å‘è€…æƒé™
â”œâ”€â”€ 8ä¸ªç®¡ç†å‘˜ä¸“å±æƒé™: USER_MANAGE, APIKEY_MANAGE, CONFIG_WRITEç­‰
â”œâ”€â”€ å®Œæ•´ç³»ç»Ÿæ§åˆ¶: ç”¨æˆ·ç®¡ç†ã€é…ç½®ä¿®æ”¹ã€å®¡è®¡æŸ¥çœ‹
â””â”€â”€ é€‚ç”¨åœºæ™¯: ç³»ç»Ÿé…ç½®ã€ç”¨æˆ·ç®¡ç†ã€è¿ç»´æ“ä½œ
```

### æƒé™ç³»ç»Ÿè¯¦è§£

#### 17ä¸ªç»†ç²’åº¦æƒé™åˆ†ç±»

**åŸºç¡€æ•°æ®æƒé™ (3ä¸ª)**:
- `DATA_READ` - è‚¡ç¥¨æ•°æ®è¯»å–
- `QUERY_EXECUTE` - æŸ¥è¯¢æ‰§è¡Œ
- `PROVIDERS_READ` - æ•°æ®æºä¿¡æ¯è¯»å–

**å¼€å‘è€…æƒé™ (9ä¸ª)**:
- `TRANSFORMER_PREVIEW` - æ•°æ®è½¬æ¢é¢„è§ˆ
- `SYSTEM_MONITOR` - ç³»ç»Ÿç›‘æ§è®¿é—®
- `SYSTEM_METRICS` - æ€§èƒ½æŒ‡æ ‡æŸ¥çœ‹
- `SYSTEM_HEALTH` - å¥åº·æ£€æŸ¥
- `DEBUG_ACCESS` - è°ƒè¯•åŠŸèƒ½
- `CONFIG_READ` - é…ç½®è¯»å–
- ä»¥ä¸ŠåŸºç¡€æ•°æ®æƒé™

**ç®¡ç†å‘˜æƒé™ (8ä¸ª)**:
- `USER_MANAGE` - ç”¨æˆ·ç®¡ç†
- `APIKEY_MANAGE` - APIå¯†é’¥ç®¡ç†
- `CONFIG_WRITE` - é…ç½®å†™å…¥
- `MAPPING_WRITE` - æ˜ å°„è§„åˆ™å†™å…¥
- `SYSTEM_ADMIN` - ç³»ç»Ÿç®¡ç†
- ä»¥ä¸Šæ‰€æœ‰å¼€å‘è€…æƒé™

### åˆ†å¸ƒå¼é¢‘ç‡é™åˆ¶ç³»ç»Ÿ

#### åŒç®—æ³•ä¿æŠ¤æœºåˆ¶
```typescript
// Redisåˆ†å¸ƒå¼é™æµå®ç°
å›ºå®šçª—å£ç®—æ³•: åŸºç¡€ä¿æŠ¤ (requests/timeWindow)
æ»‘åŠ¨çª—å£ç®—æ³•: ç²¾ç¡®æ§åˆ¶ (é¿å…è¾¹ç•Œçªå‘)
æ•…éšœä¿æŠ¤: Redisä¸å¯ç”¨æ—¶å…è®¸é€šè¿‡ (fail-open)
```

#### é™æµé…ç½®ç¤ºä¾‹
```typescript
// API Keyé™æµé…ç½®
rateLimit: {
  requests: 1000,        // è¯·æ±‚æ•°é‡
  window: "1h",          // æ—¶é—´çª—å£
  burst: 50             // çªå‘å®¹é‡
}
```

#### HTTPå“åº”å¤´
- `X-API-RateLimit-Limit` - é™åˆ¶æ€»é‡
- `X-API-RateLimit-Remaining` - å‰©ä½™è¯·æ±‚æ•°
- `X-API-RateLimit-Reset` - é‡ç½®æ—¶é—´æˆ³
- `X-API-Retry-After` - é™æµæ—¶çš„é‡è¯•å»¶è¿Ÿ

### å®‰å…¨ç‰¹æ€§

#### è®¤è¯å®‰å…¨
- **å¯†ç ç­–ç•¥**: bcryptå“ˆå¸Œ(12è½®ç›å€¼)ï¼Œæœ€å°6å­—ç¬¦
- **Tokenå®‰å…¨**: é…ç½®åŒ–JWTå¯†é’¥ï¼Œå¯é…ç½®è¿‡æœŸæ—¶é—´
- **å®æ—¶éªŒè¯**: æ¯æ¬¡è¯·æ±‚éªŒè¯ç”¨æˆ·/API Keyæ´»è·ƒçŠ¶æ€
- **ä¼šè¯ç®¡ç†**: åˆ·æ–°ä»¤ç‰Œæœºåˆ¶ï¼Œæ”¯æŒå®‰å…¨çš„é•¿æœŸä¼šè¯

#### API Keyå®‰å…¨
- **å”¯ä¸€å‡­è¯**: æ¯ä¸ªAPI KeyåŒ…å«ç‹¬ç‰¹çš„App Key + Access Token
- **æƒé™èŒƒå›´**: ç»†ç²’åº¦æƒé™æ§åˆ¶ï¼Œæœ€å°æƒé™åŸåˆ™
- **ä½¿ç”¨è¿½è¸ª**: è¯¦ç»†çš„ä½¿ç”¨ç»Ÿè®¡å’Œæœ€åä½¿ç”¨æ—¶é—´
- **ç«‹å³æ’¤é”€**: æ”¯æŒAPI Keyçš„å³æ—¶æ’¤é”€åŠŸèƒ½

## ğŸ“Š æ•°æ®æºé›†æˆ

### èƒ½åŠ›å¯¼å‘æ¶æ„å®ç°

ç³»ç»Ÿå®ç°äº†å…ˆè¿›çš„**èƒ½åŠ›å¯¼å‘è®¾è®¡**ï¼Œæ•°æ®æºæŒ‰åŠŸèƒ½èƒ½åŠ›ç»„ç»‡ï¼Œæ”¯æŒè‡ªåŠ¨å‘ç°å’Œæ™ºèƒ½è·¯ç”±ï¼š

#### ç”Ÿäº§å°±ç»ªæ•°æ®æº
```
LongPort Provider ğŸ“ˆ (âœ… ç”Ÿäº§å°±ç»ª)
â”œâ”€â”€ ä½ç½®: src/providers/longport/
â”œâ”€â”€ çŠ¶æ€: çœŸå®SDKé›†æˆï¼Œ3ä¸ªèƒ½åŠ›å®Œæ•´å®ç°
â”œâ”€â”€ æ”¯æŒå¸‚åœº: HK, US, SZ, SH (4ä¸ªä¸»è¦å¸‚åœº)
â”œâ”€â”€ èƒ½åŠ›æ¸…å•:
â”‚   â”œâ”€â”€ get-stock-quote: å®æ—¶è‚¡ç¥¨æŠ¥ä»·
â”‚   â”œâ”€â”€ get-stock-basic-info: è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯  
â”‚   â””â”€â”€ get-index-quote: æŒ‡æ•°æŠ¥ä»·æ•°æ®
â”œâ”€â”€ ä¸Šä¸‹æ–‡æœåŠ¡: LongportContextService (SDKè¿æ¥ç®¡ç†)
â””â”€â”€ ä¼˜å…ˆçº§: 1 (æœ€é«˜ä¼˜å…ˆçº§)

LongPort SG Provider ğŸ‡¸ğŸ‡¬ (âœ… ç”Ÿäº§å°±ç»ª) 
â”œâ”€â”€ ä½ç½®: src/providers/longport-sg/
â”œâ”€â”€ çŠ¶æ€: æ–°åŠ å¡å¸‚åœºä¸“ç”¨ï¼Œç‹¬ç«‹æ¨¡å—
â”œâ”€â”€ æ”¯æŒå¸‚åœº: SG (æ–°åŠ å¡äº¤æ˜“æ‰€)
â”œâ”€â”€ èƒ½åŠ›æ¸…å•: ä¸LongPortç›¸åŒçš„3ä¸ªèƒ½åŠ›
â”œâ”€â”€ ä¸Šä¸‹æ–‡æœåŠ¡: LongPortSgContextService
â””â”€â”€ ä¼˜å…ˆçº§: 1 (æ–°åŠ å¡å¸‚åœºä¼˜å…ˆ)
```

#### æ‰©å±•æ¶æ„è®¾è®¡
```
Provider Framework (ğŸ—ï¸ æ‰©å±•å°±ç»ª)
â”œâ”€â”€ è‡ªåŠ¨å‘ç°: æ–‡ä»¶ç³»ç»Ÿæ‰«ææ³¨å†Œ
â”œâ”€â”€ ç»Ÿä¸€æ¥å£: ICapability + IDataProvider
â”œâ”€â”€ å³æ’å³ç”¨: æ–°å¢providerè‡ªåŠ¨ç”Ÿæ•ˆ
â””â”€â”€ è·¯ç”±ç­–ç•¥: ä¼˜å…ˆçº§+å¸‚åœºå…¼å®¹æ€§è‡ªåŠ¨é€‰æ‹©
```

### è‡ªåŠ¨å‘ç°æœºåˆ¶å®ç°

#### æ–‡ä»¶æ‰«æä¸æ³¨å†Œæµç¨‹
```typescript
// 1. å¯åŠ¨æ—¶è‡ªåŠ¨æ‰«æ
src/providers/{provider-name}/capabilities/{capability-name}.ts

// 2. åŠ¨æ€å¯¼å…¥ä¸éªŒè¯
const capability = await import(capabilityPath);
if (capability && typeof capability.execute === 'function') {
  this.registerCapability(providerName, capability, priority, isEnabled);
}

// 3. èƒ½åŠ›æ³¨å†Œè¡¨æ„å»º
Map<ProviderName, Map<CapabilityName, RegistrationInfo>>
```

#### æ™ºèƒ½è·¯ç”±ç®—æ³•
```typescript
// æä¾›å•†é€‰æ‹©é€»è¾‘
getBestProvider(capabilityName, market) {
  const candidates = this.getEligibleProviders(capabilityName, market);
  return candidates.sort((a, b) => a.priority - b.priority)[0]?.provider;
}

// é€‰æ‹©å› å­:
// 1. èƒ½åŠ›æ”¯æŒ (å¿…é¡»å…·å¤‡è¯·æ±‚çš„èƒ½åŠ›)
// 2. å¸‚åœºå…¼å®¹ (æ”¯æŒç›®æ ‡å¸‚åœº)  
// 3. æä¾›å•†çŠ¶æ€ (å¯ç”¨ä¸”å¯ç”¨)
// 4. ä¼˜å…ˆçº§æ’åº (æ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜)
```

### èƒ½åŠ›æ¥å£æ ‡å‡†åŒ–

#### ICapability æ¥å£å®ç°
```typescript
export interface ICapability {
  name: string;                    // èƒ½åŠ›å”¯ä¸€æ ‡è¯†
  description: string;             // åŠŸèƒ½æè¿°  
  supportedMarkets: string[];      // æ”¯æŒçš„å¸‚åœºåˆ—è¡¨
  supportedSymbolFormats: string[]; // æ”¯æŒçš„ç¬¦å·æ ¼å¼
  rateLimit?: RateLimitConfig;     // å¯é€‰çš„é™æµé…ç½®
  execute(params: CapabilityParams): Promise<any>; // æ ‡å‡†æ‰§è¡Œæ–¹æ³•
}
```

#### æ•°æ®ç±»å‹æ˜ å°„
```typescript
// ç”¨æˆ·å‹å¥½ â†’ å†…éƒ¨èƒ½åŠ›æ˜ å°„
const DATA_TYPE_TO_CAPABILITY_MAP = {
  "stock-quote": "get-stock-quote",
  "stock-basic-info": "get-stock-basic-info",
  "index-quote": "get-index-quote",
  // ä¸ºæœªæ¥èƒ½åŠ›é¢„ç•™ç©ºé—´
};
```

### å¸‚åœºæ™ºèƒ½æ¨æ–­

#### è‡ªåŠ¨å¸‚åœºæ£€æµ‹é€»è¾‘
```typescript
// åŸºäºç¬¦å·æ ¼å¼çš„å¸‚åœºæ¨æ–­
HKå¸‚åœº: .HKåç¼€ æˆ– 5ä½æ•°å­— (å¦‚: 700.HK, 00700)
USå¸‚åœº: 1-5ä½å­—æ¯ (å¦‚: AAPL, TSLA, BRK.A)  
SZå¸‚åœº: .SZåç¼€ æˆ– 00/30å¼€å¤´ (å¦‚: 000001.SZ, 000001)
SHå¸‚åœº: .SHåç¼€ æˆ– 60/68å¼€å¤´ (å¦‚: 600000.SH, 600000)
SGå¸‚åœº: .SGåç¼€ (å¦‚: OCBC.SG)
```

### ä¸Šä¸‹æ–‡æœåŠ¡æ¨¡å¼

#### æä¾›å•†ç‹¬ç«‹æ€§è®¾è®¡
- **èƒ½åŠ›æ— çŠ¶æ€**: èƒ½åŠ›å‡½æ•°æœ¬èº«ä¸ä¾èµ–ä»»ä½•å¤–éƒ¨çŠ¶æ€
- **ä¸Šä¸‹æ–‡æ³¨å…¥**: é€šè¿‡å‚æ•°æ³¨å…¥æä¾›å•†ç‰¹å®šçš„æœåŠ¡
- **è¿æ¥ç®¡ç†**: æ¯ä¸ªæä¾›å•†ç®¡ç†è‡ªå·±çš„SDKè¿æ¥å’Œé…ç½®
- **æ•…éšœéš”ç¦»**: å•ä¸ªæä¾›å•†æ•…éšœä¸å½±å“å…¶ä»–æä¾›å•†

#### æ‰©å±•ç¤ºä¾‹
```typescript
// æ–°å¢æ•°æ®æºçš„æ ‡å‡†æµç¨‹
1. åˆ›å»ºç›®å½•: src/providers/new-provider/
2. å®ç°èƒ½åŠ›: capabilities/get-stock-quote.ts
3. æä¾›å•†ç±»: new-provider.provider.ts  
4. ä¸Šä¸‹æ–‡æœåŠ¡: new-provider-context.service.ts
5. æ¨¡å—å®šä¹‰: new-provider.module.ts
// ç³»ç»Ÿè‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 
```

## ğŸª æ™ºèƒ½ç¼“å­˜ä¸å­˜å‚¨ç­–ç•¥

### å¸‚åœºçŠ¶æ€æ„ŸçŸ¥ç¼“å­˜ç³»ç»Ÿ

ç³»ç»Ÿå®ç°äº†**å¸‚åœºçŠ¶æ€æ„ŸçŸ¥çš„æ™ºèƒ½ç¼“å­˜ç­–ç•¥**ï¼Œæ ¹æ®äº¤æ˜“æ—¶é—´åŠ¨æ€è°ƒæ•´ç¼“å­˜è¡Œä¸ºï¼š

#### åŠ¨æ€TTLç­–ç•¥
```typescript
// åŸºäºå¸‚åœºçŠ¶æ€çš„ç¼“å­˜TTL
TRADING:   { realtime: 1s,   analytical: 30s }     // äº¤æ˜“æ—¶æ®µ
EXTENDED:  { realtime: 5s,   analytical: 120s }    // ç›˜å‰ç›˜å  
CLOSED:    { realtime: 60s,  analytical: 3600s }   // ä¼‘å¸‚æ—¶æ®µ
HOLIDAY:   { realtime: 300s, analytical: 7200s }   // èŠ‚å‡æ—¥
```

#### æ™ºèƒ½å˜åŒ–æ£€æµ‹ç®—æ³•
```typescript
// 37å­—æ®µä¼˜å…ˆçº§ç›‘æ§
PRICE_FIELDS:  ['lastPrice', 'bid', 'ask']        // ç«‹å³è§¦å‘æ›´æ–°
CHANGE_FIELDS: ['change', 'changePercent']         // é‡è¦å˜åŒ–
VOLUME_FIELDS: ['volume', 'turnover']              // äº¤æ˜“æ´»è·ƒåº¦  
OHLC_FIELDS:   ['high', 'low', 'open']            // OHLCæ•°æ®

// å¸‚åœºæ•æ„Ÿé˜ˆå€¼
äº¤æ˜“æ—¶æ®µ: ä»»ä½•å˜åŒ–éƒ½è§¦å‘æ›´æ–°
ç›˜åæ—¶æ®µ: ä»·æ ¼å˜åŒ–>1%, æˆäº¤é‡å˜åŒ–>10%  
ä¼‘å¸‚æ—¶æ®µ: ä»·æ ¼å˜åŒ–>5%, æˆäº¤é‡å˜åŒ–>50%
```

### Redis ç¼“å­˜å±‚å®ç°

#### é«˜æ€§èƒ½ç‰¹æ€§
- **æ™ºèƒ½å‹ç¼©**: æ•°æ®>1KBè‡ªåŠ¨Gzipå‹ç¼©ï¼Œè¦æ±‚70%å‹ç¼©æ¯”
- **åˆ†å¸ƒå¼é”**: é˜²æ­¢ç¼“å­˜å‡»ç©¿ï¼ŒTTL-basedé”æœºåˆ¶
- **æ€§èƒ½ç›‘æ§**: è·Ÿè¸ªå‘½ä¸­ç‡ã€å“åº”æ—¶é—´(>100ms=æ…¢æŸ¥è¯¢)
- **æ•…éšœå®¹é”™**: Redisä¸å¯ç”¨æ—¶ä¼˜é›…é™çº§åˆ°MongoDB

#### å‹ç¼©ç­–ç•¥å®ç°
```typescript
// è‡ªåŠ¨å‹ç¼©é€»è¾‘
if (dataSize > 1024) {
  const compressed = gzip(data);
  if (compressed.length / dataSize < 0.7) {  // 70%å‹ç¼©æ¯”
    store('COMPRESSED::' + base64(compressed));
  } else {
    store(data);  // å‹ç¼©æ•ˆæœä¸å¥½ï¼Œå­˜åŸå§‹æ•°æ®
  }
}
```

#### ç¼“å­˜é”®ç­–ç•¥
```typescript
// å¼ºæ—¶æ•ˆæ¥å£ (Receiver)
receiver:realtime:{provider}:{dataType}:{symbols}:{options}

// å¼±æ—¶æ•ˆæ¥å£ (Query)  
query:analytical:{symbol}:{provider}:{dataType}

// æ€§èƒ½ç›‘æ§æ•°æ®
metrics:performance:{component}:{timeWindow}
```

### MongoDB æŒä¹…åŒ–å±‚å®ç°

#### åŒé‡ç”¨é€”è®¾è®¡
1. **ç¼“å­˜é™çº§**: Redisä¸å¯ç”¨æ—¶çš„å¤‡ç”¨å­˜å‚¨
2. **æŒä¹…åŒ–å­˜å‚¨**: é•¿æœŸæ•°æ®ä¿å­˜å’Œå†å²åˆ†æ
3. **å®¡è®¡è¿½è¸ª**: å®Œæ•´çš„è¯·æ±‚å“åº”æ—¥å¿—
4. **å…ƒæ•°æ®ç®¡ç†**: ç¼“å­˜å…ƒæ•°æ®å’Œé…ç½®ä¿¡æ¯

#### å­˜å‚¨æ¨¡å¼
```typescript
// æ•°æ®å­˜å‚¨ç»“æ„
{
  key: string,           // ç¼“å­˜é”®
  data: any,            // å®é™…æ•°æ® (å¯èƒ½è¢«å‹ç¼©)
  provider: string,     // æ•°æ®æä¾›å•†
  market: string,       // ç›®æ ‡å¸‚åœº
  dataType: string,     // æ•°æ®ç±»å‹
  compressed: boolean,   // æ˜¯å¦å‹ç¼©
  expiresAt: Date,      // è¿‡æœŸæ—¶é—´ (å¯é€‰)
  createdAt: Date,      // åˆ›å»ºæ—¶é—´
  updatedAt: Date       // æ›´æ–°æ—¶é—´
}
```

#### ç´¢å¼•ä¼˜åŒ–
- **å¤åˆç´¢å¼•**: `{key: 1, expiresAt: 1}` - å¿«é€ŸæŸ¥æ‰¾å’ŒTTLæ¸…ç†
- **å¸‚åœºç´¢å¼•**: `{market: 1, dataType: 1}` - å¸‚åœºæ•°æ®æŸ¥è¯¢
- **æ—¶é—´ç´¢å¼•**: `{createdAt: 1}` - å†å²æ•°æ®åˆ†æ

### æ™ºèƒ½å­˜å‚¨ç­–ç•¥

#### è¯»å–ç­–ç•¥ (ä¸‰å±‚é™çº§)
```typescript
1. Redisç¼“å­˜æŸ¥æ‰¾ (æœ€å¿« ~1ms)
   â”œâ”€â”€ å‘½ä¸­: ç›´æ¥è¿”å›æ•°æ®
   â””â”€â”€ æœªå‘½ä¸­: é™çº§åˆ°æ­¥éª¤2

2. MongoDBå¤‡ç”¨æŸ¥æ‰¾ (~10-50ms)
   â”œâ”€â”€ å‘½ä¸­: å†™å›Redis + è¿”å›æ•°æ®
   â””â”€â”€ æœªå‘½ä¸­: é™çº§åˆ°æ­¥éª¤3

3. å®æ—¶æ•°æ®æºè·å– (~100-500ms)
   â”œâ”€â”€ æˆåŠŸ: åŒå†™å­˜å‚¨ + è¿”å›æ•°æ®
   â””â”€â”€ å¤±è´¥: è¿”å›é”™è¯¯æˆ–ä½¿ç”¨å†å²æ•°æ®
```

#### å†™å…¥ç­–ç•¥ (åŒå†™ç¡®ä¿)
```typescript
// åŒæ­¥åŒå†™ç­–ç•¥
async store(key, data, ttl) {
  const promises = [];
  
  // Rediså¿«é€Ÿå†™å…¥ (æ€§èƒ½ä¼˜å…ˆ)
  promises.push(redis.setex(key, ttl, data));
  
  // MongoDBæŒä¹…åŒ– (å¯é æ€§ä¼˜å…ˆ)  
  promises.push(mongodb.upsert({key, data, expiresAt}));
  
  // å¹¶è¡Œæ‰§è¡Œï¼Œä»»ä¸€æˆåŠŸå³å¯
  await Promise.allSettled(promises);
}
```

### æ•…éšœå®¹é”™æœºåˆ¶

#### Rediså®¹é”™è®¾è®¡
```typescript
// å…³é”®ä¸šåŠ¡æ“ä½œ (fail-fast)
async get(key): Promise<T> {
  try {
    return await this.redis.get(key);
  } catch (error) {
    throw new ServiceUnavailableException();
  }
}

// éå…³é”®æ“ä½œ (ä¼˜é›…é™çº§)
async hashGetAll(key): Promise<Record<string, string>> {
  try {
    return await this.redis.hgetall(key);
  } catch (error) {
    this.logger.warn('Redisæ“ä½œå¤±è´¥ï¼Œè¿”å›ç©ºæ•°æ®', {error});
    return {}; // è¿”å›é»˜è®¤å€¼è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸
  }
}
```

#### æ€§èƒ½ç›‘æ§å®¹é”™
- **éå…³é”®åŠŸèƒ½**: æ€§èƒ½ç›‘æ§ç³»ç»Ÿæ•…éšœä¸å½±å“ä¸šåŠ¡æ“ä½œ
- **ä¼˜é›…é™çº§**: ç›‘æ§æ•°æ®æ”¶é›†å¤±è´¥æ—¶è¿”å›ç©ºæ•°ç»„
- **è‡ªåŠ¨æ¢å¤**: 30ç§’å¥åº·æ£€æŸ¥ï¼Œè‡ªåŠ¨æ£€æµ‹Redisæ¢å¤çŠ¶æ€

### ç¼“å­˜ä¼˜åŒ–ç­–ç•¥

#### é¢„çƒ­æœºåˆ¶
```typescript
// ç³»ç»Ÿå¯åŠ¨æ—¶é¢„çƒ­çƒ­ç‚¹æ•°æ®
1. ä¸»è¦å¸‚åœºæŒ‡æ•°æ•°æ® (HSI, SPX, SZSE)
2. çƒ­é—¨è‚¡ç¥¨æ•°æ® (æˆäº¤é‡å‰100)
3. é¢„è®¾å­—æ®µæ˜ å°„è§„åˆ™
4. é¢‘ç¹è®¿é—®çš„ç¬¦å·æ˜ å°„
```

#### æ¸…ç†ç­–ç•¥
```typescript
// å¤šå±‚æ¸…ç†æœºåˆ¶
1. Redis TTL: è‡ªåŠ¨è¿‡æœŸæ¸…ç†
2. LRUç­–ç•¥: å†…å­˜ä¸è¶³æ—¶æœ€å°‘ä½¿ç”¨ä¼˜å…ˆæ¸…ç†  
3. MongoDB TTLç´¢å¼•: è‡ªåŠ¨æ¸…ç†è¿‡æœŸæŒä¹…åŒ–æ•°æ®
4. æ‰‹åŠ¨æ¸…ç†: ç®¡ç†å‘˜å¯æ‰‹åŠ¨æ¸…ç†ç‰¹å®šæ•°æ®
```

## ğŸ§© å…±äº«ç»„ä»¶æ¶æ„

### å¤šå±‚å…±äº«ç»„ä»¶è®¾è®¡

ç³»ç»Ÿé‡‡ç”¨**å¤šå±‚å…±äº«ç»„ä»¶æ¶æ„**ï¼Œåˆ†ä¸ºçº¯é™æ€ç»„ä»¶å’Œæ ¸å¿ƒå…±äº«æœåŠ¡ï¼š

#### Commoné™æ€ç»„ä»¶ (`src/common/`)
```
src/common/               # çº¯é™æ€å·¥å…·é›†åˆ (é›¶ä¾èµ–)
â”œâ”€â”€ config/               # ğŸ”§ é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ logger.config.ts  # æ—¥å¿—é…ç½®ï¼Œæ•æ„Ÿæ•°æ®è„±æ•
â”‚   â”œâ”€â”€ auto-init.config.ts # è‡ªåŠ¨åˆå§‹åŒ–é…ç½®
â”‚   â””â”€â”€ security.config.ts # å®‰å…¨é…ç½®å¸¸é‡
â”œâ”€â”€ constants/            # ğŸ“Š ç³»ç»Ÿå¸¸é‡
â”‚   â”œâ”€â”€ market.constants.ts # å¸‚åœºå¸¸é‡ (5ä¸ªå¸‚åœºæšä¸¾)
â”‚   â”œâ”€â”€ error-messages.constants.ts # æ ‡å‡†é”™è¯¯æ¶ˆæ¯
â”‚   â””â”€â”€ rate-limit.constants.ts # é™æµé…ç½®å¸¸é‡
â”œâ”€â”€ decorators/           # ğŸ·ï¸ è£…é¥°å™¨
â”‚   â”œâ”€â”€ swagger-responses.decorator.ts # Swaggerå“åº”æ ‡å‡†åŒ–
â”‚   â””â”€â”€ performance-monitoring.decorator.ts # æ€§èƒ½ç›‘æ§è£…é¥°å™¨
â”œâ”€â”€ dto/                  # ğŸ“‹ é€šç”¨DTO
â”‚   â””â”€â”€ common-response.dto.ts # ç»Ÿä¸€å“åº”æ ¼å¼
â”œâ”€â”€ filters/              # ğŸ›¡ï¸ å…¨å±€è¿‡æ»¤å™¨
â”‚   â””â”€â”€ global-exception.filter.ts # å¼‚å¸¸å¤„ç†+ä¸­æ–‡é”™è¯¯
â”œâ”€â”€ interceptors/         # ğŸ”„ å…¨å±€æ‹¦æˆªå™¨
â”‚   â”œâ”€â”€ response.interceptor.ts # å“åº”æ ¼å¼åŒ– (å…³é”®ç»„ä»¶)
â”‚   â””â”€â”€ request-tracking.interceptor.ts # è¯·æ±‚è¿½è¸ª
â””â”€â”€ utils/                # ğŸ› ï¸ å·¥å…·å‡½æ•°
    â”œâ”€â”€ http-headers.util.ts # HTTPå¤´å¤„ç†
    â””â”€â”€ url-security-validator.util.ts # URLå®‰å…¨éªŒè¯
```

#### Coreå…±äº«æœåŠ¡ (`src/core/shared/`)
```
src/core/shared/          # æ ¸å¿ƒå…±äº«æœåŠ¡ (æœ‰ä¾èµ–)
â”œâ”€â”€ services/             # æ ¸å¿ƒæœåŠ¡
â”‚   â”œâ”€â”€ data-change-detector.service.ts # 37å­—æ®µå˜åŒ–æ£€æµ‹
â”‚   â”œâ”€â”€ data-fetching.service.ts # ç»Ÿä¸€æ•°æ®è·å– (è§£å†³å¾ªç¯ä¾èµ–)
â”‚   â””â”€â”€ market-status.service.ts # å¸‚åœºçŠ¶æ€å’Œäº¤æ˜“æ—¶é—´
â”œâ”€â”€ utils/                # ä¸šåŠ¡å·¥å…·
â”‚   â”œâ”€â”€ object.util.ts    # å¯¹è±¡å¤„ç†å·¥å…·
â”‚   â””â”€â”€ string.util.ts    # å­—ç¬¦ä¸²å¤„ç†å·¥å…·
â””â”€â”€ shared-services.module.ts # å…±äº«æœåŠ¡æ¨¡å—
```

### è®¾è®¡åŸåˆ™ä¸ä¼˜åŠ¿

#### 1. çº¯é™æ€ç»„ä»¶è®¾è®¡ (Common)
- **é›¶ä¾èµ–æ³¨å…¥**: ä¸ä¾èµ–ä»»ä½•NestJSæœåŠ¡ï¼Œå¯ç‹¬ç«‹ä½¿ç”¨
- **è·¨æ¨¡å—å¤ç”¨**: æ‰€æœ‰æ¨¡å—éƒ½å¯å®‰å…¨å¼•ç”¨
- **ç±»å‹å®‰å…¨**: å®Œæ•´TypeScriptç±»å‹å®šä¹‰
- **æ ‡å‡†åŒ–**: ç¡®ä¿ç³»ç»Ÿä¸€è‡´æ€§

#### 2. æ ¸å¿ƒå…±äº«æœåŠ¡è®¾è®¡ (Core/Shared)
- **è§£å†³å¾ªç¯ä¾èµ–**: DataFetchingServiceç»Ÿä¸€Providerè°ƒç”¨
- **ä¸šåŠ¡é€»è¾‘å¤ç”¨**: å˜åŒ–æ£€æµ‹ã€å¸‚åœºçŠ¶æ€ç­‰æ ¸å¿ƒç®—æ³•
- **æ€§èƒ½ä¼˜åŒ–**: é¿å…é‡å¤å®ç°ç›¸ä¼¼åŠŸèƒ½

### å…³é”®ç»„ä»¶å®ç°

#### ğŸ”„ ResponseInterceptor (å…³é”®ç»„ä»¶)
```typescript
// å…¨å±€å“åº”æ ¼å¼åŒ–ï¼Œç¡®ä¿APIä¸€è‡´æ€§
export class ResponseInterceptor {
  intercept(context, next) {
    return next.handle().pipe(
      map(data => ({
        statusCode: response.statusCode,
        message: 'æ“ä½œæˆåŠŸ',
        data,
        timestamp: new Date().toISOString(),
        requestId: request.headers['x-request-id']
      }))
    );
  }
}
```

#### ğŸ§  DataChangeDetectorService (æ ¸å¿ƒç®—æ³•)
```typescript
// 37å­—æ®µæ™ºèƒ½å˜åŒ–æ£€æµ‹
export class DataChangeDetectorService {
  detectChanges(newData, oldData, market, marketStatus) {
    // 1. å¿«é€Ÿæ ¡éªŒå’Œæ£€æµ‹ (10x faster than hash)
    if (this.quickChecksum(newData) === this.quickChecksum(oldData)) {
      return { hasChanges: false, reason: 'no_change' };
    }
    
    // 2. ä¼˜å…ˆçº§å­—æ®µæ£€æµ‹ (çŸ­è·¯ä¼˜åŒ–)
    for (const field of PRICE_FIELDS) {
      if (this.hasFieldChanged(newData, oldData, field)) {
        return { hasChanges: true, reason: 'price_change', field };
      }
    }
    
    // 3. å¸‚åœºæ•æ„Ÿé˜ˆå€¼æ£€æµ‹
    return this.detectThresholdBasedChanges(newData, oldData, market, marketStatus);
  }
}
```

#### ğŸ•’ MarketStatusService (äº¤æ˜“æ—¶é—´ç®¡ç†)
```typescript
// å¸‚åœºçŠ¶æ€æ„ŸçŸ¥å’ŒTTLè®¡ç®—
export class MarketStatusService {
  getCurrentStatus(market: string): MarketStatus {
    const now = new Date();
    const marketHours = MARKET_TRADING_HOURS[market];
    
    if (this.isHoliday(market, now)) return MarketStatus.HOLIDAY;
    if (this.isTradingHours(marketHours, now)) return MarketStatus.TRADING;
    if (this.isExtendedHours(marketHours, now)) return MarketStatus.EXTENDED;
    return MarketStatus.CLOSED;
  }
  
  calculateCacheTTL(marketStatus: MarketStatus, interfaceType: 'realtime' | 'analytical'): number {
    return CACHE_TTL_CONFIG[marketStatus][interfaceType];
  }
}
```

### æ¶æ„ä¼˜åŠ¿

#### 1. å¾ªç¯ä¾èµ–è§£å†³æ–¹æ¡ˆ
```typescript
// é—®é¢˜: Receiver â†â†’ Query å¾ªç¯ä¾èµ–
// è§£å†³: DataFetchingService ç»Ÿä¸€æ•°æ®è·å–
export class DataFetchingService {
  async fetchData(params: DataFetchParams): Promise<any> {
    const provider = this.capabilityRegistry.getBestProvider(params.capability, params.market);
    return await this.capabilityRegistry.executeCapability(provider, params.capability, params);
  }
}
```

#### 2. å“åº”æ ¼å¼ç»Ÿä¸€æ€§
- **è‡ªåŠ¨åŒ…è£…**: æ‰€æœ‰APIè‡ªåŠ¨åº”ç”¨ç»Ÿä¸€å“åº”æ ¼å¼
- **ä¸­æ–‡æ¶ˆæ¯**: å…¨ç³»ç»Ÿç»Ÿä¸€ä¸­æ–‡é”™è¯¯å’ŒæˆåŠŸæ¶ˆæ¯
- **è¿½è¸ªæ”¯æŒ**: è‡ªåŠ¨æ·»åŠ requestIdå’Œtimestamp

#### 3. æ€§èƒ½ç›‘æ§é›†æˆ
```typescript
// æ€§èƒ½ç›‘æ§è£…é¥°å™¨ï¼Œè‡ªåŠ¨ç›‘æ§æ–¹æ³•æ‰§è¡Œ
@PerformanceMonitoring('core', 'data-processing')
async processData() {
  // è‡ªåŠ¨è®°å½•æ‰§è¡Œæ—¶é—´ã€é”™è¯¯ç‡ã€èµ„æºä½¿ç”¨
}
```

#### 4. å®‰å…¨ç­–ç•¥é›†æˆ
- **è¾“å…¥éªŒè¯**: class-validatorè‡ªåŠ¨éªŒè¯
- **å¤´éƒ¨å®‰å…¨**: SecurityMiddlewareå…¨å±€ä¿æŠ¤
- **URLéªŒè¯**: é˜²æ­¢æ¶æ„URLè®¿é—®

## ğŸ›¡ï¸ å®¹é”™ä¸å®‰å…¨æ¡†æ¶

### ä¼ä¸šçº§å®¹é”™è®¾è®¡

ç³»ç»Ÿå®ç°äº†**å…³é”®/éå…³é”®æ“ä½œåˆ†ç¦»**çš„å®¹é”™æ¶æ„ï¼š

#### å…³é”®ä¸šåŠ¡æ“ä½œ (Fail-Fast)
```typescript
// æ•°æ®è·å–ã€ç”¨æˆ·è®¤è¯ç­‰å…³é”®æ“ä½œ
async criticalOperation() {
  try {
    return await this.performOperation();
  } catch (error) {
    throw new ServiceUnavailableException('å…³é”®æœåŠ¡ä¸å¯ç”¨');
  }
}
```

#### éå…³é”®æ“ä½œ (ä¼˜é›…é™çº§)
```typescript
// æ€§èƒ½ç›‘æ§ã€æ—¥å¿—è®°å½•ç­‰è¾…åŠ©æ“ä½œ
async nonCriticalOperation() {
  try {
    return await this.performOperation();
  } catch (error) {
    this.logger.warn('éå…³é”®æ“ä½œå¤±è´¥ï¼Œç³»ç»Ÿç»§ç»­è¿è¡Œ', { error });
    return defaultValue; // è¿”å›é»˜è®¤å€¼ï¼Œä¸ä¸­æ–­ä¸šåŠ¡
  }
}
```

### å¤šå±‚å®‰å…¨é˜²æŠ¤æ¶æ„

#### åº”ç”¨å±‚å®‰å…¨
- **è¾“å…¥éªŒè¯**: class-validatorå…¨ç®¡é“éªŒè¯ï¼Œé˜²æ­¢æ³¨å…¥æ”»å‡»
- **è¯·æ±‚é™åˆ¶**: 10MBè¯·æ±‚ä½“é™åˆ¶ï¼Œé˜²æ­¢DoSæ”»å‡»
- **å“åº”è¿‡æ»¤**: æ•æ„Ÿä¿¡æ¯è‡ªåŠ¨è„±æ• (sanitizeLogData)
- **CORSé…ç½®**: ç»†ç²’åº¦è·¨åŸŸæ§åˆ¶ï¼Œæ”¯æŒé¢„æ£€ç¼“å­˜

#### è®¤è¯å±‚å®‰å…¨
- **ä¸‰å±‚è®¤è¯**: API Key + JWT + è§’è‰²æƒé™
- **å¯†ç ç­–ç•¥**: bcrypt 12è½®åŠ å¯† + ç›å€¼
- **ä¼šè¯ç®¡ç†**: JWT + åˆ·æ–°ä»¤ç‰Œæœºåˆ¶
- **å®æ—¶éªŒè¯**: æ¯æ¬¡è¯·æ±‚éªŒè¯ç”¨æˆ·/API KeyçŠ¶æ€

#### ç½‘ç»œå±‚å®‰å…¨
- **åˆ†å¸ƒå¼é™æµ**: Redisæ»‘åŠ¨çª—å£ç®—æ³•
- **å®‰å…¨ä¸­é—´ä»¶**: SecurityMiddlewareå…¨å±€ä¿æŠ¤
- **è¯·æ±‚å¤´éªŒè¯**: æ ‡å‡†HTTPå®‰å…¨å¤´æ£€æŸ¥
- **URLå®‰å…¨éªŒè¯**: é˜²æ­¢æ¶æ„URLè®¿é—®

#### æ•°æ®å±‚å®‰å…¨
- **åŠ å¯†å­˜å‚¨**: API Keyå“ˆå¸Œå­˜å‚¨ï¼Œä¸å¯é€†
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„æ“ä½œè®°å½•å’Œè¿½è¸ª
- **æ•°æ®è„±æ•**: æ—¥å¿—ä¸­è‡ªåŠ¨ç§»é™¤æ•æ„Ÿä¿¡æ¯
- **è¿æ¥å®‰å…¨**: MongoDB/Redisè¿æ¥æ± å®‰å…¨é…ç½®

### å®‰å…¨å®¡è®¡ç³»ç»Ÿå®ç°

#### SecurityAuditService
```typescript
// å®‰å…¨äº‹ä»¶è‡ªåŠ¨è®°å½•
interface SecurityEvent {
  eventType: 'login_attempt' | 'api_access' | 'permission_check' | 'rate_limit_exceeded';
  userId?: string;
  apiKeyId?: string;
  ipAddress: string;
  userAgent: string;
  success: boolean;
  metadata: Record<string, any>;
  timestamp: Date;
}
```

#### å¨èƒæ£€æµ‹æœºåˆ¶
- **å¼‚å¸¸ç™»å½•**: åœ°ç†ä½ç½®ã€æ—¶é—´æ¨¡å¼å¼‚å¸¸æ£€æµ‹
- **APIæ»¥ç”¨**: é«˜é¢‘é”™è¯¯è¯·æ±‚ã€å¼‚å¸¸è®¿é—®æ¨¡å¼
- **æƒé™å¼‚å¸¸**: æƒé™å‡çº§å°è¯•ã€éæ³•è®¿é—®æ£€æµ‹
- **ç³»ç»Ÿå¼‚å¸¸**: æœåŠ¡æ•…éšœã€æ€§èƒ½å¼‚å¸¸å…³è”åˆ†æ

## ğŸ“ˆ ä¼ä¸šçº§ç›‘æ§ä¸æ€§èƒ½ä¼˜åŒ–

### å…¨æ–¹ä½æ€§èƒ½ç›‘æ§æ¶æ„

#### ç³»ç»Ÿå¥åº·è¯„åˆ†ç®—æ³•
```typescript
// 100åˆ†åˆ¶å¥åº·è¯„åˆ†ç³»ç»Ÿ
calculateHealthScore(): number {
  let score = 100;
  score -= (errorRate * 10);           // é”™è¯¯ç‡å½±å“ (0-10åˆ†)
  score -= responseTimePenalty;        // å“åº”æ—¶é—´å½±å“ (0-15åˆ†)
  score -= cpuUsagePenalty;           // CPUä½¿ç”¨ç‡å½±å“ (0-10åˆ†)
  score -= memoryUsagePenalty;        // å†…å­˜ä½¿ç”¨ç‡å½±å“ (0-10åˆ†)
  score -= dbPerformancePenalty;      // æ•°æ®åº“æ€§èƒ½å½±å“ (0-15åˆ†)
  return Math.max(0, Math.min(100, score));
}
```

#### æ€§èƒ½æŒ‡æ ‡ç›‘æ§
```typescript
// å¤šç»´åº¦æ€§èƒ½ç›‘æ§
æ€§èƒ½æŒ‡æ ‡æ”¶é›†:
â”œâ”€â”€ APIæ€§èƒ½: P95/P99å“åº”æ—¶é—´ï¼Œé”™è¯¯ç‡ï¼Œååé‡
â”œâ”€â”€ æ•°æ®åº“æ€§èƒ½: æŸ¥è¯¢æ—¶é—´ï¼Œè¿æ¥æ± çŠ¶æ€ï¼Œæ…¢æŸ¥è¯¢
â”œâ”€â”€ Redisæ€§èƒ½: å‘½ä¸­ç‡ï¼Œå†…å­˜ä½¿ç”¨ï¼Œæ“ä½œè€—æ—¶
â”œâ”€â”€ ç³»ç»Ÿèµ„æº: CPUï¼Œå†…å­˜ï¼Œç£ç›˜ï¼Œç½‘ç»œI/O
â”œâ”€â”€ ä¸šåŠ¡æŒ‡æ ‡: ç¼“å­˜å‘½ä¸­ç‡ï¼Œæ•°æ®å˜åŒ–é¢‘ç‡
â””â”€â”€ ç”¨æˆ·è¡Œä¸º: APIè°ƒç”¨åˆ†å¸ƒï¼Œé”™è¯¯æ¨¡å¼
```

#### æ•…éšœå®¹é”™ç›‘æ§ç³»ç»Ÿ
```typescript
// MetricsHealthService - ç›‘æ§ç³»ç»Ÿè‡ªèº«å¥åº·
export class MetricsHealthService {
  // 30ç§’é—´éš”å¥åº·æ£€æŸ¥
  async performHealthCheck(): Promise<HealthStatus> {
    try {
      await this.redis.ping();
      this.consecutiveFailures = 0;
      return { status: 'healthy', degraded: false };
    } catch (error) {
      this.consecutiveFailures++;
      if (this.consecutiveFailures >= 3) {
        return { status: 'unhealthy', degraded: true, reason: 'redis_unavailable' };
      }
      return { status: 'degraded', degraded: true };
    }
  }
}
```

### æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ

#### è§„åˆ™å¼•æ“ (6ä¸ªé»˜è®¤è§„åˆ™)
```typescript
const DEFAULT_ALERT_RULES = [
  { name: 'high_error_rate', threshold: 5, window: '5m' },
  { name: 'slow_response', threshold: 2000, window: '5m' },
  { name: 'high_cpu_usage', threshold: 80, window: '10m' },
  { name: 'low_cache_hit_rate', threshold: 70, window: '15m' },
  { name: 'database_connection_high', threshold: 80, window: '5m' },
  { name: 'redis_memory_high', threshold: 85, window: '10m' }
];
```

#### å¤šé€šé“é€šçŸ¥ç³»ç»Ÿ
```typescript
// é€šçŸ¥æ¸ é“æ”¯æŒ
â”œâ”€â”€ é‚®ä»¶é€šçŸ¥: SMTPé…ç½®ï¼ŒHTMLæ¨¡æ¿
â”œâ”€â”€ é’‰é’‰é€šçŸ¥: Webhooké›†æˆï¼Œå¡ç‰‡æ¶ˆæ¯
â”œâ”€â”€ Slacké€šçŸ¥: Boté›†æˆï¼Œé¢‘é“æ¨é€
â”œâ”€â”€ çŸ­ä¿¡é€šçŸ¥: é˜¿é‡Œäº‘SMSé›†æˆ
â”œâ”€â”€ Webhooké€šçŸ¥: è‡ªå®šä¹‰HTTPå›è°ƒ
â””â”€â”€ æ—¥å¿—é€šçŸ¥: ç»“æ„åŒ–æ—¥å¿—è®°å½•
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®å¼•æ“

#### è‡ªåŠ¨ä¼˜åŒ–å»ºè®®
```typescript
// åŸºäºç›‘æ§æ•°æ®çš„è‡ªåŠ¨ä¼˜åŒ–å»ºè®®
generateOptimizationSuggestions(): Suggestion[] {
  const suggestions = [];
  
  if (cacheHitRate < 70) {
    suggestions.push({
      type: 'cache_optimization',
      message: 'ç¼“å­˜å‘½ä¸­ç‡è¿‡ä½ï¼Œå»ºè®®å¢åŠ ç¼“å­˜TTLæˆ–é¢„çƒ­ç­–ç•¥',
      priority: 'high'
    });
  }
  
  if (avgResponseTime > 500) {
    suggestions.push({
      type: 'performance_optimization',
      message: 'å“åº”æ—¶é—´è¿‡é•¿ï¼Œå»ºè®®æ£€æŸ¥æ•°æ®åº“æŸ¥è¯¢æˆ–å¢åŠ ç¼“å­˜',
      priority: 'medium'
    });
  }
  
  return suggestions;
}
```

## ğŸš€ è‡ªåŠ¨åŒ–ç³»ç»Ÿ

### è‡ªåŠ¨åˆå§‹åŒ–ç³»ç»Ÿå®ç°

#### é…ç½®é©±åŠ¨çš„å¹‚ç­‰å¯åŠ¨
```typescript
// ç¯å¢ƒå˜é‡é©±åŠ¨çš„åˆå§‹åŒ–é…ç½®
AUTO_INIT_ENABLED=true              # å¯ç”¨è‡ªåŠ¨åˆå§‹åŒ–
AUTO_INIT_SKIP_EXISTING=true        # è·³è¿‡å·²å­˜åœ¨æ•°æ®
AUTO_INIT_STOCK_QUOTE_FIELDS=true   # åˆå§‹åŒ–22ä¸ªè‚¡ç¥¨æŠ¥ä»·å­—æ®µ
AUTO_INIT_BASIC_INFO_FIELDS=true    # åˆå§‹åŒ–15ä¸ªåŸºæœ¬ä¿¡æ¯å­—æ®µ
AUTO_INIT_SYMBOL_MAPPINGS=true      # åˆå§‹åŒ–ç¬¦å·æ˜ å°„è§„åˆ™
```

#### é¢„è®¾æ•°æ®è‡ªåŠ¨åˆ›å»º
```typescript
// è‡ªåŠ¨åˆå§‹åŒ–æµç¨‹
export class AutoInitOnStartupService {
  async onModuleInit() {
    if (!this.config.autoInitEnabled) return;
    
    // 1. åˆå§‹åŒ–37ä¸ªé¢„è®¾å­—æ®µæ˜ å°„
    await this.initStockQuotePresetFields();  // 22ä¸ªè‚¡ç¥¨æŠ¥ä»·å­—æ®µ
    await this.initStockBasicInfoPresetFields(); // 15ä¸ªåŸºæœ¬ä¿¡æ¯å­—æ®µ
    
    // 2. åˆå§‹åŒ–ç¤ºä¾‹ç¬¦å·æ˜ å°„
    await this.initSampleSymbolMappings();
    
    // 3. å¹‚ç­‰æ€§æ£€æŸ¥ - è·³è¿‡å·²å­˜åœ¨æ•°æ®
    if (this.config.skipExisting && await this.dataExists()) {
      this.logger.log('æ•°æ®å·²å­˜åœ¨ï¼Œè·³è¿‡åˆå§‹åŒ–');
      return;
    }
  }
}
```

### Providerè‡ªåŠ¨å‘ç°ç³»ç»Ÿ

#### æ–‡ä»¶ç³»ç»Ÿæ‰«ææ³¨å†Œ
```typescript
// å¯åŠ¨æ—¶è‡ªåŠ¨æ‰«æå’Œæ³¨å†Œæ‰€æœ‰Providerèƒ½åŠ›
export class CapabilityRegistryService {
  async onModuleInit() {
    // 1. æ‰«ææ‰€æœ‰Providerç›®å½•
    const providerDirs = await this.scanProviderDirectories();
    
    // 2. å¼‚æ­¥åŠ è½½æ‰€æœ‰èƒ½åŠ›
    for (const providerDir of providerDirs) {
      await this.loadProviderCapabilities(providerDir);
    }
    
    // 3. éªŒè¯å’Œæ³¨å†Œèƒ½åŠ›
    this.validateAndRegisterCapabilities();
    
    this.logger.log(`å·²æ³¨å†Œ ${this.capabilities.size} ä¸ªæ•°æ®æºçš„èƒ½åŠ›`);
  }
}
```

### æµ‹è¯•è‡ªåŠ¨åŒ–ä½“ç³»

#### å¤šå±‚æµ‹è¯•ç­–ç•¥
```typescript
// æµ‹è¯•å‘½ä»¤ä½“ç³»
â”œâ”€â”€ å•å…ƒæµ‹è¯•: bun run test:unit (å¿«é€Ÿåé¦ˆ)
â”œâ”€â”€ é›†æˆæµ‹è¯•: bun run test:integration (æ•°æ®åº“ä¾èµ–)
â”œâ”€â”€ E2Eæµ‹è¯•: bun run test:e2e (å®Œæ•´APIæµç¨‹)
â”œâ”€â”€ å®‰å…¨æµ‹è¯•: bun run test:security (æ¼æ´æ‰«æ)
â”œâ”€â”€ æ€§èƒ½æµ‹è¯•: bun run test:perf (K6å‹åŠ›æµ‹è¯•)
â””â”€â”€ å®¹é”™æµ‹è¯•: ä¸“é—¨çš„æ•…éšœæ³¨å…¥æµ‹è¯•
```

#### æµ‹è¯•æ•°æ®ç®¡ç†
```typescript
// æµ‹è¯•ç¯å¢ƒè‡ªåŠ¨è®¾ç½®
beforeEach(async () => {
  // 1. æ¸…ç†æµ‹è¯•æ•°æ®
  await testDb.clearTestData();
  
  // 2. åˆå§‹åŒ–æµ‹è¯•æ•°æ®
  await testDb.seedTestData();
  
  // 3. æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ–
  mockLongPortSDK.setupDefaultResponses();
});
```

## ğŸ“ é¡¹ç›®ç»“æ„

### å®é™…é¡¹ç›®ç»“æ„åˆ†æ

åŸºäºæºç åˆ†æçš„**çœŸå®é¡¹ç›®ç»“æ„**ï¼š

```
src/
â”œâ”€â”€ ğŸ§  core/                     # å…­ç»„ä»¶æ ¸å¿ƒæ¶æ„ (å®Œæ•´å®ç°)
â”‚   â”œâ”€â”€ receiver/                # å¼ºæ—¶æ•ˆæ•°æ®æ¥æ”¶å™¨ (13ä¸ªAPI)
â”‚   â”œâ”€â”€ symbol-mapper/           # ç¬¦å·æ˜ å°„å™¨ (13ä¸ªAPI, MongoDBå­˜å‚¨)
â”‚   â”œâ”€â”€ data-mapper/             # æ•°æ®æ˜ å°„å™¨ (12ä¸ªAPI, 37é¢„è®¾å­—æ®µ)
â”‚   â”œâ”€â”€ transformer/             # æ•°æ®è½¬æ¢å™¨ (3ä¸ªAPI, å®æ—¶è½¬æ¢)
â”‚   â”œâ”€â”€ storage/                 # æ™ºèƒ½å­˜å‚¨å±‚ (6ä¸ªAPI, åŒå­˜å‚¨ç­–ç•¥)
â”‚   â”œâ”€â”€ query/                   # å¼±æ—¶æ•ˆæŸ¥è¯¢å¼•æ“ (7ä¸ªAPI, æ™ºèƒ½æ£€æµ‹)
â”‚   â””â”€â”€ shared/                  # æ ¸å¿ƒå…±äº«æœåŠ¡ (è§£å†³å¾ªç¯ä¾èµ–)
â”‚       â”œâ”€â”€ services/            # DataChangeDetector, MarketStatus, DataFetching
â”‚       â””â”€â”€ utils/               # ä¸šåŠ¡å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“Š providers/                # èƒ½åŠ›å¯¼å‘æ•°æ®æºæ¶æ„
â”‚   â”œâ”€â”€ capability-registry.service.ts  # è‡ªåŠ¨å‘ç°æ³¨å†ŒæœåŠ¡
â”‚   â”œâ”€â”€ longport/                # âœ… LongPortç”Ÿäº§å°±ç»ª (3èƒ½åŠ›, 4å¸‚åœº)
â”‚   â”œâ”€â”€ longport-sg/             # âœ… LongPortæ–°åŠ å¡ç”Ÿäº§å°±ç»ª
â”‚   â””â”€â”€ providers-controller.ts  # ç»Ÿä¸€Providerç®¡ç†API
â”œâ”€â”€ ğŸ” auth/                     # ä¸‰å±‚è®¤è¯ç³»ç»Ÿ (17æƒé™)
â”‚   â”œâ”€â”€ guards/                  # 5ä¸ªè®¤è¯å®ˆå« (JWT, ApiKey, RateLimitç­‰)
â”‚   â”œâ”€â”€ services/                # 6ä¸ªæœåŠ¡ (Auth, ApiKey, Permissionç­‰)
â”‚   â”œâ”€â”€ decorators/              # 6ä¸ªè£…é¥°å™¨ (æƒé™ã€è§’è‰²ã€é™æµç­‰)
â”‚   â”œâ”€â”€ strategies/              # 2ä¸ªç­–ç•¥ (JWT, ApiKey)
â”‚   â”œâ”€â”€ schemas/                 # 2ä¸ªæ•°æ®æ¨¡å‹ (User, ApiKey)
â”‚   â””â”€â”€ auth.controller.ts       # è®¤è¯APIæ§åˆ¶å™¨
â”œâ”€â”€ ğŸ“ˆ metrics/                  # æ€§èƒ½ç›‘æ§ç³»ç»Ÿ
â”‚   â”œâ”€â”€ services/                # PerformanceMonitor, MetricsHealth
â”‚   â”œâ”€â”€ repositories/            # æ€§èƒ½æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ interceptors/            # æ€§èƒ½ç›‘æ§æ‹¦æˆªå™¨
â”‚   â””â”€â”€ decorators/              # æ€§èƒ½ç›‘æ§è£…é¥°å™¨
â”œâ”€â”€ ğŸš¨ alert/                    # æ™ºèƒ½å‘Šè­¦ç³»ç»Ÿ  
â”‚   â”œâ”€â”€ services/                # å‘Šè­¦å¼•æ“ã€è§„åˆ™å¼•æ“ã€é€šçŸ¥æœåŠ¡
â”‚   â”œâ”€â”€ repositories/            # å‘Šè­¦å†å²å­˜å‚¨
â”‚   â”œâ”€â”€ schemas/                 # å‘Šè­¦è§„åˆ™æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ constants/               # 6ä¸ªé»˜è®¤å‘Šè­¦è§„åˆ™
â”œâ”€â”€ ğŸ›¡ï¸ security/                 # å®‰å…¨æ¡†æ¶
â”‚   â”œâ”€â”€ services/                # SecurityAudit, SecurityScanner
â”‚   â”œâ”€â”€ middleware/              # SecurityMiddlewareå…¨å±€ä¿æŠ¤
â”‚   â”œâ”€â”€ repositories/            # å®‰å…¨æ—¥å¿—å­˜å‚¨
â”‚   â””â”€â”€ schemas/                 # å®‰å…¨äº‹ä»¶æ•°æ®æ¨¡å‹
â”œâ”€â”€ ğŸƒ monitoring/               # ç›‘æ§APIç½‘å…³
â”‚   â”œâ”€â”€ monitoring.controller.ts # 13ä¸ªç›‘æ§APIç«¯ç‚¹
â”‚   â””â”€â”€ dto/                     # ç›‘æ§æŸ¥è¯¢å’Œå“åº”DTO
â”œâ”€â”€ ğŸ’¾ cache/                    # ç¼“å­˜æœåŠ¡å±‚
â”‚   â”œâ”€â”€ cache.service.ts         # ç»Ÿä¸€ç¼“å­˜æ¥å£ (å®¹é”™è®¾è®¡)
â”‚   â””â”€â”€ constants/               # ç¼“å­˜é…ç½®å¸¸é‡
â”œâ”€â”€ ğŸ§© common/                   # çº¯é™æ€ç»„ä»¶ (é›¶ä¾èµ–)
â”‚   â”œâ”€â”€ config/                  # 5ä¸ªé…ç½®æ–‡ä»¶ (æ—¥å¿—ã€åˆå§‹åŒ–ã€å®‰å…¨ç­‰)
â”‚   â”œâ”€â”€ constants/               # 4ä¸ªå¸¸é‡æ–‡ä»¶ (å¸‚åœºã€é”™è¯¯ã€é™æµç­‰)
â”‚   â”œâ”€â”€ decorators/              # 2ä¸ªè£…é¥°å™¨ (Swaggerã€æ€§èƒ½ç›‘æ§)
â”‚   â”œâ”€â”€ dto/                     # é€šç”¨å“åº”DTO
â”‚   â”œâ”€â”€ filters/                 # å…¨å±€å¼‚å¸¸è¿‡æ»¤å™¨ (ä¸­æ–‡é”™è¯¯)
â”‚   â”œâ”€â”€ interceptors/            # 2ä¸ªæ‹¦æˆªå™¨ (å“åº”æ ¼å¼åŒ–ã€è¯·æ±‚è¿½è¸ª)
â”‚   â””â”€â”€ utils/                   # 2ä¸ªå·¥å…·å‡½æ•° (HTTPå¤´ã€URLå®‰å…¨)
â”œâ”€â”€ ğŸ¤– scripts/                  # è‡ªåŠ¨åˆå§‹åŒ–ç³»ç»Ÿ
â”‚   â”œâ”€â”€ auto-init-on-startup.service.ts # 37å­—æ®µ+ç¬¦å·æ˜ å°„è‡ªåŠ¨åˆ›å»º
â”‚   â””â”€â”€ auto-init-on-startup.module.ts  # åˆå§‹åŒ–æ¨¡å—
â”œâ”€â”€ ğŸ—ï¸ æ¶æ„æ”¯æ’‘æ–‡ä»¶
â”‚   â”œâ”€â”€ main.ts                  # åº”ç”¨å¯åŠ¨ (ä¸­é—´ä»¶ã€æ‹¦æˆªå™¨é…ç½®)
â”‚   â”œâ”€â”€ app.module.ts            # ä¸»æ¨¡å— (11ä¸ªæ ¸å¿ƒæ¨¡å—å¯¼å…¥)
â”‚   â””â”€â”€ package.json             # Bunä¾èµ–ç®¡ç†
â””â”€â”€ ğŸ“ é¡¹ç›®é…ç½®
    â”œâ”€â”€ test/                    # 75+æµ‹è¯•æ–‡ä»¶ (å•å…ƒã€é›†æˆã€E2Eã€å®¹é”™)
    â”œâ”€â”€ docs/                    # æŠ€æœ¯æ–‡æ¡£
    â”œâ”€â”€ .github/workflows/       # CI/CDè‡ªåŠ¨åŒ–
    â””â”€â”€ docker/                  # å®¹å™¨åŒ–é…ç½®
```

### æ¶æ„å±‚æ¬¡åˆ†æ

#### æ ¸å¿ƒä¸šåŠ¡å±‚ (Core)
- **6ä¸ªç»„ä»¶**: 82ä¸ªAPIç«¯ç‚¹ï¼Œå®Œæ•´æ•°æ®å¤„ç†æµæ°´çº¿
- **2ç§æ¥å£æ¨¡å¼**: å¼ºæ—¶æ•ˆ(Receiver) + å¼±æ—¶æ•ˆ(Query)
- **å…±äº«æœåŠ¡**: è§£å†³ç»„ä»¶é—´å¾ªç¯ä¾èµ–

#### æ•°æ®è®¿é—®å±‚ (Providers + Cache)
- **2ä¸ªç”Ÿäº§Provider**: LongPort + LongPort-SG
- **è‡ªåŠ¨å‘ç°æ¶æ„**: æ–‡ä»¶ç³»ç»Ÿæ‰«ææ³¨å†Œ
- **æ™ºèƒ½ç¼“å­˜**: å¸‚åœºçŠ¶æ€æ„ŸçŸ¥ + æ•…éšœå®¹é”™

#### å®‰å…¨è®¤è¯å±‚ (Auth + Security)
- **3å±‚è®¤è¯**: API Key + JWT + å…¬å¼€è®¿é—®
- **17ä¸ªæƒé™**: ç»†ç²’åº¦æƒé™æ§åˆ¶
- **åˆ†å¸ƒå¼é™æµ**: Redisæ»‘åŠ¨çª—å£ç®—æ³•

#### ç›‘æ§å‘Šè­¦å±‚ (Metrics + Alert + Monitoring)
- **å…¨æ–¹ä½ç›‘æ§**: APIã€æ•°æ®åº“ã€Redisã€ç³»ç»Ÿèµ„æº
- **æ™ºèƒ½å‘Šè­¦**: 6ä¸ªé»˜è®¤è§„åˆ™ + å¤šé€šé“é€šçŸ¥
- **å¥åº·è¯„åˆ†**: 100åˆ†åˆ¶ç³»ç»Ÿå¥åº·è¯„ä¼°

#### åŸºç¡€è®¾æ–½å±‚ (Common + Scripts)
- **é™æ€å·¥å…·**: é›¶ä¾èµ–çš„çº¯é™æ€ç»„ä»¶
- **è‡ªåŠ¨åŒ–**: å¯åŠ¨åˆå§‹åŒ– + Providerå‘ç°
- **æ ‡å‡†åŒ–**: å“åº”æ ¼å¼ + é”™è¯¯å¤„ç†

## ğŸŒŸ æ ¸å¿ƒæŠ€æœ¯æ ˆ

### è¿è¡Œæ—¶å’Œæ¡†æ¶ (é«˜æ€§èƒ½)
- **Bun 1.0+**: é«˜æ€§èƒ½TypeScriptè¿è¡Œæ—¶ï¼Œæ¯”Node.jså¿«3-4å€
- **NestJS**: ä¼ä¸šçº§æ¡†æ¶ï¼Œæ¨¡å—åŒ–æ¶æ„ï¼Œä¾èµ–æ³¨å…¥
- **Express**: HTTPæœåŠ¡å™¨åŸºç¡€ï¼Œä¸­é—´ä»¶ç”Ÿæ€ä¸°å¯Œ
- **TypeScript**: 100%ç±»å‹å®‰å…¨ï¼Œä¸¥æ ¼æ¨¡å¼ç¼–è¯‘

### æ•°æ®å­˜å‚¨ (åŒé‡ä¿éšœ)
- **MongoDB 5.0+**: æ–‡æ¡£æ•°æ®åº“ï¼Œä¸»è¦æ•°æ®æŒä¹…åŒ– (100è¿æ¥æ± )
- **Redis 6.0+**: å†…å­˜æ•°æ®åº“ï¼Œæ™ºèƒ½ç¼“å­˜ + åˆ†å¸ƒå¼é”
- **Mongoose**: MongoDB ODMï¼Œä¼˜åŒ–ç´¢å¼•å’ŒæŸ¥è¯¢
- **Auto-Compression**: Gzipè‡ªåŠ¨å‹ç¼©ï¼Œ70%å‹ç¼©æ¯”é˜ˆå€¼

### è®¤è¯å’Œå®‰å…¨ (ä¸‰å±‚é˜²æŠ¤)
- **JWT + Passport**: æ ‡å‡†è®¤è¯ï¼Œ24h+7dåŒä»¤ç‰Œ
- **bcrypt 12è½®**: å¯†ç åŠ å¯†ï¼Œä¼ä¸šçº§å®‰å…¨
- **class-validator**: å…¨ç®¡é“è¾“å…¥éªŒè¯
- **SecurityMiddleware**: å…¨å±€å®‰å…¨é˜²æŠ¤ï¼ŒXSS/CSRFé˜²æŠ¤

### ç›‘æ§å’Œè¿ç»´ (ä¼ä¸šçº§)
- **è‡ªç ”æ€§èƒ½ç›‘æ§**: 100åˆ†åˆ¶å¥åº·è¯„åˆ†ï¼ŒP95/P99è¿½è¸ª
- **Redisæ—¶é—´åºåˆ—**: é«˜æ€§èƒ½æŒ‡æ ‡å­˜å‚¨ï¼Œ30så¥åº·æ£€æŸ¥
- **å¤šé€šé“å‘Šè­¦**: é‚®ä»¶/é’‰é’‰/Slack/çŸ­ä¿¡/Webhook
- **æ•…éšœå®¹é”™**: å…³é”®/éå…³é”®æ“ä½œåˆ†ç¦»ï¼Œä¼˜é›…é™çº§

### å¼€å‘å·¥å…· (ç°ä»£åŒ–)
- **ESLint + Prettier**: ä»£ç è´¨é‡è‡ªåŠ¨åŒ–
- **Jest**: 75+æµ‹è¯•æ–‡ä»¶ï¼Œå•å…ƒ/é›†æˆ/E2E/å®¹é”™æµ‹è¯•
- **K6**: æ€§èƒ½å‹åŠ›æµ‹è¯•ï¼Œè´Ÿè½½éªŒè¯
- **Swagger**: è‡ªåŠ¨APIæ–‡æ¡£ï¼Œäº¤äº’å¼æµ‹è¯•ç•Œé¢

### ç¼“å­˜å’Œä¼˜åŒ– (æ™ºèƒ½åŒ–)
- **å¸‚åœºçŠ¶æ€æ„ŸçŸ¥**: åŠ¨æ€TTL (1s-3600s)
- **37å­—æ®µå˜åŒ–æ£€æµ‹**: æ™ºèƒ½æ›´æ–°åˆ¤æ–­
- **ä¸‰å±‚é™çº§**: Redis â†’ MongoDB â†’ å®æ—¶æ•°æ®æº
- **è‡ªåŠ¨é¢„çƒ­**: å¯åŠ¨æ—¶çƒ­ç‚¹æ•°æ®é¢„åŠ è½½

## ğŸ¯ ç³»ç»Ÿä¼˜åŠ¿

### 1. åˆ›æ–°åŒæ—¶æ•ˆæ¶æ„
- **å¼ºæ—¶æ•ˆæ¥å£**: 1ç§’ç¼“å­˜ï¼ŒP95<100msï¼Œé€‚åˆå®æ—¶äº¤æ˜“
- **å¼±æ—¶æ•ˆæ¥å£**: æ™ºèƒ½æ£€æµ‹ï¼Œé€‚åˆåˆ†æå†³ç­–
- **å¸‚åœºæ„ŸçŸ¥**: åŸºäºäº¤æ˜“æ—¶é—´çš„åŠ¨æ€ç¼“å­˜ç­–ç•¥
- **37å­—æ®µç›‘æ§**: ä»·æ ¼ä¼˜å…ˆçº§æ£€æµ‹ï¼ŒçŸ­è·¯ä¼˜åŒ–

### 2. ä¼ä¸šçº§å¯é æ€§
- **99.9%å¯ç”¨æ€§**: æ•…éšœè½¬ç§»ï¼Œè‡ªåŠ¨æ¢å¤ï¼Œä¼˜é›…é™çº§
- **å®¹é”™è®¾è®¡**: å…³é”®/éå…³é”®æ“ä½œåˆ†ç¦»
- **ç›‘æ§å‘Šè­¦**: 6ä¸ªé»˜è®¤è§„åˆ™ï¼Œæ™ºèƒ½é™å™ªï¼Œå¤šé€šé“é€šçŸ¥
- **å¥åº·è¯„åˆ†**: å®æ—¶ç³»ç»Ÿå¥åº·è¯„ä¼°ï¼Œæ€§èƒ½ç“¶é¢ˆè¯†åˆ«

### 3. é«˜æ€§èƒ½æ¶æ„
- **æ¯«ç§’çº§å“åº”**: Redisç¼“å­˜ä¼˜å…ˆï¼Œæ™ºèƒ½å‹ç¼©
- **å¹¶å‘ä¼˜åŒ–**: è¿æ¥æ± ï¼Œå¼‚æ­¥å¤„ç†ï¼Œæ‰¹é‡æ“ä½œ
- **è‡ªåŠ¨æ‰©å±•**: æ— çŠ¶æ€è®¾è®¡ï¼Œæ°´å¹³æ‰©å±•å°±ç»ª
- **æ€§èƒ½ç›‘æ§**: æ…¢æŸ¥è¯¢æ£€æµ‹ï¼Œèµ„æºä½¿ç”¨è¿½è¸ª

### 4. å¼€å‘å‹å¥½è®¾è®¡
- **ç±»å‹å®‰å…¨**: 100% TypeScriptè¦†ç›–ï¼Œç¼–è¯‘æ—¶é”™è¯¯æ£€æµ‹
- **æ ‡å‡†åŒ–**: ç»Ÿä¸€å“åº”æ ¼å¼ï¼Œä¸­æ–‡é”™è¯¯æ¶ˆæ¯
- **è‡ªåŠ¨åŒ–**: Providerå‘ç°ï¼Œåˆå§‹åŒ–ï¼Œæµ‹è¯•æµæ°´çº¿
- **æ–‡æ¡£å®Œæ•´**: Swaggerè‡ªåŠ¨ç”Ÿæˆï¼Œä»£ç æ³¨é‡Šè¯¦ç»†

### 5. å®‰å…¨åˆè§„æ¶æ„
- **å¤šå±‚é˜²æŠ¤**: åº”ç”¨+è®¤è¯+ç½‘ç»œ+æ•°æ®å››å±‚å®‰å…¨
- **å®¡è®¡è½¨è¿¹**: å®Œæ•´æ“ä½œè®°å½•ï¼Œå®‰å…¨äº‹ä»¶è¿½è¸ª
- **æƒé™ç»†åŒ–**: 17ä¸ªæƒé™ï¼Œè§’è‰²ç»§æ‰¿ï¼Œæœ€å°æƒé™åŸåˆ™
- **åˆè§„æ”¯æŒ**: æ»¡è¶³é‡‘èæ•°æ®å®‰å…¨è¦æ±‚

## ğŸ”„ æ‰©å±•èƒ½åŠ›

### æ°´å¹³æ‰©å±•æ¶æ„
- **æ— çŠ¶æ€è®¾è®¡**: æ‰€æœ‰ç»„ä»¶æ”¯æŒå¤šå®ä¾‹éƒ¨ç½²
- **Redisé›†ç¾¤**: ç¼“å­˜å±‚æ°´å¹³æ‰©å±•ï¼Œåˆ†å¸ƒå¼é”
- **MongoDBåˆ†ç‰‡**: æ•°æ®å±‚æ¨ªå‘æ‰©å±•ï¼Œè‡ªåŠ¨è´Ÿè½½å‡è¡¡
- **è´Ÿè½½å‡è¡¡**: Nginx/Docker Swarmæ”¯æŒ

### åŠŸèƒ½æ‰©å±•æœºåˆ¶
- **Provideræ’ä»¶**: æ–‡ä»¶ç³»ç»Ÿè‡ªåŠ¨å‘ç°ï¼Œå³æ’å³ç”¨
- **èƒ½åŠ›å¯¼å‘**: æ–°å¢æ•°æ®æºåªéœ€å®ç°ICapabilityæ¥å£
- **é…ç½®é©±åŠ¨**: é€šè¿‡ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶æ‰©å±•åŠŸèƒ½
- **APIç‰ˆæœ¬åŒ–**: å‘åå…¼å®¹çš„ç‰ˆæœ¬ç®¡ç†ç­–ç•¥

### é›†æˆæ‰©å±•æ”¯æŒ
- **Webhookæ”¯æŒ**: äº‹ä»¶é©±åŠ¨çš„ç¬¬ä¸‰æ–¹é›†æˆ
- **æ¶ˆæ¯é˜Ÿåˆ—**: BullMQå¼‚æ­¥ä»»åŠ¡å¤„ç†
- **å¾®æœåŠ¡å°±ç»ª**: æ¨¡å—åŒ–è®¾è®¡ï¼Œå¯æ‹†åˆ†ä¸ºç‹¬ç«‹æœåŠ¡
- **å®¹å™¨åŒ–**: Dockerå¤šé˜¶æ®µæ„å»ºï¼ŒKuberneteséƒ¨ç½²æ”¯æŒ

### æ•°æ®æºæ‰©å±•ç¤ºä¾‹
```typescript
// æ–°å¢æ•°æ®æºåªéœ€è¦4æ­¥ï¼š
1. åˆ›å»º src/providers/new-provider/ ç›®å½•
2. å®ç° capabilities/get-stock-quote.ts (æ ‡å‡†æ¥å£)
3. æ·»åŠ  new-provider.module.ts (NestJSæ¨¡å—)
4. ç³»ç»Ÿè‡ªåŠ¨å‘ç°å¹¶æ³¨å†Œï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç 
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚éœ€æŠ€æœ¯æ”¯æŒæˆ–æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·è”ç³»ï¼š
- **ğŸ“š APIæ–‡æ¡£**: http://localhost:3000/docs (å®Œæ•´äº¤äº’å¼æ–‡æ¡£)
- **ğŸ” ç³»ç»Ÿç›‘æ§**: http://localhost:3000/api/v1/monitoring/health
- **ğŸ› BugæŠ¥å‘Š**: GitHub Issues
- **ğŸ’¬ æŠ€æœ¯äº¤æµ**: å¼€å‘è€…æŠ€æœ¯ç¾¤

---

## ğŸ“ æ›´æ–°è®°å½•

### v3.0.0 (2025å¹´1æœˆ) - ğŸ¯ æ¶æ„æ–‡æ¡£é‡å¤§æ›´æ–°
- âœ… **æºç åˆ†æå®Œæˆ**: åŸºäºå®é™…æºç çš„å®Œæ•´æ¶æ„åˆ†æ
- âœ… **åŒæ—¶æ•ˆæ¥å£**: å¼ºæ—¶æ•ˆ(å®æ—¶äº¤æ˜“) + å¼±æ—¶æ•ˆ(åˆ†æå†³ç­–)è®¾è®¡æ¾„æ¸…
- âœ… **æ™ºèƒ½ç¼“å­˜ç­–ç•¥**: å¸‚åœºçŠ¶æ€æ„ŸçŸ¥ç¼“å­˜ï¼Œ37å­—æ®µå˜åŒ–æ£€æµ‹è¯¦è§£
- âœ… **å®¹é”™æ¶æ„**: å…³é”®/éå…³é”®æ“ä½œåˆ†ç¦»ï¼Œä¼˜é›…é™çº§æœºåˆ¶
- âœ… **ä¸‰å±‚è®¤è¯**: 17æƒé™ç»†ç²’åº¦æ§åˆ¶ï¼Œåˆ†å¸ƒå¼é™æµç®—æ³•
- âœ… **èƒ½åŠ›å¯¼å‘Provider**: è‡ªåŠ¨å‘ç°æ³¨å†Œï¼ŒLongPort/LongPort-SGç”Ÿäº§å°±ç»ª
- âœ… **ç›‘æ§å‘Šè­¦**: 100åˆ†åˆ¶å¥åº·è¯„åˆ†ï¼Œ6é»˜è®¤è§„åˆ™ï¼Œå¤šé€šé“é€šçŸ¥
- âœ… **è‡ªåŠ¨åŒ–ç³»ç»Ÿ**: é…ç½®é©±åŠ¨åˆå§‹åŒ–ï¼Œæµ‹è¯•è‡ªåŠ¨åŒ–ä½“ç³»

### v2.1.0 (2025å¹´1æœˆ)
- âœ… **å…±äº«ç»„ä»¶é‡æ„**: å¤šå±‚å…±äº«æ¶æ„ï¼Œçº¯é™æ€+æ ¸å¿ƒæœåŠ¡åˆ†ç¦»
- âœ… **å¾ªç¯ä¾èµ–è§£å†³**: DataFetchingServiceç»Ÿä¸€æ•°æ®è·å–
- âœ… **å“åº”æ ¼å¼ç»Ÿä¸€**: ResponseInterceptorå…¨å±€æ ¼å¼åŒ–

### v2.0.0 (2024å¹´12æœˆ)
- âœ… **LongPorté›†æˆ**: ç”Ÿäº§å°±ç»ªçš„å®æ—¶æ•°æ®æ¥å…¥
- âœ… **å…­ç»„ä»¶æ¶æ„**: å®Œæ•´æ•°æ®å¤„ç†æµæ°´çº¿å®ç°
- âœ… **æ€§èƒ½ç›‘æ§**: ä¼ä¸šçº§ç›‘æ§å‘Šè­¦ä½“ç³»

---

*æœ¬æ–‡æ¡£æœ€åæ›´æ–°äº: 2025å¹´1æœˆ20æ—¥*  
*åŸºäºé¡¹ç›®æºç æ·±åº¦åˆ†æï¼Œç¡®ä¿æ¶æ„æ–‡æ¡£ä¸å®é™…å®ç°ä¸€è‡´*