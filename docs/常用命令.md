bun run lint
bun run lint --fix   ESLint 错误检查
npx tsc --noEmit --skipLibCheck  TypeScript 编译检查

npx tsc --noEmit --skipLibCheck src/core/**/*.ts  这样肯定报错 不加载配置
DISABLE_AUTO_INIT=true npx tsc --noEmit src/common/constants/**/*.ts   

监控
缓存
alert

nestjs 的安装版本检查
npx nest --version

TypeScript 安装版本检查
npx tsc -v


再次阅读计划,然后等待指令.  

现在我们对计划中的阶段任务进行细化拆分，制定中文todolist，将整个重构任务拆分成可执行的细分任务，我需要审核你的待办清单。
注意专注文档内的问题本质，不要把简单的问题搞复杂。 

使用 nestjs-refactor-reviewer agent 阅读文档​，确认后端是否存在文档中的问题，文档中的方案是否可行
使用 nestjs-backend-engineer agent ， 阅读文档，拆解文档的计划，制定详细 todolist 任务清单，然后执行任务。
使用 nestjs-backend-engineer agent，阅读 todolist 任务清单，然后执行任务。

风格检查与修复
 bun run format:check
 bun prettier --write "src/**/*.ts" "test/**/*.ts"

项目 src 目录文件夹文件名结构规范
bun test:src-validate-structure

测试文件与项目 src 目录对齐检测
bun tools:structure-validator
创建缺失的文件和目录
bun tools:structure-validator:execute

测代码文件重复检测
bun tools:find-duplicates

测试代码文件名合规检查
bun tools:naming-validator

占位空白测试文件检查
bun tools:clean-duplicates
占位空白测试文件检查，修复错误，直接占位文件的文件内容
bun tools:clean-duplicates:execute

bun test:coverage:all

 ESM 与 CommonJS  混用。

 利用了 TypeScript 在构建时将 ESM 语法转译为 CommonJS 的能力

 项目应该是使用的 CommonJS！

 启动 开发模式
 bun run dev

版本号
cd backend && npm outdated


我将切换到仓库目录，检查变更并执行提交与推送。
cd /Users/honor/Documents/code/newstockapi/backend && git rev-parse --is-inside-work-tree && git status --porcelain | cat
git add -A && git commit -m "app 文件夹重构结束，但是初始化有问题" && git push

拉取远程覆盖本地
git checkout origin/main -- src



常量验证报告 指定目录
bun run tools/constants-validator/single-duplicate-analyzer.util.ts ./src/common/constants ./docs/constants-only-analysis.md)



单文件检查代码错误的命令是：
DISABLE_AUTO_INIT=true npm run typecheck:file -- src/appcore/core/application.module.ts
注意目标测试路径需要改为被测试目标的路径，禁止使用
DISABLE_AUTO_INIT=true npx tsc --noEmit src/app/core/application.module.ts 这种形式测试单文件。
# 或传更多参数
DISABLE_AUTO_INIT=true npm run typecheck:file -- src/common/constants/application/index.ts --traceResolution



# 1. 运行分析工具生成报告
  bun run tools/unused/property-usage-analyzer-nested.ts > constants-usage-analysis.json

  # 2. 干运行查看删除计划
  bun run tools/unused/property-cleanup-tool.ts property-usage-analysis-nested.json --dry-run

  # 3. 执行实际删除
  bun run tools/unused/property-cleanup-tool.ts property-usage-analysis-nested.json --execute



  # 4. 如需回滚，恢复备份文件
  find . -name "*.backup" -exec sh -c 'mv "$1" "${1%.backup}"' _ {} \;





 依据最新的分析结果对文档进行更正。  

对文档中的所有分析结果进行复核。检查文档内容是否准确，是否有遗漏的未使用
  的冗余代码或者文件未被检索出
