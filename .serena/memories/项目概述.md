## 智能股票数据处理系统

### 项目概述

这是一个基于 NestJS 框架开发的智能化股票数据处理系统，主要用于处理和提供股票市场数据。系统采用了六组件核心架构，提供强时效和弱时效双接口设计，支持多数据源融合能力。

### 技术栈

- **后端框架**: NestJS (TypeScript)
- **数据库**: MongoDB (持久化存储)
- **缓存**: Redis (高性能缓存)
- **消息队列**: Bull (基于Redis的队列系统)
- **运行环境**: Bun (JavaScript/TypeScript运行时)
- **API文档**: Swagger
- **测试框架**: Jest
- **性能测试**: K6

### 核心架构

系统采用六组件核心架构，每个组件负责特定功能：

1. **Receiver 组件**: 请求入口和路由，负责接收请求并选择适当的数据提供商
2. **Symbol Mapper 组件**: 股票代码格式转换，支持多数据源代码映射
3. **Data Mapper 组件**: 数据源字段映射规则管理
4. **Transformer 组件**: 原始数据实时转换，格式标准化处理
5. **Storage 组件**: 双存储策略 (Redis缓存 + MongoDB持久化)
6. **Query 组件**: 查询和后台更新，支持弱时效查询和变化检测

### 主要功能

- **双时效接口**: 强时效(1秒缓存) + 弱时效(智能变化检测)
- **市场感知**: 自动识别交易时间，动态调整缓存策略
- **多数据源**: 集成 LongPort、TwelveData、iTick 等多个数据源
- **三层认证**: API Key + JWT + 角色权限
- **实时监控**: 全面的性能监控和健康检查
- **安全审计**: 完整的安全扫描和审计日志

### 项目结构

项目采用模块化结构，主要包括：

- **core/**: 六组件核心架构实现
- **auth/**: 认证和授权相关功能
- **alert/**: 告警管理系统
- **metrics/**: 性能指标监控
- **monitoring/**: 系统监控
- **providers/**: 数据提供商集成
- **security/**: 安全管理
- **common/**: 通用工具和配置
- **scripts/**: 自动初始化和其他脚本

### 支持市场

- **美股** (US): NASDAQ、NYSE
- **港股** (HK): HKEX
- **A股** (CN): 上交所、深交所
- **新加坡** (SG): SGX