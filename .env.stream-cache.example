# StreamCache 环境变量配置示例
# 复制此文件为 .env 并根据实际环境修改配置值

# ================================
# Redis 连接配置
# ================================

# Redis服务器地址
REDIS_HOST=localhost

# Redis服务器端口
REDIS_PORT=6379

# Redis密码 (生产环境必须配置)
REDIS_PASSWORD=

# StreamCache专用数据库编号 (建议使用独立DB避免键冲突)
REDIS_STREAM_CACHE_DB=1

# Redis TLS配置 (生产环境建议启用)
REDIS_TLS_ENABLED=false
REDIS_TLS_SERVERNAME=

# ================================
# StreamCache 核心配置
# ================================

# Hot Cache TTL (毫秒) - 内存缓存的生存时间
# 推荐值: 开发环境3000, 生产环境5000
STREAM_CACHE_HOT_TTL_MS=5000

# Warm Cache TTL (秒) - Redis缓存的生存时间  
# 推荐值: 开发环境180, 生产环境300
STREAM_CACHE_WARM_TTL_SECONDS=300

# Hot Cache 最大条目数
# 推荐值: 开发环境500, 生产环境2000
STREAM_CACHE_MAX_HOT_SIZE=1000

# 缓存清理间隔 (毫秒)
# 推荐值: 开发环境15000, 生产环境60000
STREAM_CACHE_CLEANUP_INTERVAL_MS=30000

# 数据压缩阈值 (字节) - 超过此大小的数据将被压缩
# 推荐值: 开发环境512, 生产环境1024
STREAM_CACHE_COMPRESSION_THRESHOLD=1024

# ================================
# 性能和监控配置
# ================================

# 是否启用性能指标收集
STREAM_CACHE_ENABLE_METRICS=true

# 是否启用Prometheus指标导出 (生产环境推荐)
STREAM_CACHE_ENABLE_PROMETHEUS=false

# 是否启用详细调试日志 (开发环境推荐)
STREAM_CACHE_ENABLE_DEBUG_LOGS=false

# ================================
# 容错和恢复配置  
# ================================

# 是否启用断路器机制
STREAM_CACHE_CIRCUIT_BREAKER_ENABLED=true

# 断路器触发阈值 (失败率百分比)
STREAM_CACHE_CIRCUIT_BREAKER_THRESHOLD=50

# 断路器重置超时时间 (毫秒)
STREAM_CACHE_CIRCUIT_BREAKER_TIMEOUT=30000

# 批量操作超时时间 (毫秒)
STREAM_CACHE_BATCH_TIMEOUT=5000

# 最大并发操作数
STREAM_CACHE_MAX_CONCURRENT_OPS=100

# ================================
# 开发和测试配置
# ================================

# 测试环境专用Redis DB (与主DB分离)
REDIS_TEST_DB=15

# 是否启用测试模式的快速故障转移
STREAM_CACHE_FAST_FAILOVER=false

# 是否启用负载测试模式 (预发布环境)
STREAM_CACHE_ENABLE_LOAD_TESTING=false

# ================================
# 环境特定配置示例
# ================================

# --- 开发环境配置示例 ---
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_STREAM_CACHE_DB=1
# STREAM_CACHE_HOT_TTL_MS=3000
# STREAM_CACHE_WARM_TTL_SECONDS=180
# STREAM_CACHE_MAX_HOT_SIZE=500
# STREAM_CACHE_ENABLE_DEBUG_LOGS=true

# --- 生产环境配置示例 ---
# REDIS_HOST=redis-cluster.internal
# REDIS_PORT=6379
# REDIS_PASSWORD=your-secure-password
# REDIS_STREAM_CACHE_DB=1
# REDIS_TLS_ENABLED=true
# STREAM_CACHE_HOT_TTL_MS=5000
# STREAM_CACHE_WARM_TTL_SECONDS=300
# STREAM_CACHE_MAX_HOT_SIZE=2000
# STREAM_CACHE_ENABLE_PROMETHEUS=true
# STREAM_CACHE_ENABLE_DEBUG_LOGS=false

# --- 测试环境配置示例 ---
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_TEST_DB=15
# STREAM_CACHE_HOT_TTL_MS=1000
# STREAM_CACHE_WARM_TTL_SECONDS=10
# STREAM_CACHE_MAX_HOT_SIZE=10
# STREAM_CACHE_FAST_FAILOVER=true