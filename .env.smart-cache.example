# =============================================================================
# SmartCache æ™ºèƒ½ç¼“å­˜ç»„ä»¶ç¯å¢ƒå˜é‡é…ç½®æ¨¡æ¿
# =============================================================================
# 
# ğŸ“‹ ä½¿ç”¨è¯´æ˜ï¼š
# 1. å¤åˆ¶æ­¤æ–‡ä»¶ä¸º .env æˆ–åˆå¹¶åˆ°ç°æœ‰çš„ .env æ–‡ä»¶ä¸­
# 2. æ ¹æ®éƒ¨ç½²ç¯å¢ƒè°ƒæ•´ç›¸åº”å‚æ•°å€¼
# 3. å®¹å™¨åŒ–éƒ¨ç½²æ—¶å¯é€šè¿‡ ConfigMap/Secret ç®¡ç†è¿™äº›å˜é‡
# 
# ğŸ¯ é…ç½®åŸåˆ™ï¼š
# - å¼€å‘ç¯å¢ƒï¼šè¾ƒå¤§çš„å¹¶å‘æ•°å’Œè¾ƒçŸ­çš„TTLï¼Œä¾¿äºè°ƒè¯•
# - æµ‹è¯•ç¯å¢ƒï¼šä¸­ç­‰é…ç½®ï¼Œæ¨¡æ‹Ÿç”Ÿäº§åœºæ™¯
# - ç”Ÿäº§ç¯å¢ƒï¼šæ ¹æ®æœåŠ¡å™¨èµ„æºå’Œä¸šåŠ¡éœ€æ±‚ç²¾ç»†è°ƒä¼˜
# 
# ğŸ’¡ è‡ªåŠ¨è°ƒä¼˜è¯´æ˜ï¼š
# - maxConcurrentUpdates ä¼šè‡ªåŠ¨åŸºäºCPUæ ¸å¿ƒæ•°è®¡ç®—ï¼ˆæœ€å°2ï¼Œæœ€å¤§16ï¼‰
# - æ‰€æœ‰æ•°å€¼éƒ½æœ‰åˆç†çš„é»˜è®¤å€¼ï¼Œå¯æ ¹æ®éœ€è¦è¦†ç›–
# =============================================================================

# -----------------------------------------------------------------------------
# ğŸ”§ SmartCache åŸºç¡€é…ç½®
# -----------------------------------------------------------------------------

# æœ€å°æ›´æ–°é—´éš”ï¼ˆæ¯«ç§’ï¼‰
# æ§åˆ¶åå°æ›´æ–°ä»»åŠ¡çš„æœ€å°æ‰§è¡Œé—´éš”ï¼Œé¿å…è¿‡äºé¢‘ç¹çš„æ›´æ–°
# é»˜è®¤: 30000 (30ç§’) - æ²¿ç”¨Queryç»„ä»¶ç°ç½‘å€¼
SMART_CACHE_MIN_UPDATE_INTERVAL=30000

# æœ€å¤§å¹¶å‘æ›´æ–°æ•°
# æ§åˆ¶åŒæ—¶æ‰§è¡Œçš„åå°æ›´æ–°ä»»åŠ¡æ•°é‡ï¼ŒåŸºäºCPUæ ¸å¿ƒæ•°è‡ªåŠ¨è®¡ç®—
# é»˜è®¤: Math.min(Math.max(2, CPU_CORES), 16)
# å»ºè®®å€¼ï¼š
#   - å¼€å‘ç¯å¢ƒï¼š4-8
#   - æµ‹è¯•ç¯å¢ƒï¼š8-12  
#   - ç”Ÿäº§ç¯å¢ƒï¼šæ ¹æ®æœåŠ¡å™¨é…ç½®è°ƒæ•´ï¼Œé€šå¸¸ä¸ºCPUæ ¸å¿ƒæ•°
SMART_CACHE_MAX_CONCURRENT=8

# ä¼˜é›…å…³é—­è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
# OnModuleDestroyç­‰å¾…æ‰€æœ‰åå°ä»»åŠ¡å®Œæˆçš„æœ€é•¿æ—¶é—´
# é»˜è®¤: 30000 (30ç§’)
SMART_CACHE_SHUTDOWN_TIMEOUT=30000

# å¯ç”¨åå°æ›´æ–°
# å…¨å±€å¼€å…³ï¼Œæ§åˆ¶æ˜¯å¦æ‰§è¡Œåå°æ•°æ®æ›´æ–°
# é»˜è®¤: true
SMART_CACHE_ENABLE_BACKGROUND_UPDATE=true

# å¯ç”¨æ•°æ®å˜åŒ–æ£€æµ‹
# æ§åˆ¶æ˜¯å¦åœ¨åå°æ›´æ–°æ—¶æ£€æµ‹æ•°æ®å˜åŒ–
# é»˜è®¤: true  
SMART_CACHE_ENABLE_DATA_CHANGE_DETECTION=true

# å¯ç”¨ç›‘æ§æŒ‡æ ‡æ”¶é›†
# æ§åˆ¶æ˜¯å¦é‡‡é›†PrometheusæŒ‡æ ‡å’Œæ€§èƒ½ç›‘æ§æ•°æ®
# é»˜è®¤: true
SMART_CACHE_ENABLE_METRICS=true

# -----------------------------------------------------------------------------
# ğŸ’ª å¼ºæ—¶æ•ˆæ€§ç­–ç•¥é…ç½® (STRONG_TIMELINESS)
# é€‚ç”¨åœºæ™¯: Receiverç»„ä»¶ï¼Œå®æ—¶æ•°æ®è·å–ï¼Œè¦æ±‚æ•°æ®æ–°é²œåº¦
# -----------------------------------------------------------------------------

# ç¼“å­˜TTLï¼ˆç§’ï¼‰
# å¼ºæ—¶æ•ˆæ€§è¦æ±‚ä¸‹çš„ç¼“å­˜å­˜æ´»æ—¶é—´
# å»ºè®®å€¼: 30-300ç§’ï¼Œæ ¹æ®æ•°æ®æ›´æ–°é¢‘ç‡è°ƒæ•´
# é»˜è®¤: 60 (1åˆ†é’Ÿ)
CACHE_STRONG_TTL=60

# å¯ç”¨åå°æ›´æ–°
# é»˜è®¤: true
CACHE_STRONG_BACKGROUND_UPDATE=true

# æ›´æ–°é˜ˆå€¼æ¯”ä¾‹ (0.0-1.0)
# å½“TTLå‰©ä½™æ—¶é—´ä½äºæ­¤æ¯”ä¾‹æ—¶è§¦å‘åå°æ›´æ–°
# ä¾‹å¦‚: 0.3 è¡¨ç¤ºå‰©ä½™30%TTLæ—¶å¼€å§‹æ›´æ–°
# é»˜è®¤: 0.3 (30%)
CACHE_STRONG_THRESHOLD=0.3

# å¼ºåˆ¶åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰
# è¶…è¿‡æ­¤æ—¶é—´å¼ºåˆ¶åˆ·æ–°ç¼“å­˜ï¼Œæ— è®ºTTLçŠ¶æ€
# é»˜è®¤: 300 (5åˆ†é’Ÿ)
CACHE_STRONG_REFRESH_INTERVAL=300

# å¯ç”¨æ•°æ®å˜åŒ–æ£€æµ‹
# é»˜è®¤: true
CACHE_STRONG_DATA_CHANGE_DETECTION=true

# -----------------------------------------------------------------------------
# ğŸŒ å¼±æ—¶æ•ˆæ€§ç­–ç•¥é…ç½® (WEAK_TIMELINESS)  
# é€‚ç”¨åœºæ™¯: Queryç»„ä»¶ï¼Œæ‰¹é‡æŸ¥è¯¢ï¼Œå…è®¸è¾ƒé•¿ç¼“å­˜æ—¶é—´
# -----------------------------------------------------------------------------

# ç¼“å­˜TTLï¼ˆç§’ï¼‰
# å¼±æ—¶æ•ˆæ€§ä¸‹å…è®¸è¾ƒé•¿çš„ç¼“å­˜æ—¶é—´
# å»ºè®®å€¼: 300-1800ç§’ï¼Œæ ¹æ®æ•°æ®å˜åŒ–é¢‘ç‡è°ƒæ•´
# é»˜è®¤: 300 (5åˆ†é’Ÿ)
CACHE_WEAK_TTL=300

# å¯ç”¨åå°æ›´æ–°
# é»˜è®¤: true
CACHE_WEAK_BACKGROUND_UPDATE=true

# æ›´æ–°é˜ˆå€¼æ¯”ä¾‹ (0.0-1.0)
# å¼±æ—¶æ•ˆæ€§å¯ä»¥è®¾ç½®è¾ƒä½çš„é˜ˆå€¼ï¼Œå‡å°‘æ›´æ–°é¢‘ç‡
# é»˜è®¤: 0.2 (20%)
CACHE_WEAK_THRESHOLD=0.2

# æœ€å°æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰
# é¿å…é¢‘ç¹æ›´æ–°ï¼Œå³ä½¿æ»¡è¶³é˜ˆå€¼æ¡ä»¶
# é»˜è®¤: 60 (1åˆ†é’Ÿ)
CACHE_WEAK_MIN_UPDATE=60

# å¯ç”¨æ•°æ®å˜åŒ–æ£€æµ‹
# é»˜è®¤: true
CACHE_WEAK_DATA_CHANGE_DETECTION=true

# -----------------------------------------------------------------------------
# ğŸ“ˆ å¸‚åœºæ„ŸçŸ¥ç­–ç•¥é…ç½® (MARKET_AWARE)
# é€‚ç”¨åœºæ™¯: è‚¡ç¥¨æ•°æ®ï¼Œæ ¹æ®å¸‚åœºå¼€é—­çŠ¶æ€åŠ¨æ€è°ƒæ•´ç¼“å­˜ç­–ç•¥
# -----------------------------------------------------------------------------

# å¼€å¸‚æ—¶ç¼“å­˜TTLï¼ˆç§’ï¼‰
# å¸‚åœºå¼€ç›˜æ—¶ï¼Œæ•°æ®å˜åŒ–é¢‘ç¹ï¼Œä½¿ç”¨è¾ƒçŸ­TTL
# å»ºè®®å€¼: 10-60ç§’
# é»˜è®¤: 30 (30ç§’)
CACHE_MARKET_OPEN_TTL=30

# é—­å¸‚æ—¶ç¼“å­˜TTLï¼ˆç§’ï¼‰
# å¸‚åœºå…³é—­æ—¶ï¼Œæ•°æ®å˜åŒ–ç¼“æ…¢ï¼Œå¯ä½¿ç”¨è¾ƒé•¿TTL
# å»ºè®®å€¼: 1800-7200ç§’ (30åˆ†é’Ÿ-2å°æ—¶)
# é»˜è®¤: 1800 (30åˆ†é’Ÿ)
CACHE_MARKET_CLOSED_TTL=1800

# å¯ç”¨åå°æ›´æ–°
# é»˜è®¤: true
CACHE_MARKET_BACKGROUND_UPDATE=true

# å¸‚åœºçŠ¶æ€æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
# æ£€æŸ¥å¸‚åœºå¼€é—­çŠ¶æ€çš„é¢‘ç‡
# é»˜è®¤: 300 (5åˆ†é’Ÿ)
CACHE_MARKET_CHECK_INTERVAL=300

# å¼€å¸‚æ—¶æ›´æ–°é˜ˆå€¼æ¯”ä¾‹
# å¼€å¸‚æ—¶æ›´æ¿€è¿›çš„æ›´æ–°ç­–ç•¥
# é»˜è®¤: 0.3 (30%)
CACHE_MARKET_OPEN_THRESHOLD=0.3

# é—­å¸‚æ—¶æ›´æ–°é˜ˆå€¼æ¯”ä¾‹
# é—­å¸‚æ—¶æ›´ä¿å®ˆçš„æ›´æ–°ç­–ç•¥
# é»˜è®¤: 0.1 (10%)
CACHE_MARKET_CLOSED_THRESHOLD=0.1

# å¯ç”¨æ•°æ®å˜åŒ–æ£€æµ‹
# é»˜è®¤: true
CACHE_MARKET_DATA_CHANGE_DETECTION=true

# -----------------------------------------------------------------------------
# ğŸ§  è‡ªé€‚åº”ç­–ç•¥é…ç½® (ADAPTIVE)
# é€‚ç”¨åœºæ™¯: æ™ºèƒ½è°ƒæ•´ï¼ŒåŸºäºæ•°æ®å˜åŒ–é¢‘ç‡åŠ¨æ€è°ƒæ•´ç¼“å­˜å‚æ•°
# -----------------------------------------------------------------------------

# åŸºç¡€TTLï¼ˆç§’ï¼‰
# è‡ªé€‚åº”ç­–ç•¥çš„èµ·å§‹TTLå€¼
# é»˜è®¤: 180 (3åˆ†é’Ÿ)
CACHE_ADAPTIVE_BASE_TTL=180

# æœ€å°TTLï¼ˆç§’ï¼‰
# è‡ªé€‚åº”è°ƒæ•´çš„ä¸‹é™
# é»˜è®¤: 30 (30ç§’)
CACHE_ADAPTIVE_MIN_TTL=30

# æœ€å¤§TTLï¼ˆç§’ï¼‰
# è‡ªé€‚åº”è°ƒæ•´çš„ä¸Šé™
# é»˜è®¤: 3600 (1å°æ—¶)
CACHE_ADAPTIVE_MAX_TTL=3600

# è‡ªé€‚åº”è°ƒæ•´å› å­ (>0)
# æ§åˆ¶TTLè°ƒæ•´çš„å¹…åº¦ï¼Œå€¼è¶Šå¤§è°ƒæ•´è¶Šæ¿€è¿›
# é»˜è®¤: 1.5
CACHE_ADAPTIVE_FACTOR=1.5

# å¯ç”¨åå°æ›´æ–°
# é»˜è®¤: true
CACHE_ADAPTIVE_BACKGROUND_UPDATE=true

# æ•°æ®å˜åŒ–æ£€æµ‹çª—å£æ—¶é—´ï¼ˆç§’ï¼‰
# ç»Ÿè®¡æ•°æ®å˜åŒ–é¢‘ç‡çš„æ—¶é—´çª—å£
# é»˜è®¤: 3600 (1å°æ—¶)
CACHE_ADAPTIVE_DETECTION_WINDOW=3600

# å¯ç”¨æ•°æ®å˜åŒ–æ£€æµ‹
# é»˜è®¤: true
CACHE_ADAPTIVE_DATA_CHANGE_DETECTION=true

# =============================================================================
# ğŸš€ éƒ¨ç½²ç¯å¢ƒæ¨èé…ç½®
# =============================================================================

# å¼€å‘ç¯å¢ƒé…ç½®ç¤ºä¾‹ï¼š
# SMART_CACHE_MAX_CONCURRENT=4
# CACHE_STRONG_TTL=30
# CACHE_WEAK_TTL=180
# CACHE_MARKET_OPEN_TTL=15

# æµ‹è¯•ç¯å¢ƒé…ç½®ç¤ºä¾‹ï¼š
# SMART_CACHE_MAX_CONCURRENT=8
# CACHE_STRONG_TTL=60
# CACHE_WEAK_TTL=300
# CACHE_MARKET_OPEN_TTL=30

# ç”Ÿäº§ç¯å¢ƒé…ç½®ç¤ºä¾‹ï¼ˆé«˜æ€§èƒ½æœåŠ¡å™¨ï¼‰ï¼š
# SMART_CACHE_MAX_CONCURRENT=16
# CACHE_STRONG_TTL=60
# CACHE_WEAK_TTL=600
# CACHE_MARKET_OPEN_TTL=30
# CACHE_MARKET_CLOSED_TTL=3600

# =============================================================================
# ğŸ“Š ç›‘æ§å’Œè°ƒè¯•å»ºè®®
# =============================================================================
# 
# 1. é€šè¿‡æ—¥å¿—è§‚å¯Ÿé…ç½®ç”Ÿæ•ˆæƒ…å†µï¼š
#    - å¯åŠ¨æ—¶ä¼šæ˜¾ç¤ºè§£æçš„é…ç½®å‚æ•°
#    - é…ç½®éªŒè¯å¤±è´¥ä¼šè¾“å‡ºè¯¦ç»†é”™è¯¯ä¿¡æ¯
# 
# 2. å…³é”®æ€§èƒ½æŒ‡æ ‡ç›‘æ§ï¼š
#    - ç¼“å­˜å‘½ä¸­ç‡ï¼š>90% (SmartCache), >70% (SymbolCache)
#    - å“åº”æ—¶é—´ï¼šP95 <200ms, P99 <500ms  
#    - é”™è¯¯ç‡ï¼š<0.1%
#    - å¹¶å‘ä»»åŠ¡æ•°ï¼šä¸è¶…è¿‡é…ç½®çš„æœ€å¤§å€¼
# 
# 3. èµ„æºä½¿ç”¨ç›‘æ§ï¼š
#    - CPUä½¿ç”¨ç‡ï¼š<70%
#    - å†…å­˜ä½¿ç”¨ç‡ï¼š<80%
#    - Redisè¿æ¥æ•°ï¼šåˆç†èŒƒå›´å†…
# 
# 4. é…ç½®è°ƒä¼˜å»ºè®®ï¼š
#    - æ ¹æ®ä¸šåŠ¡åœºæ™¯è°ƒæ•´TTLå€¼
#    - åŸºäºæœåŠ¡å™¨æ€§èƒ½è°ƒæ•´å¹¶å‘æ•°
#    - ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡ï¼Œé€‚å½“è°ƒæ•´æ›´æ–°ç­–ç•¥
# =============================================================================