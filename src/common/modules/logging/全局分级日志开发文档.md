# å…¨å±€åˆ†çº§æ—¥å¿—æ§åˆ¶ç³»ç»Ÿå¼€å‘æ–‡æ¡£

## ğŸ“š ç›®å½•

- [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
- [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
- [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
- [é…ç½®ä½“ç³»](#é…ç½®ä½“ç³»)
- [é…ç½®æ–‡ä»¶ä¸ç¯å¢ƒå˜é‡å…³ç³»](#é…ç½®æ–‡ä»¶ä¸ç¯å¢ƒå˜é‡å…³ç³»)
- [å®ç°ç»†èŠ‚](#å®ç°ç»†èŠ‚)
- [APIå‚è€ƒ](#apiå‚è€ƒ)
- [è¿ç§»æŒ‡å—](#è¿ç§»æŒ‡å—)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [ç‰ˆæœ¬å†å²](#ç‰ˆæœ¬å†å²)

---

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

### è®¾è®¡ç›®æ ‡

å…¨å±€åˆ†çº§æ—¥å¿—æ§åˆ¶ç³»ç»Ÿæ˜¯ä¸€ä¸ª**åŸºäºç°æœ‰Pino Loggerå¢å¼º**çš„æ—¥å¿—çº§åˆ«æ§åˆ¶è§£å†³æ–¹æ¡ˆï¼Œä¸“é—¨ä¸ºNew Stock APIé¡¹ç›®è®¾è®¡ï¼Œæ—¨åœ¨ï¼š

1. **å¹³æ»‘è¿ç§»**ï¼šå®Œå…¨å…¼å®¹ç°æœ‰`createLogger()`APIï¼Œé›¶ä¾µå…¥å¼å‡çº§
2. **ç²¾å‡†æ§åˆ¶**ï¼šæ”¯æŒå…¨å±€å’Œæ¨¡å—ä¸¤çº§æ—¥å¿—æ§åˆ¶ï¼ˆç®€åŒ–æ¶æ„ï¼Œé™ä½å¤æ‚åº¦ï¼‰
3. **é…ç½®æ–‡ä»¶ä¼˜å…ˆ**ï¼šé‡‡ç”¨JSONé…ç½®æ–‡ä»¶ + ç¯å¢ƒå˜é‡è¦†ç›–çš„ç¨³å®šé…ç½®ç­–ç•¥
4. **æ¸è¿›å¢å¼º**ï¼šåˆ†é˜¶æ®µå®æ–½ï¼Œæ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆï¼Œé«˜çº§ç‰¹æ€§æŒ‰éœ€æ‰©å±•
5. **ç”Ÿäº§å°±ç»ª**ï¼šé‡ç‚¹å…³æ³¨æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œé€‚åˆé«˜å¹¶å‘åœºæ™¯

### æ ¸å¿ƒç‰¹æ€§ï¼ˆåˆ†é˜¶æ®µå®ç°ï¼‰

#### ğŸ¯ ç¬¬ä¸€é˜¶æ®µï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- âœ… **ä¸¤çº§æ§åˆ¶ä½“ç³»**ï¼šå…¨å±€çº§åˆ« â†’ æ¨¡å—çº§åˆ«ï¼ˆç®€åŒ–å®ç°ï¼‰
- âœ… **é…ç½®æ–‡ä»¶é©±åŠ¨**ï¼šJSONé…ç½®æ–‡ä»¶ä¸ºä¸»ï¼Œç¯å¢ƒå˜é‡ä¸ºè¾…
- âœ… **ç°æœ‰APIå…¼å®¹**ï¼šä¿æŒ`createLogger()`å‡½æ•°å®Œå…¨å…¼å®¹
- âœ… **åŸºç¡€æ€§èƒ½ä¼˜åŒ–**ï¼šçº§åˆ«æ£€æŸ¥ç¼“å­˜ï¼Œ5ç§’è¿‡æœŸ

#### ğŸ”„ ç¬¬äºŒé˜¶æ®µï¼ˆæ‰©å±•åŠŸèƒ½ï¼‰
- ğŸ”„ **REST APIç®¡ç†**ï¼šåŠ¨æ€é…ç½®æ›´æ–°ï¼ˆå¯é€‰ç‰¹æ€§ï¼‰
- ğŸ”„ **å‘½åç©ºé—´é€šé…ç¬¦**ï¼š`*Service`ã€`*Controller`åŒ¹é…ï¼ˆæŒ‰éœ€å®ç°ï¼‰
- ğŸ”„ **é«˜çº§æ€§èƒ½ä¼˜åŒ–**ï¼šå¤šå±‚ç¼“å­˜ã€é¢„è®¡ç®—ï¼ˆæ€§èƒ½ç“¶é¢ˆæ—¶å†å®ç°ï¼‰
- ğŸ”„ **ç›‘æ§é›†æˆ**ï¼šä¸ç°æœ‰ç›‘æ§ç³»ç»Ÿé›†æˆ

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     åº”ç”¨å±‚ (Application Layer)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   MonitoringService â”‚ AuthService â”‚ CacheService â”‚ ...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ ä½¿ç”¨
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ControlledLogger (å—æ§æ—¥å¿—å™¨)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æä¾›æ ‡å‡†æ—¥å¿—æ¥å£ï¼šdebug, info, warn, error      â”‚   â”‚
â”‚  â”‚  é›†æˆçº§åˆ«æ£€æŸ¥ï¼šisDebugEnabled, isInfoEnabled    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ æŸ¥è¯¢
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           LogLevelController (çº§åˆ«æ§åˆ¶å™¨-å•ä¾‹)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  é…ç½®ç®¡ç† â”‚ çº§åˆ«è®¡ç®— â”‚ ç¼“å­˜ä¼˜åŒ– â”‚ åŠ¨æ€æ›´æ–°       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ è¯»å–
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  é…ç½®æº (Configuration Sources)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¯å¢ƒå˜é‡      â”‚ é…ç½®æ–‡ä»¶      â”‚ REST API                 â”‚
â”‚ (.env)       â”‚ (log-levels.json) â”‚ (/api/admin/log-levels) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çº§åˆ«ä¼˜å…ˆçº§ï¼ˆç®€åŒ–ç‰ˆï¼‰

æ—¥å¿—çº§åˆ«æ£€æŸ¥æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§é¡ºåºè¿›è¡Œï¼ˆç¬¬ä¸€é˜¶æ®µå®ç°ï¼‰ï¼š

1. **æ¨¡å—çº§åˆ«**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰ï¼šç²¾ç¡®åŒ¹é…æ¨¡å—åç§°
2. **å…¨å±€çº§åˆ«**ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰ï¼šé»˜è®¤çº§åˆ«

> **æ³¨æ„**: å‘½åç©ºé—´çº§åˆ«é€šé…ç¬¦åŒ¹é…å°†åœ¨ç¬¬äºŒé˜¶æ®µæŒ‰éœ€å®ç°

### æ—¥å¿—çº§åˆ«å±‚æ¬¡

```
silent < fatal < error < warn < info < debug < trace
  0       1       2      3      4      5       6
```

---

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### 1. LogLevelControllerï¼ˆçº§åˆ«æ§åˆ¶å™¨ï¼‰

**æ–‡ä»¶ä½ç½®**ï¼š`src/common/logging/log-level-controller.ts`

#### ä¸»è¦èŒè´£
- ç®¡ç†å…¨å±€æ—¥å¿—çº§åˆ«é…ç½®
- è®¡ç®—ç‰¹å®šä¸Šä¸‹æ–‡çš„æ—¥å¿—çº§åˆ«
- æä¾›åŠ¨æ€æ›´æ–°æ¥å£
- ä¼˜åŒ–æ€§èƒ½ï¼ˆç¼“å­˜æœºåˆ¶ï¼‰

#### æ ¸å¿ƒæ–¹æ³•

```typescript
class LogLevelController {
  // æ£€æŸ¥æ˜¯å¦åº”è¯¥è®°å½•æ—¥å¿—
  shouldLog(context: string, level: LogLevel): boolean
  
  // åŠ¨æ€æ›´æ–°æ—¥å¿—çº§åˆ«
  updateLogLevel(target: string, level: LogLevel, type: 'module' | 'namespace' | 'global'): void
  
  // è·å–å½“å‰é…ç½®
  getConfiguration(): any
  
  // æ‰¹é‡æ›´æ–°
  batchUpdate(updates: Array<UpdateConfig>): void
  
  // é‡ç½®é…ç½®
  reset(): void
}
```

### 2. ControlledLoggerï¼ˆå—æ§æ—¥å¿—å™¨ï¼‰

**æ–‡ä»¶ä½ç½®**ï¼š`src/common/logging/controlled-logger.ts`

#### ä¸»è¦èŒè´£
- **ç»§æ‰¿ç°æœ‰CustomLogger**ï¼šåŸºäºé¡¹ç›®ç°æœ‰çš„Pino Loggerå®ç°
- **ä¿æŒAPIå®Œå…¨å…¼å®¹**ï¼šç»´æŒ`createLogger()`å‡½æ•°ç­¾åä¸å˜
- **é›†æˆçº§åˆ«æ§åˆ¶é€»è¾‘**ï¼šåœ¨æ—¥å¿—è¾“å‡ºå‰è¿›è¡Œçº§åˆ«æ£€æŸ¥

#### ä½¿ç”¨ç¤ºä¾‹ï¼ˆå®Œå…¨å…¼å®¹ç°æœ‰ä»£ç ï¼‰

```typescript
// ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹ï¼ŒcreateLoggerå‡½æ•°å†…éƒ¨å¢å¼º
import { createLogger } from "@common/logging";

export class MyService {
  private readonly logger = createLogger(MyService.name); // ç°æœ‰APIä¸å˜
  
  someMethod() {
    // æ ‡å‡†æ—¥å¿—æ–¹æ³• - å®Œå…¨å…¼å®¹
    this.logger.debug('Debug message');
    this.logger.info('Info message'); 
    this.logger.warn('Warning message');
    this.logger.error('Error message');
    
    // æ–°å¢æ€§èƒ½ä¼˜åŒ–æ–¹æ³•ï¼ˆå‘åå…¼å®¹ï¼‰
    if (this.logger.isDebugEnabled?.()) { // å¯é€‰é“¾ï¼Œç¡®ä¿å…¼å®¹æ€§
      const expensiveData = this.calculateExpensiveData();
      this.logger.debug('Debug with expensive data', expensiveData);
    }
  }
}
```

#### æ¸è¿›å¼è¿ç§»ç­–ç•¥

```typescript
// é˜¶æ®µ1ï¼šä¿æŒç°æœ‰APIï¼Œå†…éƒ¨å¢å¼ºå®ç°
export function createLogger(context: string): EnhancedLogger {
  return new ControlledLogger(context); // æ›¿æ¢å®ç°ï¼Œä¿æŒæ¥å£
}

// é˜¶æ®µ2ï¼šæ–°ä»£ç å¯é€‰æ‹©ä½¿ç”¨æ–°APIï¼ˆæ¨èï¼‰  
export function createControlledLogger(context: string): ControlledLogger {
  return new ControlledLogger(context); // æ˜¾å¼ä½¿ç”¨å¢å¼ºç‰ˆæœ¬
}
```

### 3. LogLevelManagementControllerï¼ˆç®¡ç†APIï¼‰

**æ–‡ä»¶ä½ç½®**ï¼š`src/common/logging/log-level.controller.ts`

#### REST APIç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| GET | `/api/admin/log-levels` | è·å–å½“å‰é…ç½® |
| PUT | `/api/admin/log-levels/global/:level` | æ›´æ–°å…¨å±€çº§åˆ« |
| PUT | `/api/admin/log-levels/module/:module/:level` | æ›´æ–°æ¨¡å—çº§åˆ« |
| PUT | `/api/admin/log-levels/batch` | æ‰¹é‡æ›´æ–° |
| PUT | `/api/admin/log-levels/reset` | é‡ç½®ä¸ºé»˜è®¤ |

---

## ğŸ”§ å®ç°ç»†èŠ‚

### é…ç½®åŠ è½½å’Œåˆå¹¶å®ç°

```typescript
// src/common/logging/log-level-controller.ts

export class LogLevelController implements OnModuleInit {
  private config: LogLevelConfig;
  private configFilePath: string;
  private envOverrides: Map<string, any> = new Map();
  
  /**
   * åŠ è½½é…ç½®çš„ä¸»æµç¨‹
   */
  private loadConfiguration(): void {
    // 1. åŠ è½½é»˜è®¤é…ç½®
    const defaultConfig = this.getDefaultConfig();
    
    // 2. åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆå›ºå®šé…ç½®ï¼‰
    const fileConfig = this.loadFromConfigFile();
    
    // 3. åŠ è½½ç¯å¢ƒå˜é‡ï¼ˆåŠ¨æ€è¦†ç›–ï¼‰
    const envOverrides = this.loadEnvironmentOverrides();
    
    // 4. æ™ºèƒ½åˆå¹¶é…ç½®
    this.config = this.mergeConfigurations(
      defaultConfig,
      fileConfig,
      envOverrides
    );
    
    // 5. éªŒè¯é…ç½®å®Œæ•´æ€§
    this.validateConfiguration();
    
    // 6. è®°å½•æœ€ç»ˆé…ç½®
    this.logConfiguration();
  }
  
  /**
   * ä»é…ç½®æ–‡ä»¶åŠ è½½ï¼ˆä¸»è¦é…ç½®æºï¼‰
   */
  private loadFromConfigFile(): Partial<LogLevelConfig> | null {
    // æ”¯æŒå¤šä¸ªé…ç½®æ–‡ä»¶è·¯å¾„
    const configPaths = [
      process.env.LOG_CONFIG_PATH,
      path.join(process.cwd(), 'config', 'log-levels.json'),
      path.join(process.cwd(), 'log-levels.json'),
      path.join(process.cwd(), `.log-levels.${process.env.NODE_ENV}.json`),
    ].filter(Boolean);
    
    for (const configPath of configPaths) {
      if (fs.existsSync(configPath)) {
        try {
          const content = fs.readFileSync(configPath, 'utf-8');
          const config = JSON.parse(content);
          
          console.log(`âœ… Loaded log config from: ${configPath}`);
          this.configFilePath = configPath;
          
          return this.parseFileConfig(config);
        } catch (error) {
          console.error(`âŒ Failed to load config from ${configPath}:`, error);
        }
      }
    }
    
    console.warn('âš ï¸ No log config file found, using defaults');
    return null;
  }
  
  /**
   * æ™ºèƒ½åˆå¹¶é…ç½®
   * ä¼˜å…ˆçº§: ç¯å¢ƒå˜é‡ > é…ç½®æ–‡ä»¶ > é»˜è®¤å€¼
   */
  private mergeConfigurations(
    defaultConfig: LogLevelConfig,
    fileConfig: Partial<LogLevelConfig> | null,
    envOverrides: Partial<LogLevelConfig>
  ): LogLevelConfig {
    let merged = { ...defaultConfig };
    
    if (fileConfig) {
      merged = this.deepMerge(merged, fileConfig);
    }
    
    if (envOverrides) {
      merged = this.deepMerge(merged, envOverrides);
    }
    
    return merged;
  }
}
```

### é…ç½®æ–‡ä»¶ç»„ç»‡ç»“æ„

```
config/
â”œâ”€â”€ log-levels.json                 # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ log-levels.schema.json         # JSON Schema éªŒè¯
â”œâ”€â”€ log-levels.development.json    # å¼€å‘ç¯å¢ƒè¡¥å……
â”œâ”€â”€ log-levels.production.json     # ç”Ÿäº§ç¯å¢ƒè¡¥å……
â””â”€â”€ log-levels.test.json          # æµ‹è¯•ç¯å¢ƒè¡¥å……
```

### é…ç½®éªŒè¯ Schema

```json
// config/log-levels.schema.json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "global": {
      "type": "string",
      "enum": ["fatal", "error", "warn", "info", "debug", "trace", "silent"]
    },
    "modules": {
      "type": "object",
      "additionalProperties": {
        "type": "string",
        "enum": ["fatal", "error", "warn", "info", "debug", "trace", "silent"]
      }
    },
    "namespaces": {
      "type": "object",
      "additionalProperties": {
        "type": "string",
        "enum": ["fatal", "error", "warn", "info", "debug", "trace", "silent"]
      }
    },
    "features": {
      "type": "object"
    },
    "performance": {
      "type": "object"
    },
    "output": {
      "type": "object"
    }
  },
  "required": ["global"]
}
```

### ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥

```gitignore
# .gitignore
.env                    # ä¸æäº¤ï¼ŒåŒ…å«æ•æ„Ÿä¿¡æ¯
.env.local             # ä¸æäº¤ï¼Œæœ¬åœ°è¦†ç›–

# æäº¤è¿™äº›æ–‡ä»¶
.env.development            # æäº¤ï¼Œç¤ºä¾‹é…ç½®
config/log-levels.json # æäº¤ï¼Œæ ‡å‡†é…ç½®
config/log-levels.*.json # æäº¤ï¼Œç¯å¢ƒç‰¹å®šé…ç½®
```

### å¿«é€Ÿå¼€å§‹ï¼ˆåŸºäºç°æœ‰æ¶æ„ï¼‰

#### 1. å¢å¼ºç°æœ‰logger.config.ts

```typescript
// src/appcore/config/logger.config.ts - åœ¨ç°æœ‰æ–‡ä»¶ä¸­å¢å¼º
import { LogLevelController } from '@common/logging/log-level-controller';

// å¢å¼ºç°æœ‰CustomLoggerç±»
export class EnhancedCustomLogger extends CustomLogger {
  constructor(context?: string) {
    super(context);
  }

  // é‡å†™æ—¥å¿—æ–¹æ³•ï¼Œé›†æˆçº§åˆ«æ§åˆ¶
  debug(message: any, ...optionalParams: any[]): void {
    if (this.shouldLogLevel('debug')) {
      super.debug(message, ...optionalParams);
    }
  }

  // æ–°å¢çº§åˆ«æ£€æŸ¥æ–¹æ³•ï¼ˆå‘åå…¼å®¹ï¼‰
  isDebugEnabled?(): boolean {
    return this.shouldLogLevel('debug');
  }

  private shouldLogLevel(level: string): boolean {
    return LogLevelController.getInstance().shouldLog(this.context || 'Application', level);
  }
}

// ä¿®æ”¹ç°æœ‰createLoggerå‡½æ•°ï¼Œä¿æŒAPIå…¼å®¹
export function createLogger(context: string): EnhancedCustomLogger {
  return new EnhancedCustomLogger(context); // å†…éƒ¨å‡çº§ä¸ºå¢å¼ºç‰ˆæœ¬
}
```

#### 2. åˆ›å»ºLogLevelControllerï¼ˆæ–°å¢ï¼‰

```typescript
// src/common/logging/log-level-controller.ts - æ–°å»ºæ–‡ä»¶
@Injectable()
export class LogLevelController implements OnModuleInit {
  private static instance: LogLevelController;
  private config: LogLevelConfig;
  
  static getInstance(): LogLevelController {
    if (!LogLevelController.instance) {
      LogLevelController.instance = new LogLevelController();
    }
    return LogLevelController.instance;
  }

  async onModuleInit() {
    this.loadConfiguration();
  }

  shouldLog(context: string, level: string): boolean {
    // ç®€åŒ–ç‰ˆæœ¬ï¼šæ”¯æŒå…¨å±€ + æ¨¡å—ä¸¤çº§æ§åˆ¶
    const moduleLevel = this.config.modules[context];
    const effectiveLevel = moduleLevel || this.config.global || 'info';
    return this.isLevelEnabled(level, effectiveLevel);
  }
}
```

#### 3. åˆ›å»ºé…ç½®æ–‡ä»¶ï¼ˆæ–°å¢ï¼‰

```json
// config/log-levels.json - æ–°å»ºé…ç½®æ–‡ä»¶
{
  "global": "info",
  "modules": {
    "DataFetcherService": "debug",
    "AuthService": "warn"
  },
  "features": {
    "enhancedLoggingEnabled": true
  }
}
```

#### 4. ç°æœ‰ä»£ç è‡ªåŠ¨å‡çº§ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰

```typescript
// ç°æœ‰æœåŠ¡ä»£ç ä¿æŒä¸å˜
import { createLogger } from "@common/logging";

@Injectable()
export class DataFetcherService {
  private readonly logger = createLogger(DataFetcherService.name); // APIä¸å˜
  
  async fetchData() {
    this.logger.debug('Fetching data...'); // ç°åœ¨å—çº§åˆ«æ§åˆ¶
    // ... å…¶ä»–ä»£ç æ— éœ€ä¿®æ”¹
  }
}
```

### é«˜çº§ç”¨æ³•

#### æ¡ä»¶æ—¥å¿—è®°å½•

```typescript
// é¿å…ä¸å¿…è¦çš„è®¡ç®—
if (this.logger.isDebugEnabled()) {
  // åªæœ‰åœ¨debugçº§åˆ«å¯ç”¨æ—¶æ‰æ‰§è¡Œ
  const metrics = this.calculateComplexMetrics();
  this.logger.debug('Performance metrics', metrics);
}
```

#### ç»“æ„åŒ–æ—¥å¿—

```typescript
this.logger.info('User action', {
  userId: user.id,
  action: 'login',
  timestamp: new Date().toISOString(),
  metadata: {
    ip: request.ip,
    userAgent: request.headers['user-agent'],
  }
});
```

---

## ğŸ“‹ é…ç½®ä½“ç³»

### é…ç½®è®¾è®¡åŸåˆ™

- **é…ç½®æ–‡ä»¶**ï¼šå­˜å‚¨**å›ºå®šçš„ã€ç»“æ„åŒ–çš„ã€è¯¦ç»†çš„**é…ç½®
- **ç¯å¢ƒå˜é‡**ï¼šå­˜å‚¨**å˜åŒ–çš„ã€æ•æ„Ÿçš„ã€ç¯å¢ƒç‰¹å®šçš„**é…ç½®
- **ä¼˜å…ˆçº§**ï¼šç¯å¢ƒå˜é‡è¦†ç›– > é…ç½®æ–‡ä»¶ > é»˜è®¤å€¼

### é…ç½®èŒè´£åˆ’åˆ†

#### é…ç½®æ–‡ä»¶è´Ÿè´£çš„å†…å®¹
- è¯¦ç»†çš„æ¨¡å—çº§åˆ«æ˜ å°„
- å‘½åç©ºé—´åŒ¹é…è§„åˆ™
- åŠŸèƒ½ç‰¹æ€§å¼€å…³
- æ€§èƒ½å‚æ•°è®¾ç½®
- è¾“å‡ºæ ¼å¼é…ç½®
- é€šç”¨ä¸šåŠ¡è§„åˆ™

#### ç¯å¢ƒå˜é‡è´Ÿè´£çš„å†…å®¹
- ç¯å¢ƒæ ‡è¯†ï¼ˆNODE_ENVï¼‰
- ä¸´æ—¶è°ƒè¯•è¦†ç›–
- æ•æ„Ÿä¿¡æ¯ï¼ˆAPIå¯†é’¥ã€URLï¼‰
- ç¯å¢ƒç‰¹å®šè·¯å¾„
- ç´§æ€¥è°ƒæ•´å¼€å…³
- å¤–éƒ¨æœåŠ¡é…ç½®

---

## ğŸ”„ é…ç½®æ–‡ä»¶ä¸ç¯å¢ƒå˜é‡å…³ç³»

### é…ç½®åŠ è½½æµç¨‹ï¼ˆä¼˜åŒ–ç‰ˆæœ¬ï¼‰

```
å¯åŠ¨åº”ç”¨
    â”‚
    â–¼
åŠ è½½é»˜è®¤é…ç½®ï¼ˆç¡¬ç¼–ç ï¼‰
    â”‚
    â–¼
æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼ˆä¼˜å…ˆçº§é¡ºåºï¼‰
    â”‚
    â”œâ”€â–º config/log-levels.json ï¼ˆæ¨èä½ç½®ï¼‰
    â”œâ”€â–º LOG_CONFIG_PATH ç¯å¢ƒå˜é‡æŒ‡å®šè·¯å¾„
    â”œâ”€â–º log-levels.json
    â””â”€â–º log-levels.{NODE_ENV}.json
    â”‚
    â–¼
åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
    â”‚
    â–¼
ç¯å¢ƒå˜é‡ä¸´æ—¶è¦†ç›–ï¼ˆç´§æ€¥è°ƒè¯•ç”¨ï¼‰
    â”‚
    â”œâ”€â–º LOG_LEVELï¼ˆä¸´æ—¶å…¨å±€çº§åˆ«è¦†ç›–ï¼‰
    â”œâ”€â–º LOG_DEBUG_MODULEï¼ˆä¸´æ—¶æ¨¡å—è°ƒè¯•ï¼‰
    â””â”€â–º ENHANCED_LOGGING_ENABLEDï¼ˆåŠŸèƒ½å¼€å…³ï¼‰
    â”‚
    â–¼
åˆå¹¶é…ç½®ï¼ˆé…ç½®æ–‡ä»¶ > ç¯å¢ƒå˜é‡ > é»˜è®¤å€¼ï¼‰
    â”‚
    â–¼
éªŒè¯é…ç½®å®Œæ•´æ€§ + é™çº§ç­–ç•¥
    â”‚
    â–¼
åº”ç”¨æœ€ç»ˆé…ç½®
```

> **é‡è¦å˜æ›´**: é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§é«˜äºç¯å¢ƒå˜é‡ï¼Œæä¾›æ›´ç¨³å®šçš„ç”Ÿäº§ç¯å¢ƒé…ç½®

### æ ‡å‡†é…ç½®æ–‡ä»¶ç»“æ„ï¼ˆconfig/log-levels.jsonï¼‰

```json
{
  "$schema": "./log-levels.schema.json", 
  "version": "1.0.0",
  "description": "New Stock API æ—¥å¿—çº§åˆ«é…ç½® - åŸºäºç°æœ‰ç»„ä»¶ä¼˜åŒ–",
  
  "global": "info",
  
  "modules": {
    "// æ ¸å¿ƒæ•°æ®æµç»„ä»¶": "======================",
    "DataFetcherService": "info",
    "TransformerService": "warn", 
    "StorageService": "warn",
    "QueryService": "info",
    "ReceiverService": "info",
    
    "// ç›‘æ§å’Œç¼“å­˜ç»„ä»¶": "======================",
    "MonitoringEventBridge": "info",
    "CacheService": "info",
    "SmartCacheOrchestrator": "warn",
    "SymbolMapperService": "warn",
    
    "// è®¤è¯å’Œå®‰å…¨ç»„ä»¶": "======================", 
    "AuthService": "warn",
    "ApiKeyAuthGuard": "error",
    "JwtAuthGuard": "error",
    "RateLimitGuard": "warn",
    
    "// æä¾›å•†é›†æˆç»„ä»¶": "======================",
    "LongportProvider": "warn",
    "ProviderService": "info",
    "EnhancedCapabilityRegistryService": "warn",
    
    "// é€šçŸ¥å’Œå‘Šè­¦ç»„ä»¶": "======================",
    "NotificationService": "info",
    "AlertService": "info",
    "TemplateService": "warn"
  },
  
  "features": {
    "enhancedLoggingEnabled": true,
    "levelCacheEnabled": true,
    "structuredLogging": true,
    "performanceMode": false
  },
  
  "performance": {
    "cacheEnabled": true,
    "cacheExpiry": 5000,
    "maxCacheSize": 500
  }
}
```

> **ç®€åŒ–è¯´æ˜**: ç¬¬ä¸€é˜¶æ®µæš‚æ—¶ç§»é™¤äº†`namespaces`å’Œ`output`é…ç½®ï¼Œé™ä½å¤æ‚åº¦ï¼Œä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½

### ç¯å¢ƒå˜é‡é…ç½®ï¼ˆç®€åŒ–ç‰ˆï¼‰

```bash
# .env æ–‡ä»¶ - ä»…ç”¨äºä¸´æ—¶è¦†ç›–å’ŒåŠŸèƒ½å¼€å…³

# ============= åŠŸèƒ½å¼€å…³ =============
ENHANCED_LOGGING_ENABLED=true              # å¯ç”¨å¢å¼ºæ—¥å¿—åŠŸèƒ½
LOG_LEVEL_CACHE_ENABLED=true               # å¯ç”¨çº§åˆ«æ£€æŸ¥ç¼“å­˜

# ============= ä¸´æ—¶è°ƒè¯•è¦†ç›– =============
LOG_LEVEL=debug                             # ä¸´æ—¶è¦†ç›–å…¨å±€çº§åˆ«ï¼ˆç´§æ€¥è°ƒè¯•ï¼‰
LOG_DEBUG_MODULE=DataFetcherService         # ä¸´æ—¶å¯ç”¨ç‰¹å®šæ¨¡å—debugï¼ˆé€—å·åˆ†éš”å¤šä¸ªï¼‰

# ============= é…ç½®è·¯å¾„ =============
LOG_CONFIG_PATH=./config/log-levels.json    # è‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå¯é€‰ï¼‰
```

> **é‡è¦å˜æ›´**: 
> 1. ç§»é™¤å¤æ‚çš„æ¨¡å—å’Œå‘½åç©ºé—´ç¯å¢ƒå˜é‡é…ç½®
> 2. ç¯å¢ƒå˜é‡ä¸»è¦ç”¨äºåŠŸèƒ½å¼€å…³å’Œç´§æ€¥è°ƒè¯•åœºæ™¯
> 3. ç¨³å®šé…ç½®é€šè¿‡JSONæ–‡ä»¶ç®¡ç†

### ç¯å¢ƒç‰¹å®šé…ç½®ç¤ºä¾‹

#### å¼€å‘ç¯å¢ƒï¼ˆ.env.developmentï¼‰
```bash
# ç¯å¢ƒæ ‡è¯†
NODE_ENV=development

# è¦†ç›–å…¨å±€çº§åˆ«ï¼ˆä¸´æ—¶è°ƒè¯•ï¼‰
LOG_LEVEL=debug

# ä¸´æ—¶è°ƒè¯•ç‰¹å®šæ¨¡å—
LOG_LEVEL_OVERRIDE_MODULE=DatabaseService:trace

# å¼€å‘ç‰¹å®šè®¾ç½®
LOG_TO_FILE=false
LOG_CONFIG_DEBUG=true
```

#### ç”Ÿäº§ç¯å¢ƒï¼ˆ.env.productionï¼‰
```bash
# ç¯å¢ƒæ ‡è¯†
NODE_ENV=production

# ä½¿ç”¨é…ç½®æ–‡ä»¶çš„è®¾ç½®ï¼Œä¸è¦†ç›–
# LOG_LEVEL ä¸è®¾ç½®ï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶çš„ "info"

# è¿œç¨‹æ—¥å¿—æœåŠ¡ï¼ˆæ•æ„Ÿä¿¡æ¯ï¼‰
LOG_REMOTE_URL=https://logs.company.com/api
LOG_REMOTE_API_KEY=${SECRET_LOG_API_KEY}

# ç”Ÿäº§ç‰¹å®šè®¾ç½®
LOG_TO_FILE=true
LOG_FILE_PATH=/var/log/application
LOG_TO_REMOTE=true

# æ€§èƒ½ä¼˜åŒ–
LOG_PERFORMANCE_MODE=true
```

#### æµ‹è¯•ç¯å¢ƒï¼ˆ.env.testï¼‰
```bash
# ç¯å¢ƒæ ‡è¯†
NODE_ENV=test

# æµ‹è¯•æ—¶é™é»˜å¤§éƒ¨åˆ†æ—¥å¿—
LOG_LEVEL=error

# ç¦ç”¨ä¸å¿…è¦çš„åŠŸèƒ½
DYNAMIC_LOG_LEVEL=false
LOG_TO_FILE=false
LOG_TO_REMOTE=false
```

### ç¯å¢ƒç‰¹å®šé…ç½®æ–‡ä»¶

```json
// config/log-levels.development.json
{
  "global": "info",
  "modules": {
    "MonitoringEventBridge": "debug",
    "MonitoringCacheService": "info",
    "CollectorService": "warn",
    "AnalyzerService": "debug",
    "PresenterService": "info",
    "AuthService": "warn",
    "DatabaseService": "error",
    "CacheService": "info"
  },
  "namespaces": {
    "*Service": "info",
    "*Controller": "debug",
    "Monitor*": "debug",
    "*Repository": "warn",
    "*Handler": "info",
    "*Interceptor": "debug",
    "Test*": "silent"
  },
  "dynamicEnabled": true,
  "performanceMode": true
}
```

### é…ç½®ä¼˜å…ˆçº§

å½“å¤šä¸ªé…ç½®æºå­˜åœ¨æ—¶ï¼ŒæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§ç”Ÿæ•ˆï¼š

1. **é…ç½®æ–‡ä»¶** (`log-levels.json`) - æœ€é«˜ä¼˜å…ˆçº§
2. **ç¯å¢ƒå˜é‡** (`.env`) - ä¸­ç­‰ä¼˜å…ˆçº§
3. **é»˜è®¤å€¼** - æœ€ä½ä¼˜å…ˆçº§

---

## ğŸ”Œ APIå‚è€ƒ

### LogLevelController API

```typescript
interface LogLevelController {
  /**
   * æ£€æŸ¥æŒ‡å®šä¸Šä¸‹æ–‡å’Œçº§åˆ«æ˜¯å¦åº”è¯¥è®°å½•
   * @param context - æ—¥å¿—ä¸Šä¸‹æ–‡ï¼ˆç±»åã€æ¨¡å—åç­‰ï¼‰
   * @param level - æ—¥å¿—çº§åˆ«
   * @returns æ˜¯å¦åº”è¯¥è®°å½•
   */
  shouldLog(context: string, level: LogLevel): boolean;
  
  /**
   * åŠ¨æ€æ›´æ–°æ—¥å¿—çº§åˆ«
   * @param target - ç›®æ ‡ï¼ˆæ¨¡å—åã€å‘½åç©ºé—´æˆ–ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºå…¨å±€ï¼‰
   * @param level - æ–°çš„æ—¥å¿—çº§åˆ«
   * @param type - æ›´æ–°ç±»å‹
   */
  updateLogLevel(
    target: string,
    level: LogLevel,
    type: 'module' | 'namespace' | 'global'
  ): void;
  
  /**
   * è·å–å½“å‰é…ç½®
   * @returns é…ç½®å¯¹è±¡
   */
  getConfiguration(): LogLevelConfig;
  
  /**
   * æ‰¹é‡æ›´æ–°é…ç½®
   * @param updates - æ›´æ–°æ•°ç»„
   */
  batchUpdate(updates: UpdateConfig[]): void;
  
  /**
   * é‡ç½®ä¸ºé»˜è®¤é…ç½®
   */
  reset(): void;
}
```

### ControlledLogger API

```typescript
interface ControlledLogger {
  // æ ‡å‡†æ—¥å¿—æ–¹æ³•
  debug(message: any, ...optionalParams: any[]): void;
  log(message: any, ...optionalParams: any[]): void;
  info(message: any, ...optionalParams: any[]): void;
  warn(message: any, ...optionalParams: any[]): void;
  error(message: any, ...optionalParams: any[]): void;
  verbose(message: any, ...optionalParams: any[]): void;
  
  // çº§åˆ«æ£€æŸ¥æ–¹æ³•
  isDebugEnabled(): boolean;
  isInfoEnabled(): boolean;
  isWarnEnabled(): boolean;
  isErrorEnabled(): boolean;
  isVerboseEnabled(): boolean;
}
```

### REST API

#### è·å–é…ç½®
```http
GET /api/admin/log-levels
Authorization: Bearer {admin-token}

Response:
{
  "global": "info",
  "modules": {
    "monitoring": "debug",
    "auth": "warn"
  },
  "namespaces": {
    "*Service": "info"
  },
  "dynamicEnabled": true,
  "performanceMode": true,
  "cacheSize": 42
}
```

#### æ›´æ–°å…¨å±€çº§åˆ«
```http
PUT /api/admin/log-levels/global/debug
Authorization: Bearer {admin-token}

Response:
{
  "message": "Global log level updated",
  "level": "debug"
}
```

#### æ‰¹é‡æ›´æ–°
```http
PUT /api/admin/log-levels/batch
Authorization: Bearer {admin-token}
Content-Type: application/json

Body:
[
  { "target": "monitoring", "level": "debug", "type": "module" },
  { "target": "*Controller", "level": "info", "type": "namespace" }
]

Response:
{
  "message": "Batch update completed",
  "count": 2
}
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. å‘½åè§„èŒƒ

ä½¿ç”¨æ¸…æ™°ã€ä¸€è‡´çš„å‘½åè§„èŒƒæœ‰åŠ©äºæ—¥å¿—ç®¡ç†ï¼š

```typescript
// âœ… æ¨èï¼šä½¿ç”¨ç±»åä½œä¸ºcontext
private readonly logger = createControlledLogger(MonitoringService.name);

// âœ… æ¨èï¼šä½¿ç”¨æ¨¡å—åä½œä¸ºcontext
private readonly logger = createControlledLogger('monitoring.cache');

// âŒ é¿å…ï¼šä½¿ç”¨æ¨¡ç³Šçš„åç§°
private readonly logger = createControlledLogger('service');
```

### 2. æ€§èƒ½ä¼˜åŒ–

#### ä½¿ç”¨çº§åˆ«æ£€æŸ¥é¿å…ä¸å¿…è¦çš„è®¡ç®—

```typescript
// âœ… æ¨èï¼šå…ˆæ£€æŸ¥çº§åˆ«
if (this.logger.isDebugEnabled()) {
  const stats = this.calculateStatistics(); // æ˜‚è´µçš„æ“ä½œ
  this.logger.debug('Statistics', stats);
}

// âŒ é¿å…ï¼šæ€»æ˜¯æ‰§è¡Œè®¡ç®—
this.logger.debug('Statistics', this.calculateStatistics());
```

#### å¯ç”¨æ€§èƒ½æ¨¡å¼

```bash
# åœ¨ç”Ÿäº§ç¯å¢ƒå¯ç”¨æ€§èƒ½æ¨¡å¼
LOG_PERFORMANCE_MODE=true
```

### 3. ç»“æ„åŒ–æ—¥å¿—

ä½¿ç”¨ç»“æ„åŒ–æ•°æ®è€Œéå­—ç¬¦ä¸²æ‹¼æ¥ï¼š

```typescript
// âœ… æ¨èï¼šç»“æ„åŒ–æ•°æ®
this.logger.info('Request processed', {
  requestId: req.id,
  userId: user.id,
  duration: endTime - startTime,
  status: 'success'
});

// âŒ é¿å…ï¼šå­—ç¬¦ä¸²æ‹¼æ¥
this.logger.info(`Request ${req.id} for user ${user.id} took ${endTime - startTime}ms`);
```

### 4. é”™è¯¯æ—¥å¿—

å§‹ç»ˆåŒ…å«é”™è¯¯å †æ ˆå’Œä¸Šä¸‹æ–‡ï¼š

```typescript
catch (error) {
  this.logger.error('Operation failed', {
    error: error.message,
    stack: error.stack,
    context: {
      userId: user.id,
      operation: 'updateProfile',
      params: { ...params, password: '[REDACTED]' }
    }
  });
}
```

### 5. ç¯å¢ƒç‰¹å®šé…ç½®

ä¸ºä¸åŒç¯å¢ƒè®¾ç½®é€‚å½“çš„æ—¥å¿—çº§åˆ«ï¼š

```bash
# .env.development
LOG_LEVEL=debug
LOG_LEVEL_MODULES=*:debug

# .env.production
LOG_LEVEL=info
LOG_LEVEL_MODULES=monitoring:warn,auth:error,critical:info

# .env.test
LOG_LEVEL=error
LOG_LEVEL_MODULES=*:error
```

---

## ğŸ”„ æ¸è¿›å¼è¿ç§»æŒ‡å—

### é›¶é£é™©è¿ç§»ç­–ç•¥ï¼ˆæ¨èï¼‰

#### é˜¶æ®µ1ï¼šåŸºç¡€æ¶æ„æ­å»ºï¼ˆWeek 1ï¼‰

```bash
# 1. åˆ›å»ºé…ç½®ç›®å½•å’Œæ–‡ä»¶
mkdir -p config
touch config/log-levels.json

# 2. åˆ›å»ºæ—¥å¿—æ§åˆ¶å™¨
mkdir -p src/common/logging  
touch src/common/logging/log-level-controller.ts

# 3. æ·»åŠ åŠŸèƒ½å¼€å…³åˆ°ç¯å¢ƒå˜é‡
echo "ENHANCED_LOGGING_ENABLED=false" >> .env  # é»˜è®¤å…³é—­ï¼Œç¡®ä¿å®‰å…¨
```

#### é˜¶æ®µ2ï¼šå†…éƒ¨å¢å¼ºå®ç°ï¼ˆWeek 2ï¼‰

```typescript
// åœ¨ç°æœ‰ logger.config.ts ä¸­å¢å¼ºå®ç°
// ä¿æŒæ‰€æœ‰ç°æœ‰APIä¸å˜ï¼Œå†…éƒ¨é€æ­¥å¢å¼º

// 1. æ·»åŠ åŠŸèƒ½å¼€å…³ä¿æŠ¤
const enhancedLoggingEnabled = process.env.ENHANCED_LOGGING_ENABLED === 'true';

export function createLogger(context: string): CustomLogger {
  if (enhancedLoggingEnabled) {
    return new EnhancedCustomLogger(context); // æ–°ç‰ˆæœ¬
  }
  return new CustomLogger(context); // ä¿æŒåŸç‰ˆæœ¬
}

// 2. æ–°å¢çº§åˆ«æ£€æŸ¥æ–¹æ³•ï¼ˆå‘åå…¼å®¹ï¼‰
CustomLogger.prototype.isDebugEnabled = function() {
  return enhancedLoggingEnabled 
    ? LogLevelController.getInstance().shouldLog(this.context, 'debug')
    : this.isDebugEnabled(); // åŸæœ‰é€»è¾‘
};
```

#### é˜¶æ®µ3ï¼šåˆ†ç»„æµ‹è¯•éªŒè¯ï¼ˆWeek 3ï¼‰

```bash
# 1. é€æ­¥å¼€å¯ç‰¹å®šæ¨¡å—æµ‹è¯•
LOG_DEBUG_MODULE=DataFetcherService ENHANCED_LOGGING_ENABLED=true npm run dev

# 2. éªŒè¯é…ç½®æ–‡ä»¶åŠ è½½
cat config/log-levels.json
curl -s http://localhost:3000/health | jq .logging # å¦‚æœæœ‰å¥åº·æ£€æŸ¥

# 3. æ€§èƒ½å¯¹æ¯”æµ‹è¯•
npm run test:performance -- --grep="logging"
```

#### é˜¶æ®µ4ï¼šå…¨é¢å¯ç”¨å’Œä¼˜åŒ–ï¼ˆWeek 4ï¼‰

```bash
# 1. ç”Ÿäº§ç¯å¢ƒå¯ç”¨
ENHANCED_LOGGING_ENABLED=true

# 2. æ·»åŠ ç›‘æ§å’ŒæŒ‡æ ‡
# 3. æ€§èƒ½ä¼˜åŒ–å’Œç¼“å­˜è°ƒä¼˜
```

### é£é™©ç¼“è§£ç­–ç•¥

#### 1. åŠŸèƒ½é™çº§æœºåˆ¶

```typescript
// è‡ªåŠ¨é™çº§åˆ°åŸç‰ˆæœ¬çš„ä¿æŠ¤æœºåˆ¶
export class SafeLogLevelController {
  shouldLog(context: string, level: string): boolean {
    try {
      return this.performLevelCheck(context, level);
    } catch (error) {
      console.warn('æ—¥å¿—çº§åˆ«æ£€æŸ¥å¤±è´¥ï¼Œé™çº§åˆ°é»˜è®¤è¡Œä¸º', error);
      return true; // é™çº§ï¼šå…è®¸æ‰€æœ‰æ—¥å¿—è¾“å‡º
    }
  }
}
```

#### 2. é…ç½®æ–‡ä»¶éªŒè¯

```typescript
// é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥æ—¶çš„å¤„ç†
private loadConfiguration(): LogLevelConfig {
  try {
    const config = this.loadFromFile();
    this.validateConfig(config);
    return config;
  } catch (error) {
    console.warn('é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®', error);
    return this.getDefaultConfig(); // å®‰å…¨çš„é»˜è®¤é…ç½®
  }
}
```

#### 3. æ€§èƒ½ç›‘æ§

```typescript
// æ€§èƒ½å½±å“ç›‘æ§
const startTime = Date.now();
const shouldLog = this.shouldLog(context, level);
const duration = Date.now() - startTime;

if (duration > 5) { // è¶…è¿‡5msè®°å½•è­¦å‘Š
  console.warn(`æ—¥å¿—çº§åˆ«æ£€æŸ¥è€—æ—¶è¿‡é•¿: ${duration}ms`);
}
```

### å…¼å®¹æ€§ä¿è¯

#### 100%å‘åå…¼å®¹æ‰¿è¯º

```typescript
// âœ… ç°æœ‰ä»£ç å®Œå…¨æ— éœ€ä¿®æ”¹
import { createLogger } from "@common/logging";

export class ExistingService {
  private readonly logger = createLogger(ExistingService.name);
  
  someMethod() {
    this.logger.debug('ç°æœ‰è°ƒç”¨'); // å®Œå…¨å…¼å®¹
    this.logger.info('æ•°æ®', { key: 'value' }); // å®Œå…¨å…¼å®¹
    this.logger.error('é”™è¯¯', error); // å®Œå…¨å…¼å®¹
  }
}
```

#### æ¸è¿›å¼APIå¢å¼º

```typescript
// âœ… æ–°åŠŸèƒ½é€šè¿‡å¯é€‰æ–¹æ³•æä¾›
if (logger.isDebugEnabled?.()) { // å¯é€‰é“¾ç¡®ä¿å…¼å®¹
  logger.debug('æ˜‚è´µæ“ä½œç»“æœ', expensiveData);
}

// âœ… TypeScriptç±»å‹å…¼å®¹
interface EnhancedLogger extends CustomLogger {
  isDebugEnabled?(): boolean;  // å¯é€‰æ–¹æ³•ï¼Œä¸ç ´åç°æœ‰æ¥å£
  isInfoEnabled?(): boolean;
}
```

---

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ—¥å¿—æœªæŒ‰é¢„æœŸè¾“å‡º

**ç—‡çŠ¶**ï¼šè®¾ç½®äº†debugçº§åˆ«ä½†æœªçœ‹åˆ°debugæ—¥å¿—

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $LOG_LEVEL
echo $LOG_LEVEL_MODULES

# 2. æ£€æŸ¥é…ç½®æ–‡ä»¶
cat log-levels.json

# 3. é€šè¿‡APIæŸ¥çœ‹è¿è¡Œæ—¶é…ç½®
curl http://localhost:3000/api/admin/log-levels

# 4. æ£€æŸ¥contextåç§°åŒ¹é…
# ç¡®ä¿loggerçš„contextä¸é…ç½®åŒ¹é…
```

#### 2. æ€§èƒ½é—®é¢˜

**ç—‡çŠ¶**ï¼šæ—¥å¿—ç³»ç»Ÿé€ æˆæ€§èƒ½ä¸‹é™

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å¯ç”¨æ€§èƒ½æ¨¡å¼
LOG_PERFORMANCE_MODE=true

# å‡å°‘æ—¥å¿—çº§åˆ«
LOG_LEVEL=warn

# ç¦ç”¨ä¸å¿…è¦çš„æ¨¡å—æ—¥å¿—
LOG_LEVEL_MODULES=critical:info,monitoring:warn
```

#### 3. é…ç½®æœªç”Ÿæ•ˆ

**ç—‡çŠ¶**ï¼šä¿®æ”¹é…ç½®åæœªç”Ÿæ•ˆ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// æ‰‹åŠ¨è§¦å‘é…ç½®é‡è½½
logLevelController.reset();

// æˆ–é€šè¿‡API
curl -X PUT http://localhost:3000/api/admin/log-levels/reset
```

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è°ƒè¯•æ¨¡å¼æŸ¥çœ‹æ—¥å¿—ç³»ç»Ÿå†…éƒ¨è¿è¡Œï¼š

```bash
# ç¯å¢ƒå˜é‡
DEBUG_LOG_SYSTEM=true
LOG_LEVEL=trace

# æŸ¥çœ‹å†…éƒ¨æ—¥å¿—
tail -f logs/system.log | grep LogLevelController
```

### å¥åº·æ£€æŸ¥

```typescript
// æ·»åŠ å¥åº·æ£€æŸ¥ç«¯ç‚¹
@Get('/health/logging')
async checkLoggingHealth() {
  const config = this.logLevelController.getConfiguration();
  return {
    status: 'healthy',
    config: config,
    cacheSize: config.cacheSize,
    performanceMode: config.performanceMode,
  };
}
```

---

## âš¡ æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜æœºåˆ¶

ç³»ç»Ÿä½¿ç”¨å¤šçº§ç¼“å­˜ä¼˜åŒ–æ€§èƒ½ï¼š

```typescript
// ç¼“å­˜é…ç½®
{
  cacheExpiry: 5000,        // 5ç§’è¿‡æœŸ
  maxCacheSize: 1000,       // æœ€å¤§ç¼“å­˜æ¡ç›®
  performanceMode: true,    // å¯ç”¨æ€§èƒ½æ¨¡å¼
}
```

### æ€§èƒ½æŒ‡æ ‡

å…¸å‹æ€§èƒ½æŒ‡æ ‡ï¼ˆåŸºäº1000æ¬¡/ç§’æ—¥å¿—è°ƒç”¨ï¼‰ï¼š

| æ“ä½œ | æ— ç¼“å­˜ | æœ‰ç¼“å­˜ | æ€§èƒ½æ¨¡å¼ |
|------|--------|--------|----------|
| shouldLogæ£€æŸ¥ | 0.5ms | 0.05ms | 0.01ms |
| å†…å­˜ä½¿ç”¨ | åŸºå‡† | +10KB | +50KB |
| CPUä½¿ç”¨ç‡ | åŸºå‡† | -30% | -50% |

### ä¼˜åŒ–å»ºè®®

1. **ç”Ÿäº§ç¯å¢ƒ**ï¼šå§‹ç»ˆå¯ç”¨æ€§èƒ½æ¨¡å¼
2. **é«˜é¢‘æ—¥å¿—**ï¼šä½¿ç”¨çº§åˆ«æ£€æŸ¥é¿å…ä¸å¿…è¦çš„æ—¥å¿—
3. **æ‰¹é‡æ“ä½œ**ï¼šä½¿ç”¨æ‰¹é‡æ›´æ–°APIå‡å°‘å¼€é”€
4. **å®šæœŸæ¸…ç†**ï¼šé…ç½®åˆç†çš„ç¼“å­˜è¿‡æœŸæ—¶é—´

### åŸºå‡†æµ‹è¯•

```typescript
// benchmark.ts
import { createControlledLogger } from '@common/logging/controlled-logger';

const logger = createControlledLogger('BenchmarkTest');
const iterations = 100000;

console.time('Performance Test');
for (let i = 0; i < iterations; i++) {
  if (logger.isDebugEnabled()) {
    logger.debug(`Test message ${i}`);
  }
}
console.timeEnd('Performance Test');

// é¢„æœŸç»“æœï¼š
// æ€§èƒ½æ¨¡å¼å¼€å¯: ~500ms
// æ€§èƒ½æ¨¡å¼å…³é—­: ~1500ms
```

---

## ğŸ“Š ç›‘æ§å’ŒæŒ‡æ ‡

### é›†æˆPrometheusæŒ‡æ ‡

```typescript
// æ·»åŠ æ—¥å¿—ç³»ç»ŸæŒ‡æ ‡
@Injectable()
export class LoggingMetricsService {
  private readonly logCallsCounter = new Counter({
    name: 'log_calls_total',
    help: 'Total number of log calls',
    labelNames: ['level', 'module'],
  });
  
  private readonly cacheHitRate = new Gauge({
    name: 'log_cache_hit_rate',
    help: 'Log level cache hit rate',
  });
  
  trackLogCall(level: string, module: string) {
    this.logCallsCounter.inc({ level, module });
  }
  
  updateCacheMetrics(hits: number, total: number) {
    this.cacheHitRate.set(hits / total);
  }
}
```

### Grafanaä»ªè¡¨æ¿é…ç½®

```json
{
  "dashboard": {
    "title": "æ—¥å¿—ç³»ç»Ÿç›‘æ§",
    "panels": [
      {
        "title": "æ—¥å¿—è°ƒç”¨é¢‘ç‡",
        "targets": [
          {
            "expr": "rate(log_calls_total[5m])"
          }
        ]
      },
      {
        "title": "ç¼“å­˜å‘½ä¸­ç‡",
        "targets": [
          {
            "expr": "log_cache_hit_rate"
          }
        ]
      }
    ]
  }
}
```

---

## ğŸ” å®‰å…¨è€ƒè™‘

### è®¿é—®æ§åˆ¶

ç®¡ç†APIå¿…é¡»æ·»åŠ é€‚å½“çš„æƒé™æ§åˆ¶ï¼š

```typescript
@Controller('api/admin/log-levels')
@UseGuards(AdminGuard) // ä»…ç®¡ç†å‘˜å¯è®¿é—®
@UseInterceptors(AuditInterceptor) // å®¡è®¡æ—¥å¿—
export class LogLevelManagementController {
  // ...
}
```

### æ•æ„Ÿä¿¡æ¯è¿‡æ»¤

ç¡®ä¿æ—¥å¿—ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼š

```typescript
// è‡ªåŠ¨è¿‡æ»¤æ•æ„Ÿå­—æ®µ
const sanitizeData = (data: any) => {
  const sensitive = ['password', 'token', 'secret', 'key'];
  const cleaned = { ...data };
  
  sensitive.forEach(field => {
    if (cleaned[field]) {
      cleaned[field] = '[REDACTED]';
    }
  });
  
  return cleaned;
};
```

---

## ğŸ“… å®æ–½è®¡åˆ’å’Œç‰ˆæœ¬å†å²

### ğŸ¯ 4å‘¨å®æ–½æ—¶é—´è¡¨

#### Week 1: åŸºç¡€æ¶æ„æ­å»º
- âœ… **ç›®æ ‡**: åˆ›å»ºæ ¸å¿ƒç»„ä»¶ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§
- âœ… **ä»»åŠ¡**: 
  - åˆ›å»º`LogLevelController`åŸºç¡€ç±»
  - è®¾è®¡JSONé…ç½®æ–‡ä»¶ç»“æ„  
  - æ·»åŠ åŠŸèƒ½å¼€å…³ä¿æŠ¤æœºåˆ¶
  - ç¼–å†™å•å…ƒæµ‹è¯•
- âœ… **äº¤ä»˜ç‰©**: 
  - `src/common/logging/log-level-controller.ts`
  - `config/log-levels.json`
  - æµ‹è¯•è¦†ç›–ç‡ > 80%

#### Week 2: ç°æœ‰ç³»ç»Ÿé›†æˆ  
- âœ… **ç›®æ ‡**: é›¶ä¾µå…¥å¼é›†æˆç°æœ‰Pino Logger
- âœ… **ä»»åŠ¡**:
  - å¢å¼º`CustomLogger`ç±»ï¼Œæ·»åŠ çº§åˆ«æ§åˆ¶é€»è¾‘
  - ä¿æŒ`createLogger()`APIå®Œå…¨å…¼å®¹
  - å®ç°é…ç½®æ–‡ä»¶åŠ è½½å’ŒéªŒè¯
  - å°è§„æ¨¡æ¨¡å—æµ‹è¯•
- âœ… **äº¤ä»˜ç‰©**:
  - å¢å¼ºç‰ˆ`logger.config.ts`
  - é…ç½®åŠ è½½æœºåˆ¶
  - å‘åå…¼å®¹éªŒè¯

#### Week 3: ç³»ç»ŸéªŒè¯å’Œæ€§èƒ½ä¼˜åŒ–
- ğŸ”„ **ç›®æ ‡**: å…¨é¢æµ‹è¯•å’Œæ€§èƒ½è°ƒä¼˜
- ğŸ”„ **ä»»åŠ¡**:
  - é€æ­¥å¼€å¯ç‰¹å®šæ¨¡å—æµ‹è¯•
  - çº§åˆ«æ£€æŸ¥ç¼“å­˜ä¼˜åŒ–ï¼ˆ5ç§’TTLï¼‰
  - æ€§èƒ½åŸºå‡†æµ‹è¯•å’Œå¯¹æ¯”
  - é›†æˆæµ‹è¯•è¦†ç›–
- ğŸ”„ **äº¤ä»˜ç‰©**:
  - æ€§èƒ½æµ‹è¯•æŠ¥å‘Š
  - ç¼“å­˜æœºåˆ¶å®ç°
  - æ•…éšœå¤„ç†å’Œé™çº§ç­–ç•¥

#### Week 4: ç”Ÿäº§éƒ¨ç½²å’Œç›‘æ§
- â³ **ç›®æ ‡**: ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œ
- â³ **ä»»åŠ¡**:
  - ç”Ÿäº§ç¯å¢ƒé…ç½®ä¼˜åŒ–
  - ç›‘æ§æŒ‡æ ‡æ¥å…¥
  - REST APIç®¡ç†ç«¯ç‚¹ï¼ˆå¯é€‰ï¼‰
  - æ–‡æ¡£å®Œå–„å’ŒåŸ¹è®­
- â³ **äº¤ä»˜ç‰©**:
  - ç”Ÿäº§é…ç½®æ¨¡æ¿
  - ç›‘æ§å¤§å±é›†æˆ
  - æ“ä½œæ‰‹å†Œ

### ğŸ“Š ç‰ˆæœ¬å‘å¸ƒè®¡åˆ’

| ç‰ˆæœ¬ | å‘å¸ƒæ—¥æœŸ | åŠŸèƒ½èŒƒå›´ | å®æ–½é˜¶æ®µ |
|------|---------|----------|----------|
| **v1.0.0** | Week 1 å®Œæˆ | æ ¸å¿ƒLogLevelController + é…ç½®æ–‡ä»¶ | âœ… åŸºç¡€æ¶æ„ |  
| **v1.1.0** | Week 2 å®Œæˆ | ç°æœ‰Loggeré›†æˆ + APIå…¼å®¹ | âœ… ç³»ç»Ÿé›†æˆ |
| **v1.2.0** | Week 3 å®Œæˆ | æ€§èƒ½ä¼˜åŒ– + ç¼“å­˜æœºåˆ¶ | ğŸ”„ æ€§èƒ½ä¼˜åŒ– |
| **v1.3.0** | Week 4 å®Œæˆ | ç”Ÿäº§éƒ¨ç½² + ç›‘æ§é›†æˆ | â³ ç”Ÿäº§å°±ç»ª |
| **v2.0.0** | æŒ‰éœ€å®æ–½ | REST API + å‘½åç©ºé—´é€šé…ç¬¦ | ğŸ“‹ æ‰©å±•åŠŸèƒ½ |

### ğŸ”„ ç‰ˆæœ¬ç‰¹æ€§å¯¹æ¯”

#### v1.x ç³»åˆ—ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- âœ… ä¸¤çº§æ—¥å¿—æ§åˆ¶ï¼ˆå…¨å±€ + æ¨¡å—ï¼‰
- âœ… é…ç½®æ–‡ä»¶é©±åŠ¨
- âœ… 100%å‘åå…¼å®¹
- âœ… åŸºç¡€æ€§èƒ½ä¼˜åŒ–
- âœ… åŠŸèƒ½å¼€å…³ä¿æŠ¤

#### v2.x ç³»åˆ—ï¼ˆæ‰©å±•åŠŸèƒ½ - å¯é€‰ï¼‰
- ğŸ”„ REST APIç®¡ç†ç•Œé¢
- ğŸ”„ å‘½åç©ºé—´é€šé…ç¬¦æ”¯æŒ
- ğŸ”„ é«˜çº§æ€§èƒ½ä¼˜åŒ–
- ğŸ”„ åˆ†å¸ƒå¼æ—¥å¿—èšåˆ
- ğŸ”„ WebSocketå®æ—¶é…ç½®æ›´æ–°

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›æ—¥å¿—ç³»ç»Ÿã€‚

### æäº¤Issue

è¯·åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
- é—®é¢˜æè¿°
- å¤ç°æ­¥éª¤
- æœŸæœ›è¡Œä¸º
- å®é™…è¡Œä¸º
- ç¯å¢ƒä¿¡æ¯

### å¼€å‘æµç¨‹

1. Forkä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/improved-logging`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add: improved logging feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/improved-logging`
5. åˆ›å»ºPull Request

---

## ğŸ“ æ”¯æŒ

- **æ–‡æ¡£**ï¼šæœ¬æ–‡æ¡£
- **ç¤ºä¾‹**ï¼š`examples/logging/`
- **æµ‹è¯•**ï¼š`test/logging/`
- **é—®é¢˜åé¦ˆ**ï¼šåˆ›å»ºGitHub Issue

---

## ğŸ¯ æ€»ç»“å’Œå»ºè®®

### ğŸ“ å…³é”®å†³ç­–æ€»ç»“

1. **æ¶æ„ç®€åŒ–**: ä»ä¸‰çº§æ§åˆ¶ç®€åŒ–ä¸ºä¸¤çº§ï¼ˆå…¨å±€+æ¨¡å—ï¼‰ï¼Œé™ä½å¤æ‚åº¦
2. **é…ç½®æ–‡ä»¶ä¼˜å…ˆ**: é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§é«˜äºç¯å¢ƒå˜é‡ï¼Œæä¾›ç¨³å®šçš„ç”Ÿäº§é…ç½®
3. **ç°æœ‰ç³»ç»Ÿé›†æˆ**: åŸºäºç°æœ‰Pino Loggerå¢å¼ºï¼Œä¿æŒ100%å‘åå…¼å®¹
4. **åˆ†é˜¶æ®µå®æ–½**: 4å‘¨æ¸è¿›å¼å®æ–½ï¼ŒåŠŸèƒ½å¼€å…³ä¿æŠ¤ï¼Œé›¶é£é™©è¿ç§»
5. **ç”Ÿäº§å¯¼å‘**: é‡ç‚¹å…³æ³¨ç¨³å®šæ€§å’Œæ€§èƒ½ï¼Œæ‰©å±•åŠŸèƒ½æŒ‰éœ€å®ç°

### âœ… æ¨èå®æ–½

è¿™ä»½ä¼˜åŒ–åçš„æ—¥å¿—å¼€å‘æ–‡æ¡£å®Œå…¨é€‚åˆæ‚¨çš„New Stock APIé¡¹ç›®ï¼š

- **æŠ€æœ¯åŒ¹é…åº¦é«˜**: ä¸ç°æœ‰NestJS + Pino Loggeræ¶æ„æ— ç¼é›†æˆ
- **å®æ–½é£é™©å¯æ§**: æ¸è¿›å¼è¿ç§» + åŠŸèƒ½å¼€å…³ä¿æŠ¤
- **ä¸šåŠ¡ä»·å€¼æ˜ç¡®**: ç²¾å‡†çš„æ¨¡å—çº§æ—¥å¿—æ§åˆ¶ï¼Œæå‡è°ƒè¯•æ•ˆç‡
- **ç»´æŠ¤æˆæœ¬åˆç†**: ç®€åŒ–çš„ä¸¤çº§é…ç½®ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤

### ğŸš€ ç«‹å³å¼€å§‹

å»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºå¼€å§‹å®æ–½ï¼š

1. **Week 1**: åˆ›å»º`config/log-levels.json`é…ç½®æ–‡ä»¶
2. **Week 1**: å®ç°`LogLevelController`æ ¸å¿ƒç±»
3. **Week 2**: å¢å¼ºç°æœ‰`logger.config.ts`ï¼Œä¿æŒAPIå…¼å®¹
4. **Week 3**: é€æ­¥æµ‹è¯•éªŒè¯ï¼Œæ€§èƒ½ä¼˜åŒ–
5. **Week 4**: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

è¿™ä¸ªè®¾è®¡å°†ä¸ºæ‚¨çš„é¡¹ç›®å¸¦æ¥ç²¾å‡†çš„æ—¥å¿—æ§åˆ¶èƒ½åŠ›ï¼ŒåŒæ—¶ä¿æŒç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼š2.0.0ï¼ˆåŸºäºé¡¹ç›®éœ€æ±‚ä¼˜åŒ–ç‰ˆæœ¬ï¼‰  
**æœ€åæ›´æ–°**ï¼š2024-09-14  
**é€‚ç”¨é¡¹ç›®**ï¼šNew Stock API Backend  
**ç»´æŠ¤è€…**ï¼šç³»ç»Ÿæ¶æ„å›¢é˜Ÿ