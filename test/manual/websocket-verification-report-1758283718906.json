{
  "tests": [
    {
      "name": "Gateway-only模式配置验证",
      "passed": true,
      "details": {
        "config": {
          "gatewayOnlyMode": true,
          "allowLegacyFallback": false,
          "strictMode": true
        }
      },
      "timestamp": "2025-09-19T12:08:38.052Z"
    },
    {
      "name": "Legacy回退模式禁用验证",
      "passed": true,
      "details": {
        "allowLegacyFallback": false
      },
      "timestamp": "2025-09-19T12:08:38.053Z"
    },
    {
      "name": "严格模式启用验证",
      "passed": true,
      "details": {
        "strictMode": true
      },
      "timestamp": "2025-09-19T12:08:38.053Z"
    },
    {
      "name": "特性开关默认配置验证",
      "passed": true,
      "details": {
        "flags": {
          "WS_GATEWAY_ONLY_MODE": "true",
          "WS_ALLOW_LEGACY_FALLBACK": "false",
          "WS_STRICT_MODE": "true",
          "WS_VALIDATION_MODE": "production"
        }
      },
      "timestamp": "2025-09-19T12:08:38.053Z"
    },
    {
      "name": "环境变量解析验证",
      "passed": true,
      "details": {
        "parsedTypes": [
          [
            "WS_GATEWAY_ONLY_MODE",
            "string"
          ],
          [
            "WS_ALLOW_LEGACY_FALLBACK",
            "string"
          ],
          [
            "WS_STRICT_MODE",
            "string"
          ],
          [
            "WS_VALIDATION_MODE",
            "string"
          ]
        ]
      },
      "timestamp": "2025-09-19T12:08:38.053Z"
    },
    {
      "name": "配置文件完整性验证",
      "passed": true,
      "details": {
        "missingFiles": [],
        "totalFiles": 4
      },
      "timestamp": "2025-09-19T12:08:38.053Z"
    },
    {
      "name": "TypeScript编译验证",
      "passed": true,
      "details": {
        "exitCode": 0,
        "duration": 852,
        "output": "\n> smart-stock-data-system@1.0.0 typecheck:file\n> node scripts/tsc-single-file.js src/core/03-fetching/stream-data-fetcher/providers/websocket-server.provider.ts\n\n",
        "error": ""
      },
      "timestamp": "2025-09-19T12:08:38.905Z"
    },
    {
      "name": "回退策略文档验证",
      "passed": true,
      "details": {
        "docExists": true,
        "hasRequiredSections": true,
        "docSize": 7541
      },
      "timestamp": "2025-09-19T12:08:38.906Z"
    },
    {
      "name": "WebSocket连接模拟测试",
      "passed": true,
      "details": {
        "test": {
          "endpoint": "ws://localhost:3001/socket.io",
          "expectedMode": "gateway-only",
          "timeout": 5000
        },
        "result": {
          "canConnect": true,
          "responseTime": 143.55042944069288,
          "gatewayMode": true,
          "legacyMode": false
        }
      },
      "timestamp": "2025-09-19T12:08:38.906Z"
    }
  ],
  "summary": {
    "total": 9,
    "passed": 9,
    "failed": 0,
    "duration": 856
  }
}