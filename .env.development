NODE_ENV=development


# 数据库配置
MONGODB_URI=mongodb://localhost:27017/smart-stock-data
REDIS_URL=redis://localhost:6379

# 服务配置
PORT=3000

#CSRF
DISABLE_CSRF=true

# 数据源配置
# LongPort
LONGPORT_APP_KEY=dda77f94a1a12559e46b31c349c4049e
LONGPORT_APP_SECRET=2aaf7ed9ab25f152b78d8ae164581ababbd3896b68f5b7fbd0900f6a019e4557
LONGPORT_ACCESS_TOKEN=m_eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJsb25nYnJpZGdlIiwic3ViIjoiYWNjZXNzX3Rva2VuIiwiZXhwIjoxNzU4OTU1MjM4LCJpYXQiOjE3NTExNzkyMzgsImFrIjoiZGRhNzdmOTRhMWExMjU1OWU0NmIzMWMzNDljNDA0OWUiLCJhYWlkIjoyMDYzMjUyNiwiYWMiOiJsYiIsIm1pZCI6ODQ4Mzc4LCJzaWQiOiIvaGZNc3RiR21SV3BVRjBGcFFKUnNRPT0iLCJibCI6MywidWwiOjAsImlrIjoibGJfMjA2MzI1MjYifQ.5O5KPuMC1jUh9hZCcYMhRHNIyAS3l9SguWh3Zp_pn67bJH2sNYRSk9_qTWywUkKt5RMyq_XOtOkVV-8WUp0m5fkyxwPd1FgTl_0LCAQ5ECYpBNSAeUlZg0m6uaU_JaBFQyH54p1sMemoXdz3IMDuVGNuxxsMi_VqGG1GQFEIL5lQXLVpeGN1NM50v1hmSyXGGZKtyQSHbLr3H8xg7Nb8MwXeh3n0ucpzQG5LRFJeUOWet4uUNLehI-faPwRbkWkjccmfIjOHH386zZjl00ZnhFVG3WpsPxjT8sphMaeCYjQi7CaMRjl0wp5ab3v0FQVq2kgPyxzFW_IHdxmn9sefpaiPTVVLapASJsQ2halK4iKcJPAeJcEoTenT9WRwIFIgdnpmgP0uA-bJkVkUM-uZ2MeSrAxar5GTTP4Cu1WdrlsKuOoGnSHLAIdMevr0UNqy-NhOu_0JlOtd0Cpgb4Xn4rFHEA2Mq5y5hfHoj10G9G2GqwKBYKhDSyefrk9dSoY5_GBLtgGaLaSO8uqCcJ62OpwEHJ9xkFePJoKmiYHeviNldHqEAbPo0---kqedICtJC440mBDA_GF9Nri6o9VgLtmOfpb7IbRBQSN3aC3dz76Pp_DWCfxhDd28uCHnrdLAX7Z7Rk38KmoJ5YJZg3bnxuFPbenS5uOIZtOpzIy-lp4

# LongPort SG
LONGPORT_SG_APP_KEY=
LONGPORT_SG_APP_SECRET=
LONGPORT_SG_ACCESS_TOKEN=

# iTick
ITICK_TOKEN=

# TwelveData
TWELVEDATA_API_KEY=

# Futu
FUTU_HOST=
FUTU_PORT=
FUTU_RSA_FILE=

# 缓存配置
CACHE_DEFAULT_TTL=300
CACHE_STRONG_TTL=5
CACHE_COMPRESSION_THRESHOLD=1024
CACHE_MAX_ITEMS=10000
CACHE_MAX_BATCH_SIZE=100

# ================================
# 🆕 统一TTL配置 (新配置体系)
# ================================
CACHE_PROVIDER_SELECTION_TTL=300   # 提供商选择TTL（秒）
CACHE_STREAM_WARM_TTL=300          # 流缓存Warm Cache TTL（秒）
CACHE_MARKET_OPEN_TTL=300          # 市场开市TTL（秒）

# ================================
# 🆕 Common模块配置 (可调节参数)
# ================================
# 批量处理配置
DEFAULT_BATCH_SIZE=100             # 默认批量大小
MAX_BATCH_SIZE=1000               # 最大批量大小
DEFAULT_PAGE_SIZE=10              # 默认分页大小
MAX_PAGE_SIZE=100                 # 最大分页大小
MAX_CONCURRENT=10                 # 最大并发数

# 超时配置
QUICK_TIMEOUT_MS=5000             # 快速超时（毫秒）
DEFAULT_TIMEOUT_MS=30000          # 默认超时（毫秒）
LONG_TIMEOUT_MS=60000             # 长超时（毫秒）
CONNECTION_TIMEOUT_MS=5000        # 连接超时（毫秒）

# 重试配置
MAX_RETRY_ATTEMPTS=3              # 最大重试次数
BACKOFF_BASE=2                    # 退避基数
MAX_RETRY_DELAY_MS=10000          # 最大重试延迟（毫秒）
CRITICAL_MAX_ATTEMPTS=5           # 关键操作最大重试次数

# 性能阈值配置
FAST_OPERATION_THRESHOLD_MS=100   # 快速操作阈值（毫秒）
NORMAL_OPERATION_THRESHOLD_MS=500 # 正常操作阈值（毫秒）
SLOW_OPERATION_THRESHOLD_MS=1000  # 慢操作阈值（毫秒）
VERY_SLOW_OPERATION_THRESHOLD_MS=5000 # 非常慢操作阈值（毫秒）
CRITICAL_OPERATION_THRESHOLD_MS=10000 # 关键操作阈值（毫秒）

# 内存阈值配置
LOW_MEMORY_THRESHOLD_MB=50        # 低内存阈值（MB）
NORMAL_MEMORY_THRESHOLD_MB=100    # 正常内存阈值（MB）
HIGH_MEMORY_THRESHOLD_MB=200      # 高内存阈值（MB）
CRITICAL_MEMORY_THRESHOLD_MB=500  # 严重内存阈值（MB）
MAX_OBJECT_SIZE_MB=10             # 最大对象大小（MB）
MAX_REQUEST_SIZE_MB=50            # 最大请求大小（MB）

# 连接池配置
MIN_CONNECTION_POOL_SIZE=5        # 最小连接池大小
MAX_CONNECTION_POOL_SIZE=20       # 最大连接池大小

# 大小限制配置
SMALL_SIZE_LIMIT=50               # 小尺寸限制
MEDIUM_SIZE_LIMIT=100             # 中等尺寸限制
LARGE_SIZE_LIMIT=500              # 大尺寸限制
HUGE_SIZE_LIMIT=1000              # 巨大尺寸限制
MASSIVE_SIZE_LIMIT=10000          # 海量尺寸限制

# ================================
# 🆕 环境配置 (开发环境特定)
# ================================
ENV_DEBUG_LOGS=true               # 调试日志开关
ENV_VERBOSE_ERRORS=true           # 详细错误开关
ENV_STACK_TRACES=true             # 堆栈跟踪开关
ENV_REQUEST_LOGGING=true          # 请求日志开关
ENV_HOT_RELOAD=true               # 热重载开关
ENV_SOURCE_MAPS=true              # Source Map开关
ENV_API_DOCS=true                 # API文档开关
ENV_SWAGGER_UI=true               # Swagger UI开关
ENV_METRICS_ENDPOINT=true         # 指标端点开关
ENV_CORS_ALLOW_ALL=true           # CORS全开开关（开发环境）
ENV_DISABLE_CSRF=true             # 禁用CSRF开关（开发环境）
ENV_ALLOW_HTTP=true               # 允许HTTP开关（开发环境）

# ================================
# 保留原有配置（向后兼容）
# ================================
CACHE_REALTIME_TTL=30
CACHE_MONITORING_TTL=300
CACHE_AUTH_TTL=300
CACHE_TRANSFORMER_TTL=300
CACHE_SUGGESTION_TTL=300
CACHE_LONG_TERM_TTL=3600
CACHE_MAX_KEY_LENGTH=255
CACHE_MAX_VALUE_SIZE_MB=10
CACHE_LOCK_TTL=30

# 缓存限制配置环境变量
CACHE_MAX_SIZE=10000
CACHE_LRU_SORT_BATCH_SIZE=1000
CACHE_MAX_SIZE_MB=1024

# 其他缓存操作配置
CACHE_COMPRESSION_ENABLED=true
CACHE_SLOW_OPERATION_MS=100
CACHE_RETRY_DELAY_MS=100

# Alert告警系统配置 - 开发环境
# 基础Alert配置
ALERT_EVALUATION_INTERVAL=60         # 评估间隔(秒) - 开发环境频繁评估
ALERT_DEFAULT_COOLDOWN=300           # 默认冷却时间(秒)
ALERT_BATCH_SIZE=100                 # 批量处理大小
ALERT_EVALUATION_TIMEOUT=5000        # 评估超时时间(毫秒)
ALERT_MAX_RETRIES=3                  # 最大重试次数

# Alert验证配置
ALERT_VALIDATION_DURATION_MIN=30     # 持续时间最小值(秒)
ALERT_VALIDATION_DURATION_MAX=600    # 持续时间最大值(秒) 
ALERT_VALIDATION_COOLDOWN_MAX=3000   # 冷却时间最大值(秒)

# Alert缓存配置
ALERT_CACHE_COOLDOWN_PREFIX=alert:cooldown:    # 冷却期缓存键前缀
ALERT_CACHE_ACTIVE_PREFIX=alert:active         # 活跃告警缓存键前缀

# Alert限制配置
ALERT_LIMITS_MAX_CONDITIONS=10       # 单规则最大条件数
ALERT_LIMITS_MAX_RULES_PER_USER=100  # 单用户最大规则数
ALERT_LIMITS_DEFAULT_PAGE_SIZE=20    # 默认分页大小
ALERT_LIMITS_MAX_QUERY_RESULTS=100   # 单次查询最大结果数

# 统一TTL配置 - Alert组件TTL管理
ALERT_COOLDOWN_TTL=300               # Alert冷却期TTL(秒)
ALERT_ACTIVE_DATA_TTL=300            # Alert活跃数据TTL(秒)
ALERT_CONFIG_CACHE_TTL=1800          # Alert配置缓存TTL(秒)
ALERT_STATS_CACHE_TTL=3600           # Alert统计缓存TTL(秒)
ALERT_HISTORICAL_DATA_TTL=43200      # Alert历史数据TTL(秒)
ALERT_ARCHIVED_DATA_TTL=86400        # Alert归档数据TTL(秒)

# 统一TTL配置 - 跨模块协调
MONITORING_TREND_TTL=300             # 监控趋势数据TTL(秒)

# 速率限制 (旧配置，保留兼容性)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# 双轨制限速系统配置 - 开发环境
# IP级别频率限制配置
IP_RATE_LIMIT_ENABLED=true      # 支持开关控制
IP_RATE_LIMIT_MAX=10000          # 宽松限制便于开发
IP_RATE_LIMIT_WINDOW=60000       # 可配置时间窗口(毫秒)

# API Key级别频率限制配置
API_RATE_LIMIT_STRATEGY=fixed_window
API_RATE_LIMIT_DEFAULT_REQUESTS=1000    # 开发环境更宽松
API_RATE_LIMIT_DEFAULT_WINDOW=1m



#  fixed_window '适用于简单场景，性能较好，但可能存在突发流量问题',
#  sliding_window '适用于严格控制场景，流量控制更平滑，但消耗更多资源',

JWT_SECRET=your_super_secret_and_long_string_here

# ================================
# ================================
# Alert模块配置（新增标准化段落）
# ================================

# Alert缓存TTL配置（秒）
CACHE_ALERT_ACTIVE_TTL=300           # Alert活跃数据TTL
CACHE_ALERT_HISTORICAL_TTL=3600      # Alert历史数据TTL  
CACHE_ALERT_COOLDOWN_TTL=300         # Alert冷却期TTL
CACHE_ALERT_CONFIG_TTL=600           # Alert配置缓存TTL
CACHE_ALERT_STATS_TTL=300            # Alert统计缓存TTL

# Alert性能配置
ALERT_MAX_CONCURRENCY=5              # 最大并发数
ALERT_QUEUE_SIZE_LIMIT=100           # 队列大小限制
ALERT_RATE_LIMIT_PER_MINUTE=100      # 每分钟速率限制
ALERT_CONNECTION_POOL_SIZE=10        # 连接池大小

# Alert业务配置
ALERT_EVALUATION_INTERVAL=60         # 评估间隔（秒）
ALERT_DEFAULT_COOLDOWN=300           # 默认冷却期（秒）
ALERT_EVALUATION_TIMEOUT=5000        # 评估超时（毫秒）
ALERT_MAX_RETRIES=3                  # 最大重试次数

# ================================
# 系统安全配置（从Alert模块迁移）
# ================================
SESSION_LIFETIME=86400               # 会话生命周期（24小时）
IDLE_SESSION_TIMEOUT=1800            # 空闲会话超时（30分钟）
ACCOUNT_LOCKOUT_DURATION=1800        # 账户锁定时长（30分钟）
RATE_LIMIT_WINDOW=60                 # 速率限制窗口（60秒）

# ================================
# 通知系统配置 (开发环境优化)
# ================================

# 批处理配置 - 开发环境适度并发
NOTIFICATION_DEFAULT_BATCH_SIZE=10
NOTIFICATION_MAX_BATCH_SIZE=100
NOTIFICATION_MAX_CONCURRENCY=5
NOTIFICATION_BATCH_TIMEOUT=60000

# 超时配置 - 开发环境更长超时便于调试
NOTIFICATION_EMAIL_TIMEOUT=60000       # 邮件超时延长便于调试
NOTIFICATION_SMS_TIMEOUT=10000         # SMS超时延长
NOTIFICATION_WEBHOOK_TIMEOUT=30000     # Webhook超时延长便于调试
NOTIFICATION_SLACK_TIMEOUT=30000       # Slack超时延长
NOTIFICATION_DINGTALK_TIMEOUT=30000    # 钉钉超时延长
NOTIFICATION_DEFAULT_TIMEOUT=30000     # 默认超时延长

# 重试配置 - 开发环境更多重试机会
NOTIFICATION_MAX_RETRY_ATTEMPTS=5      # 开发环境更多重试
NOTIFICATION_INITIAL_RETRY_DELAY=2000  # 初始延迟延长便于观察
NOTIFICATION_RETRY_BACKOFF_MULTIPLIER=2
NOTIFICATION_MAX_RETRY_DELAY=60000     # 最大延迟延长
NOTIFICATION_JITTER_FACTOR=0.1

# 优先级权重配置
NOTIFICATION_CRITICAL_PRIORITY_WEIGHT=100
NOTIFICATION_URGENT_PRIORITY_WEIGHT=80
NOTIFICATION_HIGH_PRIORITY_WEIGHT=60
NOTIFICATION_NORMAL_PRIORITY_WEIGHT=40
NOTIFICATION_LOW_PRIORITY_WEIGHT=20

# 验证配置 - 开发环境更宽松限制
NOTIFICATION_VARIABLE_NAME_MIN_LENGTH=1     # 变量名最小长度
NOTIFICATION_VARIABLE_NAME_MAX_LENGTH=100   # 开发环境更长变量名
NOTIFICATION_MIN_TEMPLATE_LENGTH=1          # 模板最小长度
NOTIFICATION_MAX_TEMPLATE_LENGTH=20000      # 开发环境更长模板
NOTIFICATION_TITLE_MAX_LENGTH=500           # 开发环境更长标题
NOTIFICATION_CONTENT_MAX_LENGTH=5000        # 开发环境更长内容

# 功能开关 - 开发环境全部开启便于测试
NOTIFICATION_ENABLE_BATCH_PROCESSING=true
NOTIFICATION_ENABLE_RETRY_MECHANISM=true
NOTIFICATION_ENABLE_PRIORITY_QUEUE=true
NOTIFICATION_ENABLE_METRICS_COLLECTION=true

# 模板配置
NOTIFICATION_DEFAULT_TEMPLATE=alert_fired
NOTIFICATION_EMAIL_SUBJECT_TEMPLATE=[{severity}] {ruleName} - {status}